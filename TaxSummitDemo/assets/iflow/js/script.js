/*! New York State Department of Taxation & Finance External Applications
 *  @description  Iflow External Applications
 *  @version      4.2.55.REL20180514
 *  @copyright    2018 New York State Department of Taxation & Finance
 */

window.matchMedia&&window.matchMedia("all").addListener&&function(name,context,factory){var matchMedia=window.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=factory(matchMedia):"function"==typeof define&&define.amd?define(function(){return context.enquire=factory(matchMedia)}):context.enquire=factory(matchMedia)}(0,this,function(matchMedia){"use strict";function each(collection,fn){for(var i=0,length=collection.length;i<length&&!1!==fn(collection[i],i);i++);}function isFunction(target){return"function"==typeof target}function QueryHandler(options){!(this.options=options).deferSetup&&this.setup()}function MediaQuery(query,isUnconditional){this.query=query,this.isUnconditional=isUnconditional,this.handlers=[],this.mql=matchMedia(query);var self=this;this.listener=function(mql){self.mql=mql,self.assess()},this.mql.addListener(this.listener)}function MediaQueryDispatch(){if(!matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!matchMedia("only all").matches}return QueryHandler.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(target){return this.options===target||this.options.match===target}},MediaQuery.prototype={addHandler:function(handler){var qh=new QueryHandler(handler);this.handlers.push(qh),this.matches()&&qh.on()},removeHandler:function(handler){var handlers=this.handlers;each(handlers,function(h,i){if(h.equals(handler))return h.destroy(),!handlers.splice(i,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){each(this.handlers,function(handler){handler.destroy()}),this.mql.removeListener&&this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var action=this.matches()?"on":"off";each(this.handlers,function(handler){handler[action]()})}},MediaQueryDispatch.prototype={register:function(q,options,shouldDegrade){var target,queries=this.queries,isUnconditional=shouldDegrade&&this.browserIsIncapable;return queries[q]||(queries[q]=new MediaQuery(q,isUnconditional)),isFunction(options)&&(options={match:options}),target=options,"[object Array]"!==Object.prototype.toString.apply(target)&&(options=[options]),each(options,function(handler){isFunction(handler)&&(handler={match:handler}),queries[q].addHandler(handler)}),this},unregister:function(q,handler){var query=this.queries[q];return query&&(handler?query.removeHandler(handler):(query.clear(),delete this.queries[q])),this}},new MediaQueryDispatch}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(n){return n<10?"0"+n:n}var cx,escapable,gap,indent,meta,rep;function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;i<length;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;i<length;i+=1)"string"==typeof rep[i]&&(v=str(k=rep[i],value))&&partial.push(quote(k)+(gap?": ":":")+v);else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value))&&partial.push(quote(k)+(gap?": ":":")+v);return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(value,replacer,space){var i;if(indent=gap="","number"==typeof space)for(i=0;i<space;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if((rep=replacer)&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(void 0!==(v=walk(value,k))?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),window.Modernizr=function(window,document,undefined){var featureName,hasOwnProp,Modernizr={},docElement=document.documentElement,mod="modernizr",modElem=document.createElement(mod),mStyle=modElem.style,prefixes=" -webkit- -moz- -o- -ms- ".split(" "),tests={},classes=[],slice=classes.slice,injectElementWithStyles=function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement("div"),body=document.body,fakeBody=body||document.createElement("body");if(parseInt(nodes,10))for(;nodes--;)(node=document.createElement("div")).id=testnames?testnames[nodes]:mod+(nodes+1),div.appendChild(node);return style=["&#173;",'<style id="s',mod,'">',rule,"</style>"].join(""),div.id=mod,(body?div:fakeBody).innerHTML+=style,fakeBody.appendChild(div),body||(fakeBody.style.background="",fakeBody.style.overflow="hidden",docOverflow=docElement.style.overflow,docElement.style.overflow="hidden",docElement.appendChild(fakeBody)),ret=callback(div,rule),body?div.parentNode.removeChild(div):(fakeBody.parentNode.removeChild(fakeBody),docElement.style.overflow=docOverflow),!!ret},_hasOwnProperty={}.hasOwnProperty;function setCss(str){mStyle.cssText=str}function is(obj,type){return typeof obj===type}for(var feature in hasOwnProp=is(_hasOwnProperty,"undefined")||is(_hasOwnProperty.call,"undefined")?function(object,property){return property in object&&is(object.constructor.prototype[property],"undefined")}:function(object,property){return _hasOwnProperty.call(object,property)},Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError;var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F,result=target.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}return target.apply(that,args.concat(slice.call(arguments)))};return bound}),tests.touch=function(){var bool;return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?bool=!0:injectElementWithStyles(["@media (",prefixes.join("touch-enabled),("),mod,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(node){bool=9===node.offsetTop}),bool},tests)hasOwnProp(tests,feature)&&(featureName=feature.toLowerCase(),Modernizr[featureName]=tests[feature](),classes.push((Modernizr[featureName]?"":"no-")+featureName));return Modernizr.addTest=function(feature,test){if("object"==typeof feature)for(var key in feature)hasOwnProp(feature,key)&&Modernizr.addTest(key,feature[key]);else{if(feature=feature.toLowerCase(),Modernizr[feature]!==undefined)return Modernizr;test="function"==typeof test?test():test,docElement.className+=" "+(test?"":"no-")+feature,Modernizr[feature]=test}return Modernizr},setCss(""),modElem=null,Modernizr._version="2.8.3",Modernizr._prefixes=prefixes,Modernizr.testStyles=injectElementWithStyles,docElement.className=docElement.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+classes.join(" "),Modernizr}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b))for(var d in"img"!=a&&m(function(){t.removeChild(l)},50),y[c])try{y[c].hasOwnProperty(d)&&y[c][d].onload()}catch(errorObject){}}j=j||B.errorTimeout;var l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var A,B,l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,u=(l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,r?"object":l?"script":"img"),v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};(B=function(a){function g(a,e,f,g,h){var i=function(a){a=a.split("!");var e,f,g,b=x.length,c=a.pop(),d=a.length;for(c={url:c,origUrl:c,prefixes:a},f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":void 0,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var c,b=0;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var m,n,h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)e(j=a[i])?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)}).addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var l,o,k=b.createElement("script");e=e||B.errorTimeout;for(o in k.src=a,d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||c(l=1)},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j;e=b.createElement("link"),c=i?h:c||f;for(j in e.href=a,e.rel="stylesheet",e.type="text/css",d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=[],i=2<=arguments.length?arguments[1]:void 0,s=0;s<n;s++)if(s in t){var o=t[s];e.call(i,o,s,t)&&r.push(o)}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=this.length>>>0;for(t=+t||0,Math.abs(t)===1/0&&(t=0),t<0&&(t+=n)<0&&(t=0);t<n;t++)if(this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=2<=arguments.length?arguments[1]:void 0,i=0;i<n;i++)i in t&&e.call(r,t[i],i,t)}),Array.prototype.some||(Array.prototype.some=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=2<=arguments.length?arguments[1]:void 0,i=0;i<n;i++)if(i in t&&e.call(r,t[i],i,t))return!0;return!1});var domready=function(){var listener,fns=[],doc=document,loaded=/^loaded|^i|^c/.test(doc.readyState);return loaded||(doc.addEventListener?doc.addEventListener("DOMContentLoaded",listener=function(){for(doc.removeEventListener("DOMContentLoaded",listener),loaded=1;listener=fns.shift();)listener()},!1):doc.attachEvent("load",listener=function(){for(doc.detachEvent("load",listener),loaded=1;listener=fns.shift();)listener()})),function(fn){loaded?fn():fns.push(fn)}}();!function(win){win.location&&win.top&&win.top.location&&win.location!==win.top.location&&(win.top.location=win.location)}(this);var uiGlobal={sVersion:"",oSessionTimeOut:{iDuration:6e5,sConfirmText:"Your online session is about to time out. Select OK to continue the session or select Cancel to allow your session to time out."},isResponsiveEnabled:!1,hasLoaded:!1,sTargetEnum:{blank:"_blank",self:"_self",parent:"_parent",top:"_top"},appCode:"XXXX",page:{code:"XXXX",hasCaptcha:!1},trackingQueue:[],repeatFields:[],externalEnv:{sId:""},dropmenus:[],assetPath:"/iflow/"};uiGlobal.sIFLOWImagesPath=uiGlobal.assetPath+"images/",uiGlobal.assets={},uiGlobal.assets.protocol="file:"===document.location.protocol?"http:":document.location.protocol,uiGlobal.assets.urls={},uiGlobal.assets.urls.spinwheel=uiGlobal.assetPath+"js/compiled/spinwheel.js",uiGlobal.assets.urls.fastclick=uiGlobal.assetPath+"js/compiled/fastclick.js",uiGlobal.assets.urls.banner=uiGlobal.assetPath+"js/compiled/banner.js",uiGlobal.assets.urls.unav={},uiGlobal.assets.urls.unav.banner=uiGlobal.assets.protocol+"//static-assets.ny.gov/load_global_menu/ajax?iframe=true&target=blank&xdiframe="+encodeURIComponent(uiGlobal.assetPath)+"xd_nygov.html",uiGlobal.assets.urls.unav.footer=uiGlobal.assets.protocol+"//static-assets.ny.gov/load_global_footer/ajax?iframe=true&target=blank";var PLUGIN=PLUGIN||{};PLUGIN.namespace=function(namespace){if("string"!=typeof namespace||0===namespace.replace(/^\s+|\s+$/g,"").length)throw Error("Failed to create or add property to namespace");var i,parts=namespace.split("."),parent=PLUGIN;for("PLUGIN"===parts[0]&&(parts=parts.slice(1)),i=0;i<parts.length;i+=1)void 0===parent[parts[i]]&&(parent[parts[i]]={}),parent=parent[parts[i]];return parent},PLUGIN.tracking={trackEvent:function(category,action,label,value,isNonInteraction){uiGlobal.trackingQueue.push({category:category,action:action,label:label,value:value,isNonInteraction:isNonInteraction})}};var uiEvents={onLoad:function(){try{uiGlobal.hasLoaded=!0,uiMethods.pageSetup(),uiMethods.iFlowMessages.display(),"Internet Explorer"===uiUtil.browser.sName&&uiUtil.browser.iVersion<10&&(uiMethods.preloader.addAsset('<img src="'+uiGlobal.sIFLOWImagesPath+'MenuOverBg.png" alt="">'),uiMethods.preloader.addAsset('<img src="'+uiGlobal.sIFLOWImagesPath+'ButtonBgHover.png" alt="">'),uiMethods.preloader.addAsset('<img src="'+uiGlobal.sIFLOWImagesPath+'button-main-over-bg.png" alt="">')),uiMethods.preloader.setup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},trigger:function(oElem,sEventName){try{var eEvt;if(!oElem||!sEventName||"string"!=typeof sEventName)return!1;if("click"===sEventName){if("function"==typeof FastClick&&FastClick.notNeeded&&!FastClick.notNeeded(document.body)&&"undefined"!=typeof MouseEvent)return uiUtil.css.hasClass(oElem,"needsclick")||(uiUtil.css.addClass(oElem,"needsclick"),eEvt=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}),oElem.dispatchEvent(eEvt),oElem.click(),setTimeout(function(){uiUtil.css.removeClass(oElem,"needsclick")},300)),!1;oElem.click()}else{if(document.createEvent)return(eEvt=document.createEvent("HTMLEvents")).initEvent(sEventName,!0,!0),!oElem.dispatchEvent(eEvt);oElem[sEventName]=(new Date).toString().replace(/\W/g,"")}}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},uiMethods={pageSetup:function(){try{uiMethods.tooltips.pageSetup(),PLUGIN.calendar.init(),PLUGIN.calendar.setImagesPath(uiGlobal.sIFLOWImagesPath),uiMethods.checkBoxes.pageSetup(),uiMethods.table.pageSetup(),uiMethods.radioButtons.pageSetup(),uiMethods.sampleCheck.pageSetup(),uiMethods.dropdowns.pageSetup(),uiMethods.session.timeout.pageSetup(),uiMethods.fieldInstructions.pageSetup(),uiMethods.tree.fileTable.pageSetup(),uiMethods.buttons.pageSetup(),uiMethods.lists.pageSetup(),uiMethods.fieldValues.pageSetup(),uiMethods.hiddenLabels.pageSetup(),PLUGIN.copydata.setup(),PLUGIN.tracking.pageSetup(),PLUGIN.masktoggle.setup(),PLUGIN.dropdown.setup(),PLUGIN.dropmenu.init(),PLUGIN.repeatfields.setup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},buttonClick:{submitForm:function(target,json){try{var formElem,numParams,paramName,paramValue,hiddenInput;if(void 0===target)return!1;if(void 0===json)return!1;if("string"==typeof json){if(0===json.length)return!1;json=JSON.parse(json)}for(formElem=0<json.Form.name.length?document.forms[json.Form.name]:target.form,0<json.Form.action.length&&(formElem.action=json.Form.action),0<json.Form.target.length&&(formElem.target=json.Form.target),formElem.method="post",void 0!==json.Form.autoComplete?0<json.Form.autoComplete.length&&formElem.setAttribute("autocomplete",json.Form.autoComplete):formElem.setAttribute("autocomplete","off"),numParams=json.Parameters.length;numParams--;)paramName=json.Parameters[numParams].name,paramValue=json.Parameters[numParams].value,void 0!==formElem[paramName]||uiUtil.browser.isIE7&&uiUtil.queryOne('[name="'+paramName+'"]',formElem)?formElem[paramName]?formElem[paramName].value=paramValue:uiUtil.queryOne('[name="'+paramName+'"]',formElem).value=paramValue:((hiddenInput=document.createElement("input")).setAttribute("type","hidden"),hiddenInput.name=paramName,hiddenInput.value=paramValue,formElem.appendChild(hiddenInput));formElem.submit()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},resetCheckboxes:function(oSender){try{var oParentElem,cbArray,i;if(void 0===oSender)return!1;if(oParentElem=oSender.parentNode)for(1===(i=(cbArray=oParentElem.getElementsByTagName("input")).length)&&(i=(cbArray=(oParentElem=uiUtil.getParentElem(oParentElem,".group")).getElementsByTagName("input")).length);i--;)uiMethods.checkBoxes.isCheckBox(cbArray[i])&&oSender!==cbArray[i]&&(cbArray[i].checked=!1)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},checkAllCheckBoxes:function(oSender){try{var i,j=0,obj=null,inputs=null;if(void 0===oSender)return!1;for(i=oSender.length;i--;)if(obj=document.getElementById(oSender[i]))for(j=(inputs=obj.getElementsByTagName("input")).length;j--;)"checkbox"===inputs[j].type&&(inputs[j].checked=!0)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return!1}},openExternalLink:function(){try{var oElement,confirmed,args=this.openExternalLink.arguments,url="";if(args.length<1)return!1;if(void 0===args[0])return!1;if("A"===(oElement=args[0].nodeName))url=args[0].href;else{if("INPUT"!==oElement)return!1;url=args[1]}if(!url||"string"!=typeof url)return!1;if(!/^(http[s]?:\/\/)?([a-zA-Z0-9\-*]+\.)+([a-zA-Z]{2,4})(\/?$|\/.+)*$/.test(url)||256<url.length)return!1;(confirmed=confirm("You are about to leave the New York State Department of Taxation and Finance Web site."))&&!0===args[2]?window.location.href=url:confirmed&&window.open(url)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return!1}},hiddenLabels:{pageSetup:function(){try{uiMethods.hiddenLabels.events.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},events:{pageSetup:function(){try{var aElems,i,oElem;for(i=(aElems=document.querySelectorAll?uiUtil.query("div.noLabel, div.visibleLabel, .labelPn legend"):uiUtil.query("div.noLabel, div.visibleLabel")).length;i--;)oElem=aElems[i],uiUtil.attachEvent(oElem,"click",uiMethods.hiddenLabels.events.onLabelClick),uiUtil.attachEvent(oElem,"mouseover",uiMethods.hiddenLabels.events.onMouseOver),uiUtil.attachEvent(oElem,"mouseout",uiMethods.hiddenLabels.events.onMouseOut);for(i=(aElems=uiUtil.query("span.subLabel")).length;i--;)oElem=aElems[i],uiUtil.attachEvent(oElem,"click",uiMethods.hiddenLabels.events.onSubLabelClick),uiUtil.attachEvent(oElem,"mouseover",uiMethods.hiddenLabels.events.onMouseOver),uiUtil.attachEvent(oElem,"mouseout",uiMethods.hiddenLabels.events.onMouseOut);i=aElems=null}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onMouseOver:function(){document.body.style.cursor="default"},onMouseOut:function(){document.body.style.cursor=""},onLabelClick:function(eEvt){try{var oInput,oSender=uiUtil.getHTMLObjFromEvent(eEvt),oDataDiv=uiUtil.queryOne("div.data, div.dataPn, .col-1-2, .col-1",uiUtil.getParentElem(oSender,".row .line .row-r .linePn"));if(!oDataDiv)return!1;(oInput=uiUtil.queryOne("input, select, textarea",oDataDiv))&&(uiMethods.checkBoxes.isCheckableInput(oInput)&&oInput.click(),oInput.focus())}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onSubLabelClick:function(eEvt){try{var i,oSender=uiUtil.getHTMLObjFromEvent(eEvt),oContainer=uiUtil.getParentElem(oSender,".data .dataPn"),aInputs=uiUtil.query("input, select, textarea",oContainer),aSubLabels=uiUtil.query("span.subLabel",oContainer);if(aSubLabels.length!==aInputs.length)return!1;for(i=aInputs.length;i--;)aSubLabels[i].innerHTML===oSender.innerHTML&&(aInputs[i].focus(),uiMethods.checkBoxes.isCheckableInput(aInputs[i])&&aInputs[i].click())}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}}},table:{pageSetup:function(){try{uiMethods.table.stripes.pageSetup(),uiMethods.table.expandingRows.pageSetup(),uiMethods.table.expandedView.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},paging:{sTotalRowsRetrieved:null,iMaxRowsRetrievedWithoutPrompt:500,sPageCmd:{first:"first",previous:"previous",next:"next",last:"last"},goTo:function(sPageCmdEnum,oFunction){try{if(void 0===sPageCmdEnum)return!1;switch(this.sPageCmd[sPageCmdEnum]){case this.sPageCmd.first:case this.sPageCmd.previous:case this.sPageCmd.next:case this.sPageCmd.last:oFunction(sPageCmdEnum)}}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},pageSize:function(sView,oFunction,sCustomText){try{var sViewToInt,sDisplayText;"string"!=typeof sView||isNaN(parseInt(uiMethods.table.paging.sTotalRowsRetrieved,10))||0<(sView=sView.replace(/^\s+|\s+$/g,"")).length&&("all"===(sViewToInt=sView).toLowerCase()&&(sViewToInt=uiMethods.table.paging.sTotalRowsRetrieved.toString()),sViewToInt=parseInt(sViewToInt.replace(/,/g,""),10),parseInt(sViewToInt,10)>=parseInt(uiMethods.table.paging.iMaxRowsRetrievedWithoutPrompt,10)?(sDisplayText="Are you sure you want to display all "+uiMethods.table.paging.sTotalRowsRetrieved+" rows? The page may take a long time to load.","string"==typeof sCustomText&&sCustomText.match(/\w/)&&(sDisplayText=sCustomText),uiMethods.confirmRemove("",sDisplayText)&&oFunction(sView)):oFunction(sView))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return!1}}},stripes:{pageSetup:function(){try{return!(uiUtil.browser.checkNthChildSupport()&&document.querySelectorAll('table[id*="nostripes"], tr.ignoreRow, tr.section-header').length<1)&&(uiUtil.query("table").forEach(function(table){uiMethods.table.stripes.setStripes(table)}),!0)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},setStripes:function(oTable){try{var aBodyRows,iBodyRows,iIndex,sLastRowClass,oRow;if(oTable.id&&oTable.id.match(/nostripes$/))return;for(iBodyRows=(aBodyRows=oTable.tBodies[0].rows).length,"normalRow",sLastRowClass="alternateRow",iIndex=0;iIndex<iBodyRows;)oRow=aBodyRows[iIndex],uiUtil.css.hasClass(oRow,"ignoreRow")||(uiUtil.css.hasClass(oRow,"section-header")?sLastRowClass="alternateRow":"alternateRow"===sLastRowClass?(uiUtil.css.addClass(oRow,"normalRow"),uiUtil.css.removeClass(oRow,"alternateRow"),sLastRowClass="normalRow"):(uiUtil.css.addClass(oRow,"alternateRow"),uiUtil.css.removeClass(oRow,"normalRow"),sLastRowClass="alternateRow")),iIndex++}catch(ee){uiUtil.errorHandling.jsLog.addEntry(ee,arguments)}}},expandingRows:{sLastRowMouseOverId:"",pageSetup:function(){try{uiMethods.table.expandingRows.events.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},events:{pageSetup:function(){try{for(var aTables=uiUtil.query("table.expandRows"),iTables=aTables.length,sTableId="",aRows=null,iRows=0,oCollapseAll=null,oExpandAll=null;iTables--;){for(sTableId=aTables[iTables].id,iRows=(aRows=uiUtil.query("tr",aTables[iTables].tBodies[0])).length;iRows--;)uiUtil.css.hasClass(aRows[iRows],"noExpand")||(uiUtil.css.hasClass(aRows[iRows],"ignoreRow")?uiUtil.css.hasClass(aRows[iRows],"expanded")||uiUtil.css.hasClass(aRows[iRows],"hidden")||uiUtil.css.addClass(aRows[iRows],"hidden"):(uiUtil.attachEvent(aRows[iRows],"click",uiMethods.table.expandingRows.events.toggle),uiUtil.attachEvent(aRows[iRows],"keydown",uiMethods.table.expandingRows.events.toggle),uiUtil.attachEvent(aRows[iRows],"mouseover",uiMethods.table.expandingRows.events.mouseOver),uiUtil.attachEvent(aRows[iRows],"focus",uiMethods.table.expandingRows.events.mouseOver),uiUtil.attachEvent(aRows[iRows],"mouseout",uiMethods.table.expandingRows.events.mouseOut),uiUtil.attachEvent(aRows[iRows],"blur",uiMethods.table.expandingRows.events.mouseOut),aRows[iRows].style.cursor="pointer"));oCollapseAll=document.getElementById(sTableId+"_colAll"),oExpandAll=document.getElementById(sTableId+"_expAll"),oCollapseAll&&uiUtil.attachEvent(oCollapseAll,"click",uiMethods.table.expandingRows.events.toggleAllRows),oExpandAll&&uiUtil.attachEvent(oExpandAll,"click",uiMethods.table.expandingRows.events.toggleAllRows)}}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},toggle:function(eEvt){try{var oSender;if("number"==typeof eEvt.keyCode&&13!==eEvt.keyCode&&0!==eEvt.keyCode)return;oSender=uiUtil.getHTMLObjFromEvent(eEvt),/^a$|^input$|^button$/i.test(oSender.nodeName)||uiMethods.table.expandingRows.toggle(oSender)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},toggleAllRows:function(eEvt){try{var oSender=uiUtil.getHTMLObjFromEvent(eEvt);uiMethods.table.expandingRows.toggleAllRows(oSender)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{uiUtil.stopEvent(eEvt)}},mouseOver:function(eEvt){try{var oRow=uiUtil.getParentElem(uiUtil.getHTMLObjFromEvent(eEvt),"tr"),oLastRowMouseOver=document.getElementById(uiMethods.table.expandingRows.sLastRowMouseOverId);uiUtil.css.addClass(oRow,"mouseOver"),uiMethods.table.expandingRows.sLastRowMouseOverId=oRow.id,oLastRowMouseOver&&oRow.id!==oLastRowMouseOver.id&&uiUtil.css.removeClass(oLastRowMouseOver,"mouseOver")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},mouseOut:function(eEvt){try{var oRow=uiUtil.getParentElem(uiUtil.getHTMLObjFromEvent(eEvt),"tr");uiUtil.css.removeClass(oRow,"mouseOver")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},toggle:function(oSender){try{var oRow=uiUtil.getParentElem(oSender,"tr"),oRowChild=document.getElementById(oRow.id+"_child");if(uiMethods.checkBoxes.isCheckBox(oSender))return!1;uiUtil.css.hasClass(oRowChild,"hidden")?uiMethods.table.expandingRows.expandRow(oRow):uiMethods.table.expandingRows.collapseRow(oRow)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},toggleAllRows:function(oSender){try{for(var sTableId=oSender.id.substring(0,oSender.id.indexOf("_")),iIndex=1,bNoMoreRows=!1,oRow=null;(oRow=document.getElementById(sTableId+"_row"+iIndex))?(-1<oSender.id.indexOf("_colAll")&&uiMethods.table.expandingRows.collapseRow(oRow),-1<oSender.id.indexOf("_expAll")&&uiMethods.table.expandingRows.expandRow(oRow),iIndex++):bNoMoreRows=!0,!1===bNoMoreRows;);}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},collapseRow:function(oRow){try{var oRowChild=document.getElementById(oRow.id+"_child"),oRowToggleImg=document.getElementById(oRow.id+"_ToggleImg");uiUtil.css.removeClass(oRow,"selected"),uiUtil.css.removeClass(oRowChild,"expanded"),uiUtil.css.addClass(oRowChild,"hidden"),oRowToggleImg.title="Expand row"}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},expandRow:function(oRow){try{var oRowChild=document.getElementById(oRow.id+"_child"),oRowToggleImg=document.getElementById(oRow.id+"_ToggleImg");uiUtil.css.hasClass(oRow,"selected")||uiUtil.css.addClass(oRow,"selected"),uiUtil.css.removeClass(oRowChild,"hidden"),uiUtil.css.addClass(oRowChild,"expanded"),oRowToggleImg.title="Collapse row"}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},expandedView:{fServerToggle:function(){},sModeEnum:{normal:"normal",expanded:"expanded"},pageSetup:function(){try{uiMethods.table.expandedView.events.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},events:{pageSetup:function(){try{for(var aAnchors=uiUtil.query("a.expColView"),iAnchors=aAnchors.length;iAnchors--;)uiUtil.attachEvent(aAnchors[iAnchors],"click",uiMethods.table.expandedView.toggleView)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},toggleView:function(eEvt){try{for(var elem=uiUtil.getHTMLObjFromEvent(eEvt),tableId="",mode=uiMethods.table.expandedView.sModeEnum.normal;"A"!==elem.nodeName&&"BODY"!==elem.nodeName;)elem=elem.parentNode;return"A"===elem.nodeName&&(tableId=elem.id.substring(0,elem.id.lastIndexOf("_")),uiUtil.css.hasClass(uiUtil.getParentElem(elem,".rset"),"expView")&&(mode=uiMethods.table.expandedView.sModeEnum.expanded),uiMethods.table.expandedView.fServerToggle(mode,tableId),uiUtil.stopEvent(eEvt)),mode}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},getCellAtIndex:function(index,rowElem){try{var cell,cells,cellIndex,numCells;if(!rowElem||"element"!==uiUtil.typeOf(rowElem)||!rowElem.cells||"number"!=typeof index)return null;for(numCells=(cells=uiUtil.query("td",rowElem)).length,cellIndex=0;cellIndex<numCells;){if((cell=cells[cellIndex])&&cell.getAttribute("colspan")&&(index-=parseInt(cell.getAttribute("colspan"),10)-1),cellIndex===index)return cell;cellIndex++}return null}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},copyFieldValues:function(){try{var args=this.copyFieldValues.arguments;if(2!==args.length)return!1;if(!uiMethods.checkBoxes.isCheckBox(args[0]))return!1;if(!args[0].checked)return!1;uiMethods.fieldValues.copy(args[1])}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},checkBoxes:{pageSetup:function(){try{uiMethods.checkBoxes.table.pageSetup(),uiMethods.checkBoxes.collection.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},isCheckBox:function(oElem){var bResult=!1;try{bResult=/^checkbox$/i.test(oElem.type)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return bResult}},isCheckableInput:function(oElem){var bResult=!1;try{bResult=/^checkbox$|^radio$/i.test(oElem.type)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return bResult}},singleSelect:function(oSender){try{if(void 0===oSender)return!1;for(var sCommonId=oSender.id.substring(0,oSender.id.lastIndexOf("_")+1),aCheckboxes=uiUtil.getParentElem(oSender,".group").getElementsByTagName("input"),i=aCheckboxes.length;i--;)"checkbox"===aCheckboxes[i].type&&-1<aCheckboxes[i].id.indexOf(sCommonId)&&oSender!==aCheckboxes[i]&&(aCheckboxes[i].checked=!1)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},selectAll:function(oSender){try{var i,j=0,obj=null,inputs=null;if(void 0===oSender)return!1;for(i=oSender.length;i--;)if(obj=document.getElementById(oSender[i]))for(j=(inputs=obj.getElementsByTagName("input")).length;j--;)"checkbox"===inputs[j].type&&(inputs[j].checked=!0)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return!1}},setStateById:function(bDoCheck,aCheckBoxIds,sGrouping){try{var i=aCheckBoxIds.length,oElem=null;if(!aCheckBoxIds)return!1;for(i=aCheckBoxIds.length;i--;)document.getElementById(aCheckBoxIds[i])&&"checkbox"===(oElem=document.getElementById(aCheckBoxIds[i])).type.toLowerCase()&&(sGrouping?oElem.checked!==bDoCheck&&(oElem.checked=bDoCheck,uiMethods.checkBoxes.table.handleCheckBox(oElem,sGrouping)):oElem.checked=bDoCheck)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},collection:{aCollections:{},pageSetup:function(){try{uiMethods.checkBoxes.collection.aCollections={},uiMethods.checkBoxes.collection.events.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},events:{pageSetup:function(){try{for(var aCheckBoxes,j,aContainers=uiUtil.query(".checkBoxCollection"),i=aContainers.length;i--;)for(j=(aCheckBoxes=uiUtil.query('input[type="checkbox"]',aContainers[i])).length;j--;)uiUtil.attachEvent(aCheckBoxes[j],"click",uiMethods.checkBoxes.collection.events.handleClick),/_all$/.test(aCheckBoxes[j].id)&&uiUtil.attachEvent(aCheckBoxes[j],"change",uiMethods.checkBoxes.collection.events.handleClick)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},handleClick:function(eEvt){try{var bDoCheck,i,oSender=uiUtil.getHTMLObjFromEvent(eEvt),sBaseId=oSender.id.substr(0,oSender.id.lastIndexOf("_")+1),bIsChecked=oSender.checked,oCollection=uiMethods.checkBoxes.collection.getCollection(sBaseId);if(!oCollection)return uiUtil.detachEvent(oSender,"click",uiMethods.checkBoxes.collection.events.handleClick),!0;if(/_all$/.test(oSender.id))uiMethods.checkBoxes.collection.setCollectionState(sBaseId,bIsChecked);else if(bIsChecked){for(bDoCheck=!0,i=oCollection.aCheckBoxes.length;i--;)if(!oCollection.aCheckBoxes[i].checked){bDoCheck=!1;break}oCollection.oSelectAll.checked=bDoCheck}else oCollection.oSelectAll.checked=!1}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},setCollectionState:function(sBaseId,bDoCheck){try{var i,oCollection=uiMethods.checkBoxes.collection.getCollection(sBaseId);if(!oCollection)return!1;for(i=oCollection.aCheckBoxes.length;i--;)oCollection.aCheckBoxes[i].checked=bDoCheck;oCollection.oSelectAll.checked=bDoCheck}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},getCollection:function(sBaseId){try{var oCheckBox,iNumRows,i,aCheckBoxes=[];if("string"!=typeof sBaseId||!sBaseId)return null;if(uiMethods.checkBoxes.collection.aCollections[sBaseId])return uiMethods.checkBoxes.collection.aCollections[sBaseId];if(!(oCheckBox=document.getElementById(sBaseId+"all")))return null;for(iNumRows=uiUtil.getParentElem(oCheckBox,"table").tBodies[0].rows.length,i=1;i<=iNumRows;)(oCheckBox=document.getElementById(sBaseId+i))&&uiMethods.checkBoxes.isCheckBox(oCheckBox)&&aCheckBoxes.push(oCheckBox),i++;return aCheckBoxes.length?(uiMethods.checkBoxes.collection.aCollections[sBaseId]={aCheckBoxes:aCheckBoxes,oSelectAll:document.getElementById(sBaseId+"all")},uiMethods.checkBoxes.collection.aCollections[sBaseId]):null}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},table:{oSender:null,sGrouping:"",oTable:null,iNumRows:0,iNumCols:0,iColNumber:0,iRowNumber:0,sCommonId:"",sIteratorId:"",iNumIterations:0,pageSetup:function(){try{uiMethods.checkBoxes.table.events.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},events:{pageSetup:function(){try{var aContainers,aCheckBoxes,i,j;for(i=(aContainers=uiUtil.query("div.checkBoxesGroupedByColumn")).length;i--;)for(j=(aCheckBoxes=uiUtil.query('input[type="checkbox"]',aContainers[i])).length;j--;)uiUtil.attachEvent(aCheckBoxes[j],"click",uiMethods.checkBoxes.table.events.handleCheckBoxByColumn);for(i=(aContainers=uiUtil.query("div.checkBoxesGroupedByRow")).length;i--;)for(j=(aCheckBoxes=uiUtil.query('input[type="checkbox"]',aContainers[i])).length;j--;)uiUtil.attachEvent(aCheckBoxes[j],"click",uiMethods.checkBoxes.table.events.handleCheckBoxByRow)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},handleCheckBoxByRow:function(eEvt){try{var oSender=uiUtil.getHTMLObjFromEvent(eEvt);uiMethods.checkBoxes.table.handleCheckBox(oSender,"row")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},handleCheckBoxByColumn:function(eEvt){try{var oSender=uiUtil.getHTMLObjFromEvent(eEvt);uiMethods.checkBoxes.table.handleCheckBox(oSender,"col")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},init:function(oSender,sGrouping){try{for(this.oSender=oSender,this.oTable=oSender.parentNode;!/table/i.test(this.oTable.nodeName);)this.oTable=this.oTable.parentNode;switch(this.iNumRows=this.oTable.tBodies[0].rows.length,this.iNumCols=this.oTable.tHead.rows[0].cells.length,this.iColNumber=oSender.parentNode.cellIndex+1,this.iRowNumber=oSender.parentNode.parentNode.rowIndex,this.sCommonId=oSender.id.substr(0,oSender.id.indexOf("_r")),this.sGrouping=sGrouping,this.sGrouping){case"row":this.sIteratorId=this.sCommonId+"_r###_c"+this.iColNumber,this.iNumIterations=this.iNumRows+1;break;case"col":this.sIteratorId=this.sCommonId+"_r"+this.iRowNumber+"_c###",this.iNumIterations=this.iNumCols+1;break;default:return!1}}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},handleCheckBox:function(oSender,sGrouping){try{if(void 0===oSender||"string"!=typeof sGrouping)return!1;uiMethods.checkBoxes.table.init(oSender,sGrouping);var i,j,sCheckId,bIsChecked=this.oSender.checked,bIsSelectAll=this.oSender.id.indexOf("_all")===this.oSender.id.length-4,aCheckBoxIds=[];if(bIsChecked&&!bIsSelectAll){if("col"===this.sGrouping){for(sCheckId=this.sCommonId+"_r###_c"+this.iColNumber,i=this.iNumRows;i--;)(j=sCheckId.replace("###",i+1))!==this.oSender.id&&aCheckBoxIds.push(j);aCheckBoxIds.push(this.sCommonId+"_r"+this.iRowNumber+"_c1_all")}else{for(sCheckId=this.sCommonId+"_r"+this.iRowNumber+"_c###",i=this.iNumCols;i--;)(j=sCheckId.replace("###",i+1))!==this.oSender.id&&aCheckBoxIds.push(j);aCheckBoxIds.push(this.sCommonId+"_r"+this.iRowNumber+"_c0_all")}uiMethods.checkBoxes.setStateById(!1,aCheckBoxIds),uiMethods.checkBoxes.table.resetSelectAll()}bIsChecked||bIsSelectAll?bIsChecked&&bIsSelectAll?(uiMethods.checkBoxes.table.setByIterator(bIsChecked),this.oSender.checked=!0):!bIsChecked&&bIsSelectAll&&uiMethods.checkBoxes.table.setByIterator(bIsChecked):uiMethods.checkBoxes.table.resetSelectAll()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},resetSelectAll:function(){try{var j,k,id,sThisId,sCheckId,sSelectAllId,bWholeRowIsChecked,bWholeColIsChecked,i=this.iNumRows;if("col"===this.sGrouping)for(;i--;){for(sCheckId=this.sCommonId+"_r"+(i+1)+"_c###",sSelectAllId=this.sCommonId+"_r"+(i+1)+"_c1_all",bWholeRowIsChecked=!0,j=this.iNumIterations;j--;)if(document.getElementById(sCheckId.replace("###",j))&&!document.getElementById(sCheckId.replace("###",j)).checked){bWholeRowIsChecked=!1;break}if(document.getElementById(sSelectAllId)&&(document.getElementById(sSelectAllId).checked=bWholeRowIsChecked),!0===bWholeRowIsChecked)for(id=this.sCommonId+"_r|||_c###",j=this.iNumRows;j--;)if(j!==i)for(k=this.iNumIterations-1;k--;)sThisId=id.replace("###",k+1).replace("|||",j+1),document.getElementById(sThisId)&&sThisId!==this.oSender.id&&(document.getElementById(sThisId).checked=!1)}else for(i=this.iNumCols+1;i--;){for(sCheckId=this.sCommonId+"_r###_c"+i,sSelectAllId=this.sCommonId+"_r0_c"+i+"_all",bWholeColIsChecked=!0,j=this.iNumIterations-1;j--;)if(document.getElementById(sCheckId.replace("###",j+1))&&!document.getElementById(sCheckId.replace("###",j+1)).checked){bWholeColIsChecked=!1;break}document.getElementById(sSelectAllId)&&(document.getElementById(sSelectAllId).checked=bWholeColIsChecked)}}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},setAll:function(bDoCheck){try{var aChecks=this.oTable.getElementsByTagName("input"),i=aChecks.length;for(void 0===bDoCheck&&(bDoCheck=!1);i--;)uiMethods.checkBoxes.isCheckBox(aChecks[i])&&(aChecks[i].checked=bDoCheck)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},setByIterator:function(bDoCheck){try{for(var aCheckBoxIds=[],i=this.iNumIterations;i--;)aCheckBoxIds.push(this.sIteratorId.replace("###",i.toString()));uiMethods.checkBoxes.setStateById(bDoCheck,aCheckBoxIds,this.sGrouping)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}}},radioButtons:{pageSetup:function(){try{uiMethods.radioButtons.selectionDependent.pageSetup(),uiMethods.radioButtons.valueDependent.events.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},isRadioButton:function(oElem){try{return/^radio$/i.test(oElem.type)}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},selectionDependent:{pageSetup:function(){uiMethods.radioButtons.selectionDependent.events.pageSetup(),uiUtil.attachEvent(document.body,"seldepradiosadded",uiMethods.radioButtons.selectionDependent.events.pageSetup,!0)},events:{pageSetup:function(){try{for(var oInput,aRB=uiUtil.query(".rbDynamic"),iRB=aRB.length,oDepFieldsWrapper=null,oFieldWrapper=null;iRB--;)oInput=aRB[iRB],uiUtil.attachEvent(oInput,"click",uiMethods.radioButtons.selectionDependent.events.onChange),uiUtil.attachEvent(oInput,"change",uiMethods.radioButtons.selectionDependent.events.onChange),oDepFieldsWrapper=uiUtil.getParentElem(oInput,".selDepFldsWrapper"),oFieldWrapper=uiUtil.queryOne(".fieldWrapper",oDepFieldsWrapper),!0===oInput.checked&&null!==document.getElementById(oInput.id+"_depFields")?(uiUtil.css.addClass(oDepFieldsWrapper,"selectedRB"),oFieldWrapper&&(oFieldWrapper.setAttribute("aria-hidden","false"),oFieldWrapper.setAttribute("aria-expanded","true"))):oFieldWrapper&&"radio"===oInput.type&&uiUtil.css.hasClass(oInput,"rbDynamicResizable")&&uiUtil.css.addClass(oFieldWrapper,"hidden")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onChange:function(eEvt){try{var oElem=uiUtil.getHTMLObjFromEvent(eEvt);uiMethods.radioButtons.selectionDependent.toggleDisplay(oElem)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},toggleDisplay:function(oElem){try{for(var oInput,isResizable,aRB=document.getElementsByName(oElem.name),iRB=aRB.length,oDepFieldsWrapper=null,oFieldWrapper=null;iRB--;)if(oInput=aRB[iRB],isResizable=uiUtil.css.hasClass(oInput,"rbDynamicResizable"),oDepFieldsWrapper=uiUtil.getParentElem(oInput,".selDepFldsWrapper"),oFieldWrapper=uiUtil.queryOne(".fieldWrapper",oDepFieldsWrapper),oDepFieldsWrapper)if(oInput.checked){if(oElem.id===oInput.id)if(uiUtil.css.hasClass(oDepFieldsWrapper,"selectedRB")){if(!isResizable)return!1}else null!==document.getElementById(oInput.id+"_depFields")&&(uiUtil.css.addClass(oDepFieldsWrapper,"selectedRB"),oFieldWrapper&&(isResizable&&uiUtil.css.removeClass(oFieldWrapper,"hidden"),oFieldWrapper.setAttribute("aria-hidden","false"),oFieldWrapper.setAttribute("aria-expanded","true")))}else uiUtil.css.removeClass(oDepFieldsWrapper,"selectedRB"),isResizable&&uiUtil.css.addClass(oFieldWrapper,"hidden"),oFieldWrapper&&(oFieldWrapper.setAttribute("aria-hidden","true"),oFieldWrapper.setAttribute("aria-expanded","false"));return!1}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},valueDependent:{events:{pageSetup:function(){try{for(var aRB,iRB,oRadio,aWrappers=uiUtil.query(".valueDepRadiosWrapper"),iWrappers=aWrappers.length;iWrappers--;)for(iRB=(aRB=uiUtil.query('input[type="radio"]',aWrappers[iWrappers])).length;iRB--;)oRadio=aRB[iRB],uiUtil.attachEvent(aRB[iRB],"click",uiMethods.radioButtons.valueDependent.events.onClick),oRadio.checked&&uiMethods.radioButtons.valueDependent.updateDisplay(oRadio)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onClick:function(eEvt){try{var oSender=uiUtil.getHTMLObjFromEvent(eEvt);uiMethods.radioButtons.valueDependent.updateDisplay(oSender)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},updateDisplay:function(oChangedRadio){try{var aRB=document.getElementsByName(oChangedRadio.name),iRB=aRB.length,oRadio=null,oDepFieldsWrapper=null,oSelectedRadio=null;for(oChangedRadio.checked&&(oSelectedRadio=oChangedRadio);iRB--;)oRadio=aRB[iRB],null!==(oDepFieldsWrapper=document.getElementById(oRadio.id+"_depFields"))&&(aRB[iRB]===oSelectedRadio?uiMethods.radioButtons.valueDependent.showDependentSection(oDepFieldsWrapper):uiMethods.radioButtons.valueDependent.hideDependentSection(oDepFieldsWrapper))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},showDependentSection:function(oDepFieldsWrapper){try{uiUtil.css.removeClass(oDepFieldsWrapper,"hidden"),oDepFieldsWrapper.setAttribute("aria-hidden","false"),oDepFieldsWrapper.setAttribute("aria-expanded","true")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},hideDependentSection:function(oDepFieldsWrapper){try{uiUtil.css.addClass(oDepFieldsWrapper,"hidden"),oDepFieldsWrapper.setAttribute("aria-hidden","true"),oDepFieldsWrapper.setAttribute("aria-expanded","false")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}}},buttons:{pageSetup:function(){try{uiMethods.buttons.mutex.pageSetup(),uiMethods.buttons.enabledByValue.pageSetup(),uiMethods.buttons.clear.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},interceptClick:{aButtons:null,setupButton:function(oButton){try{var sId;return oButton?(sId=uiUtil.establishElementId(oButton),null===uiMethods.buttons.interceptClick.aButtons&&(uiMethods.buttons.interceptClick.aButtons=new List),uiMethods.buttons.interceptClick.aButtons.isSet(sId)||(uiMethods.buttons.interceptClick.aButtons.set(sId,{aCallbacks:[]}),uiMethods.buttons.interceptClick.wrapInlineOnClick(oButton)),uiMethods.buttons.interceptClick.aButtons.get(sId)):null}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},verifyClick:function(oSender){try{for(var oButtonItem=uiMethods.buttons.interceptClick.aButtons.get(oSender.id),bCallbacksPassed=!0,i=oButtonItem.aCallbacks.length;i--;)oButtonItem.aCallbacks[i](oSender)||(bCallbacksPassed=!1);return bCallbacksPassed}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},registerCallback:function(oButton,fCallback){try{uiMethods.buttons.interceptClick.setupButton(oButton).aCallbacks.push(fCallback),uiUtil.css.addClass(oButton,"has-button-registered-callback")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},wrapInlineOnClick:function(oButton){var sOnClick="";try{oButton.getAttribute("onclick")?"function"==typeof(sOnClick=oButton.getAttribute("onclick"))?oButton.onclick=function(){if(!uiMethods.buttons.interceptClick.verifyClick(this))return!1;sOnClick.apply(this)}:(sOnClick=sOnClick.replace(/^javascript\:/,"").replace(/return\sfalse;?$/i,""),/;$/.test(sOnClick)||(sOnClick+=";"),sOnClick="javascript:if(uiMethods.buttons.interceptClick.verifyClick(this)){"+sOnClick+"}else{return false;}",oButton.setAttribute("onclick",sOnClick)):"Internet Explorer"===uiUtil.browser.sName&&uiUtil.browser.iVersion<8?oButton.onclick=function(){if(!uiMethods.buttons.interceptClick.verifyClick(this))return!1}:(sOnClick="javascript:if(!uiMethods.buttons.interceptClick.verifyClick(this)){return false;}",oButton.setAttribute("onclick",sOnClick))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return sOnClick}}},mutex:{aButtons:[],pageSetup:function(){try{uiMethods.buttons.mutex.aButtons=uiMethods.buttons.mutex.aButtons.concat(uiUtil.query(".mutexElement, .hasOverlay")),uiMethods.buttons.mutex.aButtons.length&&(uiMethods.buttons.mutex.events.pageSetup(),PLUGIN&&!PLUGIN.spinwheel&&Modernizr.load({load:uiGlobal.assets.urls.spinwheel}))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},events:{pageSetup:function(){try{for(var oElem,i=uiMethods.buttons.mutex.aButtons.length;i--;)oButton=uiMethods.buttons.mutex.aButtons[i],uiUtil.css.hasClass(oButton,"has-button-registered-callback")||(oElem=uiMethods.buttons.getButtonParentElem(oButton),uiMethods.buttons.interceptClick.registerCallback(oElem,uiMethods.buttons.mutex.verifyButton))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},verifyButton:function(oButton){try{return!uiUtil.css.hasClass(oButton,"disabled")&&(uiMethods.buttons.mutex.disableAll(),PLUGIN&&PLUGIN.spinwheel&&!uiUtil.css.hasClass(oButton,"noSpinner")&&PLUGIN.spinwheel.start(oButton),!0)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},disableAll:function(){try{for(var i=uiMethods.buttons.mutex.aButtons.length;i--;)uiUtil.css.addClass(uiMethods.buttons.mutex.aButtons[i],"disabled");return!0}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},enableAll:function(){try{for(var i=uiMethods.buttons.mutex.aButtons.length;i--;)uiUtil.css.removeClass(uiMethods.buttons.mutex.aButtons[i],"disabled");return!PLUGIN||!PLUGIN.spinwheel||PLUGIN.spinwheel.stop()}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}}},enabledByValue:{aButtons:null,pageSetup:function(){try{var oButtons=new List;uiMethods.buttons.enabledByValue.aButtons&&uiMethods.buttons.enabledByValue.aButtons.buttons&&(uiMethods.buttons.enabledByValue.aButtons.buttons.forEach(function(oButton){var aInputs={};oButton.inputs.forEach(function(oInput){oInput.oElem=document.getElementById(oInput.id),aInputs[oInput.id]=oInput}),oButton.inputs=new List(aInputs),oButton.invalidInputs=[],oButton.oElem=document.getElementById(oButton.id),oButtons.set(oButton.id,new List(oButton))}),uiMethods.buttons.enabledByValue.aButtons=oButtons,uiMethods.buttons.enabledByValue.events.pageSetup())}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},events:{pageSetup:function(){try{uiMethods.buttons.enabledByValue.aButtons.forEach(function(oButtonObj){uiMethods.buttons.interceptClick.registerCallback(oButtonObj.oElem,uiMethods.buttons.enabledByValue.verifyButton),oButtonObj.inputs.forEach(function(oInput){/^input$/i.test(oInput.oElem.nodeName)&&/^file$/i.test(oInput.oElem.type)?(uiUtil.attachEvent(oInput.oElem,"change",uiMethods.buttons.enabledByValue.events.onInputChange),uiUtil.attachEvent(oInput.oElem,"blur",uiMethods.buttons.enabledByValue.events.onInputChange)):(uiUtil.attachEvent(oInput.oElem,"click",uiMethods.buttons.enabledByValue.events.onInputChange),uiUtil.attachEvent(oInput.oElem,"keyup",uiMethods.buttons.enabledByValue.events.onInputChange))})}),uiMethods.buttons.enabledByValue.updateButtons()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onInputChange:function(){try{uiMethods.buttons.enabledByValue.updateButtons()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},verifyButton:function(oButton){try{if(uiUtil.css.hasClass(oButton,"disabled")){var oButtonObj=uiMethods.buttons.enabledByValue.aButtons.get(oButton.id),aMessages=[];if(oButtonObj.invalidInputs.length)return oButtonObj.invalidInputs.forEach(function(sInputId){var oInput=oButtonObj.inputs.get(sInputId);oInput.messages&&oInput.messages.length&&oInput.messages.forEach(function(oMsg){aMessages.push({type:oMsg.type||"error",description:oMsg.description||""})})}),aMessages.length&&(uiMethods.iFlowMessages.oJSON=JSON.stringify({iFlowMessages:{pageMessages:aMessages}}),uiMethods.iFlowMessages.display()),!1}return!0}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},updateButtons:function(){try{uiMethods.buttons.enabledByValue.aButtons.forEach(function(oButton){var sValue,iIndex,bDisable=!1;return oButton.inputs.forEach(function(oInput){var iDisable=!1;sValue=uiUtil.val(oInput.oElem).toString(),oInput.disallowedValues&&oInput.disallowedValues.forEach(function(oValue){iIndex=oButton.invalidInputs.indexOf(oInput.id),oValue.value===sValue?(iDisable=bDisable=!0,iIndex<0&&oButton.invalidInputs.push(oInput.id)):-1<iIndex&&oButton.invalidInputs.splice(iIndex,1)}),!iDisable&&oInput.allowedValues&&oInput.allowedValues.forEach(function(oValue){iIndex=oButton.invalidInputs.indexOf(oInput.id),oValue.value!==sValue?(iDisable=bDisable=!0,iIndex<0&&oButton.invalidInputs.push(oInput.id)):-1<iIndex&&oButton.invalidInputs.splice(iIndex,1)}),!iDisable&&oInput.matchesPattern&&oInput.matchesPattern.forEach(function(oValue){var patternTestFailed=!1;if(iIndex=oButton.invalidInputs.indexOf(oInput.id),oValue.type&&""!==oValue.type){switch(oValue.type){case"hasFileExtension":var filePath=sValue,periodPosition=filePath.indexOf(".");-1===periodPosition?patternTestFailed=!0:periodPosition===filePath.length-1&&(patternTestFailed=!0)}patternTestFailed?(iDisable=bDisable=!0,iIndex<0&&oButton.invalidInputs.push(oInput.id)):-1<iIndex&&oButton.invalidInputs.splice(iIndex,1)}})}),bDisable?(uiUtil.css.addClass(oButton.oElem,"disabled"),!1):(uiUtil.css.removeClass(oButton.oElem,"disabled"),!0)})}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},clear:{pageSetup:function(){try{uiMethods.buttons.clear.events.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},events:{pageSetup:function(){try{uiUtil.query(".clearButton").forEach(function(oButton){uiUtil.attachEvent(oButton,"click",uiMethods.buttons.clear.events.onClick)})}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onClick:function(){try{uiMethods.fieldValues.clear(uiUtil.query(".clearField"))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}}},isButton:function(oElem){try{return!("object"!=typeof oElem||!oElem)&&(/^button$/i.test(oElem.nodeName)||/^input$/i.test(oElem.nodeName)&&/^submit$|^button$/i.test(oElem.type))}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},getButtonParentElem:function(oElem){try{return oElem?uiMethods.buttons.isButton(oElem)?oElem:uiUtil.getParentElem(oElem,"a"):null}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),null}}},fieldValues:{copySelector:".copyValue",copyAllSuffixPattern:/_all$/i,pageSetup:function(){try{uiMethods.fieldValues.events.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},events:{pageSetup:function(){try{uiUtil.query(uiMethods.fieldValues.copySelector).forEach(function(button){uiUtil.attachEvent(button,"click",uiMethods.fieldValues.events.onButtonClick)})}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onButtonClick:function(evt){try{var button=uiUtil.getParentElem(uiUtil.getHTMLObjFromEvent(evt),uiMethods.fieldValues.copySelector),id=uiUtil.establishElementId(button);return uiMethods.fieldValues.copyAllSuffixPattern.test(id)?uiMethods.fieldValues.copyMultiple(id.replace(uiMethods.fieldValues.copyAllSuffixPattern,"")):uiMethods.fieldValues.copySingle(id),uiUtil.stopEvent(evt),!1}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},clear:function(items,isContainer){try{var itemsType=uiUtil.typeOf(items),elems=[];if("element"===itemsType)!0===isContainer?elems=uiUtil.query("input, select, textarea",items):elems.push(items);else if("array"===itemsType)items.forEach(function(i){if(!i)return!1;"string"==typeof i?elems=elems.concat(uiUtil.query(i)):"object"==typeof i&&elems.push(i)});else if("nodelist"===itemsType)elems=uiUtil.toArray(items);else{if("string"!==itemsType)return-1;elems=uiUtil.query(items)}return elems.forEach(function(elem){/^label$/i.test(elem.nodeName)&&(elem=document.getElementById(elem.getAttribute("for")||elem.attributes.for.nodeValue)),uiUtil.val(elem,"")}),elems.length}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},copy:function(fieldSettings){try{if("object"!==uiUtil.typeOf(fieldSettings)||"array"!==uiUtil.typeOf(fieldSettings.fieldsToCopy))return!1;fieldSettings.fieldsToCopy.forEach(function(elem){var sourceValue,sourceElem=document.getElementById(elem.source),destElem=document.getElementById(elem.dest);if(!sourceElem||!destElem)return!1;null===(sourceValue=uiUtil.val(sourceElem))&&(sourceValue=sourceElem.innerHTML),null===uiUtil.val(destElem,sourceValue)?destElem.innerHTML=sourceValue:uiEvents.trigger(destElem,"change")})}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},copySingle:function(sourceId){try{if(!sourceId||"string"!=typeof sourceId)return!1;var insertIndex=sourceId.lastIndexOf("_"),fieldList={fieldsToCopy:[{source:sourceId.substr(0,insertIndex+1)+"source"+sourceId.substr(insertIndex),dest:sourceId.substr(0,insertIndex+1)+"dest"+sourceId.substr(insertIndex)}]};uiMethods.fieldValues.copy(fieldList)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},copyMultiple:function(idPrefix){try{var i,fieldList={fieldsToCopy:[]},elem=document.getElementById(idPrefix+"_source_0"),searchLimit=0,parentTbody=uiUtil.getParentElem(elem,"tbody");for(parentTbody&&(searchLimit=parentTbody.rows.length),i=0;elem||i<searchLimit;)fieldList.fieldsToCopy.push({source:idPrefix+"_source_"+i,dest:idPrefix+"_dest_"+i}),i++,elem=document.getElementById(idPrefix+"_source_"+i);uiMethods.fieldValues.copy(fieldList)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},lists:{pageSetup:function(){try{uiMethods.lists.listA.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},listA:{listActionPrefix:"listA_action_",pageSetup:function(){try{for(var list=uiUtil.query(".listA"),i=list.length,lis=null,j=0;0<=(i-=1);)for(j=(lis=uiUtil.query("li",list[i])).length;0<=(j-=1);)uiUtil.attachEvent(lis[j],"mouseover",uiMethods.lists.listA.onMouseOverOut),uiUtil.attachEvent(lis[j],"mouseout",uiMethods.lists.listA.onMouseOverOut),uiUtil.attachEvent(lis[j],"click",uiMethods.lists.listA.onClick)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onMouseOverOut:function(ev){try{var elem=uiUtil.getHTMLObjFromEvent(ev),_toggleBorderForPrevSibling=function(elem){try{for(var sibling=elem.previousSibling;sibling;){if(sibling.nodeName&&"LI"===sibling.nodeName){uiUtil.css.hasClass(sibling,"bBottom")?uiUtil.css.removeClass(sibling,"bBottom"):uiUtil.css.addClass(sibling,"bBottom");break}sibling=sibling.previousSibling}}catch(e){}};if(elem){for(;"BODY"!==elem.nodeName&&"LI"!==(elem=elem.parentNode).nodeName;);uiUtil.css.hasClass(elem,"over")?uiUtil.css.removeClass(elem,"over"):uiUtil.css.addClass(elem,"over"),_toggleBorderForPrevSibling(elem)}}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onClick:function(ev){try{for(var links,i,elem=uiUtil.getHTMLObjFromEvent(ev);"BODY"!==elem.nodeName;){if("LI"===elem.nodeName){for(i=(links=uiUtil.query("a",elem)).length;0<=(i-=1);)-1<links[i].id.indexOf(uiMethods.lists.listA.listActionPrefix)&&links[i].click();break}elem=elem.parentNode}}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}}},dropdowns:{pageSetup:function(){try{uiMethods.dropdowns.valueDependent.events.pageSetup(),uiMethods.dropdowns.dynamicLabel.events.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},getSelectedOption:function(oSelect){try{return oSelect.options&&oSelect.options.length&&"number"==typeof oSelect.selectedIndex?oSelect.options[oSelect.selectedIndex]:null}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},dynamicLabel:{events:{pageSetup:function(){for(var oSelect,aSelects=uiUtil.query(".dropdown-label"),iSelects=aSelects.length;iSelects--;)oSelect=aSelects[iSelects],uiUtil.attachEvent(oSelect,"click",uiMethods.dropdowns.dynamicLabel.events.onChange),uiUtil.attachEvent(oSelect,"change",uiMethods.dropdowns.dynamicLabel.events.onChange),uiUtil.attachEvent(oSelect,"keydown",uiMethods.dropdowns.dynamicLabel.events.onChange)},onChange:function(eEvt){try{var oSender=uiUtil.getHTMLObjFromEvent(eEvt);uiMethods.dropdowns.dynamicLabel.updateLabel(uiUtil.getParentElem(oSender,"select"))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},updateLabel:function(oSelect){try{var oSelected=uiMethods.dropdowns.getSelectedOption(oSelect),sId=oSelect.id+"_label",sTargetLabel=document.getElementById(sId);oSelected&&(sTargetLabel.innerHTML=oSelected.innerHTML)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},valueDependent:{events:{pageSetup:function(){try{for(var oSelect,aSelects=uiUtil.query(".valueDepDropdown"),iSelects=aSelects.length;iSelects--;)oSelect=aSelects[iSelects],uiUtil.attachEvent(oSelect,"click",uiMethods.dropdowns.valueDependent.events.onChange),uiUtil.attachEvent(oSelect,"change",uiMethods.dropdowns.valueDependent.events.onChange),uiMethods.dropdowns.valueDependent.updateDisplay(oSelect)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onChange:function(eEvt){try{var oSender=uiUtil.getHTMLObjFromEvent(eEvt);uiMethods.dropdowns.valueDependent.updateDisplay(uiUtil.getParentElem(oSender,"select"))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},updateDisplay:function(oSelect){try{var sOtherTargetId,aOptions=oSelect.options,iOptions=aOptions.length,oSelected=uiMethods.dropdowns.getSelectedOption(oSelect),sSelectedTargetId="";for(oSelected&&oSelected.getAttribute("data-value-dep-id")&&(sSelectedTargetId=oSelected.getAttribute("data-value-dep-id"),uiMethods.dropdowns.valueDependent.showDependentSection(document.getElementById(sSelectedTargetId)));iOptions--;)(sOtherTargetId=aOptions[iOptions].getAttribute("data-value-dep-id")||"").length&&sOtherTargetId!==sSelectedTargetId&&uiMethods.dropdowns.valueDependent.hideDependentSection(document.getElementById(sOtherTargetId))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},showDependentSection:function(oDepFieldsWrapper){try{uiUtil.css.removeClass(oDepFieldsWrapper,"hidden"),oDepFieldsWrapper.setAttribute("aria-hidden","false"),oDepFieldsWrapper.setAttribute("aria-expanded","true")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},hideDependentSection:function(oDepFieldsWrapper){try{uiUtil.css.addClass(oDepFieldsWrapper,"hidden"),oDepFieldsWrapper.setAttribute("aria-hidden","true"),oDepFieldsWrapper.setAttribute("aria-expanded","false")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}}},tree:{fileTable:{pageSetup:function(){try{uiMethods.tree.fileTable.events.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},events:{pageSetup:function(){try{uiUtil.query(".folderRow").forEach(function(oElem){uiUtil.attachEvent(oElem,"click",uiMethods.tree.fileTable.events.onRowClick)})}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onRowClick:function(eEvt){try{var oSender=uiUtil.getHTMLObjFromEvent(eEvt);uiMethods.tree.fileTable.toggleFileRows(uiUtil.getParentElem(oSender,"tr")),uiUtil.stopEvent(eEvt)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},toggleFileRows:function(oRow){try{var bExpand=uiUtil.css.hasClass(oRow,"folderCollapsed"),aRows=uiUtil.getParentElem(oRow,"tbody").rows,i=oRow.rowIndex;uiUtil.css.toggleClass(oRow,"folderExpanded folderCollapsed"),bExpand?uiMethods.tree.fileTable.expandFileRows(aRows,i):uiMethods.tree.fileTable.collapseFileRows(aRows,i)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},collapseFileRows:function(aRows,iIndex){try{for(var iRows=aRows.length;iIndex<iRows;){if(uiUtil.css.hasClass(aRows[iIndex],"folderRow"))return!0;uiUtil.css.addClass(aRows[iIndex],"hidden"),iIndex++}}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},expandFileRows:function(aRows,iIndex){try{for(var iRows=aRows.length;iIndex<iRows;){if(uiUtil.css.hasClass(aRows[iIndex],"folderRow"))return!0;uiUtil.css.removeClass(aRows[iIndex],"hidden"),iIndex++}}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}}},confirmRemove:function(sItemName,sCustomText,isSingleItem){try{return"string"==typeof sItemName&&sItemName.match(/\w/)?isSingleItem?confirm("Are you sure you want to remove this "+sItemName+"?"):confirm("Are you sure you want to remove the selected "+sItemName+"(s)?"):!("string"!=typeof sCustomText||!sCustomText.match(/\w/))&&confirm(sCustomText)}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},removeItem:function(oItemKey,sItemName,sCustomText,oFunction,oDeclineCallback){try{if(uiMethods.confirmRemove(sItemName,sCustomText,!0))oFunction(oItemKey);else{if("function"!=typeof oDeclineCallback)return uiMethods.buttons.mutex.enableAll(),!1;oDeclineCallback(oItemKey)}}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},selectedItems:{sNoItemsSelectedMessage:"No items were selected",remove:function(oSettings){try{var settings,oCheckBox,iNumRows,i,aCheckedItems=[];if(!oSettings||"object"!=typeof oSettings)return!1;if(!oSettings.sBaseId||"string"!=typeof oSettings.sBaseId||"function"!=typeof oSettings.oFunction)return!1;for(settings={sBaseId:oSettings.sBaseId,sItemName:oSettings.sItemName||"",oFunction:oSettings.oFunction,sCustomText:oSettings.sCustomText||"",sNoItemsSelected:oSettings.sNoItemsSelected||uiMethods.selectedItems.sNoItemsSelectedMessage},oCheckBox=document.getElementById(settings.sBaseId+"_all"),iNumRows=uiUtil.getParentElem(oCheckBox,"table").tBodies[0].rows.length,i=1;i<=iNumRows;)(oCheckBox=document.getElementById(settings.sBaseId+"_"+i))&&uiMethods.checkBoxes.isCheckBox(oCheckBox)&&oCheckBox.checked&&aCheckedItems.push(settings.sBaseId+"_"+i),i++;0<aCheckedItems.length?(uiMethods.iFlowMessages.remove.pageMessages.withText(settings.sNoItemsSelected),uiMethods.confirmRemove(settings.sItemName,settings.sCustomText)?settings.oFunction(aCheckedItems):uiMethods.buttons.mutex.enableAll()):(uiMethods.iFlowMessages.oJSON='{ "iFlowMessages": { "pageMessages": [ { "type": "error", "description": "'+settings.sNoItemsSelected+'" } ], "formMessages": [] } }',uiMethods.iFlowMessages.display(JSON.stringify({oFocus:"errorMessages"})),uiMethods.buttons.mutex.enableAll())}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}}},setSessionTimeout:function(sCustomText){try{var sMessage=uiGlobal.oSessionTimeOut.sConfirmText;"string"==typeof sCustomText&&0<sCustomText.length&&(sMessage=sCustomText),setTimeout(function(){confirm(sMessage)&&confirmSessionTimeout()},uiGlobal.oSessionTimeOut.iDuration)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},session:{timeout:{oTimer:null,bEnabled:!1,oOptions:{},oSettings:{},pageSetup:function(){try{var oDefaults;if(!0!==uiMethods.session.timeout.bEnabled)return!1;oDefaults={sMessage:"Your online session is about to time out. Select OK to continue the session or select Cancel to allow your session to time out.",iDuration:9e5,fCallback:null},uiMethods.session.timeout.oSettings=uiUtil.extend(!0,{},oDefaults,uiMethods.session.timeout.oOptions),uiMethods.session.timeout.start()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},start:function(){try{uiMethods.session.timeout.oTimer=setTimeout(function(){try{confirm(uiMethods.session.timeout.oSettings.sMessage)&&(uiMethods.session.timeout.server.sendRequest(),"function"==typeof uiMethods.session.timeout.oSettings.fCallback&&uiMethods.session.timeout.oSettings.fCallback()),uiMethods.session.timeout.stop()}catch(e){}},uiMethods.session.timeout.oSettings.iDuration)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},stop:function(){try{clearTimeout(uiMethods.session.timeout.oTimer),uiMethods.session.timeout.oTimer=null}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},server:{sendRequest:function(){try{uiMethods.ajax.execute({sUrl:uiUtil.url.getAppBaseUrl()+"sessionRefresh",onSuccess:uiMethods.session.timeout.server.handleResponse,onError:uiMethods.session.redirectToAuth})}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},handleResponse:function(xmlHTTP){try{if(!xmlHTTP)return!1;if(!xmlHTTP.responseText)return!1;/true/i.test(xmlHTTP.responseText)&&200===xmlHTTP.status?(uiMethods.session.timeout.stop(),uiMethods.session.timeout.start()):uiMethods.session.redirectToAuth()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}}},redirectToAuth:function(){try{window.location.href=uiUtil.url.getAppBaseUrl()+uiUtil.url.sGenericAuthErrorUrl}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},tooltips:{defaultOffsets:{position:{x:-1,y:-6},tagH4:{x:4,y:0},tagTD:{x:0,y:6},tagTH:{x:1,y:4},pointer:{x:0,y:0,borderWidth:0},variablePointer:{x:0,y:0,borderWidth:0}},pageSetup:function(){try{PLUGIN.tooltip.setImagesPath(uiGlobal.sIFLOWImagesPath),"Internet Explorer"===uiUtil.browser.sName&&uiUtil.browser.iVersion<8&&(uiMethods.tooltips.defaultOffsets.position={x:2,y:-2},uiMethods.tooltips.defaultOffsets.tagH4={x:4,y:-2},uiMethods.tooltips.defaultOffsets.pointer={x:-9,y:0},uiMethods.tooltips.defaultOffsets.variablePointer={x:-24,y:0}),PLUGIN.tooltip.registerConfig("fieldInstructions",{selector:".help",containerClass:"ttFieldInstructions",pointerImgPath:"tooltip_pointer.png",offsets:uiMethods.tooltips.defaultOffsets,legacyIflow:!0}),"Internet Explorer"===uiUtil.browser.sName&&uiUtil.browser.iVersion<10&&uiMethods.preloader.addAsset('<img src="'+uiGlobal.sIFLOWImagesPath+'tooltip_bg.png" alt="">')}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},insertLoadingMessage:function(oOptions){try{var oDefaults,oDiv,oSettings;if(!PLUGIN.spinwheel)return Modernizr.load({load:uiGlobal.assets.urls.spinwheel,callback:function(){uiMethods.insertLoadingMessage(oOptions)}}),!1;oDefaults={bClearBackground:!0,bShowPageOverlay:!0,sMessage:"Please wait"},oDiv=document.createElement("div"),oSettings=uiUtil.extend(!0,{},oDefaults,oOptions),oDiv.className="loadingMessageCentered",oDiv.setAttribute("tabIndex","1"),oDiv.innerHTML='<div class="spinnerHolder"></div><p>'+oSettings.sMessage+"</p>",document.body.appendChild(oDiv),oDiv.focus(),PLUGIN.spinwheel.start(uiUtil.queryOne(".spinnerHolder")),oSettings.bClearBackground&&(document.body.style.background="#fff"),oSettings.bShowPageOverlay&&((oDiv=document.createElement("div")).className="loadingMessagePageOverlay",oDiv.setAttribute("tabIndex","1"),oDiv.innerHTML="&nbsp;",document.body.appendChild(oDiv),oDiv.style.display="block")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},preloader:{oContainer:null,aAssets:[],setup:function(){try{var i=uiMethods.preloader.aAssets.length;for(uiMethods.preloader.oContainer=document.createElement("div"),uiMethods.preloader.oContainer.className="hideOffScreen",document.body.appendChild(uiMethods.preloader.oContainer);i--;)uiMethods.preloader.addAsset(uiMethods.preloader.aAssets[i]);uiMethods.preloader.aAssets=[]}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},addAsset:function(sHTML){try{if("string"!=typeof sHTML||!sHTML)return!1;uiMethods.preloader.oContainer?(uiMethods.preloader.oContainer.innerHTML+=sHTML,uiMethods.preloader.hasRun++):uiMethods.preloader.aAssets.push(sHTML)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},iFlowMessages:{oJSON:null,sMsgTypeEnum:{error:"Error",warning:"Warning",info:"Informational",success:"Success"},sDefaultFormErrorMsg:"Please correct the highlighted errors shown below before continuing.",sCustomPageMsgClass:"customPageMsg",display:function(oOptions){try{if(null===this.oJSON)return!1;void 0===oOptions&&(oOptions={});var msgListParent,msgType,iconElem,oSettings={bAppendPageMsgs:oOptions.bAppendPageMsgs||!1,bAppendFormMsgs:oOptions.bAppendFormMsgs||!1,oFocus:oOptions.oFocus||null},iCounter=0,jCounter=0,iPageMsgCnt=0,iFormMsgCnt=0,iFormMsgMessagesCnt=0,sHTML="",oElem=null,oPageMsgList=null,oFormMsgList=null,aFormMsgs=null,iFormMsgs=0,oErrorMessages=null,oErrorMessagesUL=null,oFormWrapper=null,oContainer=null,oMessage=null,bNoPageMessages=!1,iFormMessagesDisplayed=0,bLabelFound=!1,msgTypes=[],_setLabel=function(oInput){var bFound=!1;try{var oContainer=null,oLabel=null,bLabelIsHidden=!1;uiUtil.css.hasClass(oInput,uiMethods.iFlowMessages.sCustomPageMsgClass)?(oLabel=document.getElementById(oInput.id+"_Label"))&&(uiUtil.css.addClass(oLabel,"labelError"),bFound=!0):(oContainer=uiUtil.getParentElem(oInput,"th td .line .linePn"),(oLabel=uiUtil.queryOne('label[for="'+oInput.id+'"]',oContainer))&&(null===uiUtil.getParentElem(oLabel,".data .dataPn")||uiUtil.getParentElem(oLabel,"th td")?(!(bLabelIsHidden=uiUtil.css.hasClass(oLabel,"hidden")||uiUtil.css.hasClass(oLabel,"hideOffScreen"))||/^td$|^th$/i.test(oContainer.nodeName)||bLabelIsHidden&&uiUtil.css.hasClass(oLabel.parentNode,"noLabel"))&&(uiUtil.css.addClass(oLabel.parentNode,"labelError"),bFound=!0):(oContainer=uiUtil.queryOne(".labelWrap",uiUtil.getParentElem(oLabel,".line .linePn")))&&(uiUtil.css.addClass(oContainer,"labelError"),bFound=!0)))}catch(e){}finally{return bFound}};if("string"==typeof this.oJSON){if(0===this.oJSON.length)return!1;this.oJSON=JSON.parse(this.oJSON)}for(void 0!==this.oJSON.iFlowMessages.pageMessages&&(iPageMsgCnt=this.oJSON.iFlowMessages.pageMessages.length),void 0!==this.oJSON.iFlowMessages.formMessages&&(iFormMsgCnt=this.oJSON.iFlowMessages.formMessages.length);iCounter<iPageMsgCnt;)oMessage=this.oJSON.iFlowMessages.pageMessages[iCounter],sHTML+='<li class="msg'+this.sMsgTypeEnum[oMessage.type]+'"><div class="msg'+this.sMsgTypeEnum[oMessage.type]+'Icon msgIcon">'+this.sMsgTypeEnum[oMessage.type]+"</div><p>"+oMessage.description+"</p></li>",iCounter++;for((oErrorMessages=document.getElementById("errorMessages"))?uiUtil.css.addClass(oErrorMessages,"pageMsg"):((oErrorMessages=document.createElement("div")).setAttribute("id","errorMessages"),oErrorMessages.className="pageMsg",(oFormWrapper=uiUtil.queryOne("div.formWrapper"))?oFormWrapper.parentNode.insertBefore(oErrorMessages,oFormWrapper):bNoPageMessages=!0),!1===bNoPageMessages&&(!(oErrorMessagesUL=uiUtil.queryOne("ul",oErrorMessages))||oErrorMessagesUL&&!1===oSettings.bAppendPageMsgs?((oPageMsgList=document.createElement("ul")).setAttribute("id","errorMessagesList"),oPageMsgList.className="errorList",oPageMsgList.innerHTML=sHTML,oErrorMessagesUL&&oErrorMessages.removeChild(oErrorMessagesUL)):oErrorMessagesUL.innerHTML+=sHTML),iFormMsgs=(aFormMsgs=uiUtil.query(".labelError")).length;iFormMsgs--;)uiUtil.css.removeClass(aFormMsgs[iFormMsgs],"labelError");for(iFormMsgs=(aFormMsgs=uiUtil.query("div.formMessages, span."+uiMethods.iFlowMessages.sCustomPageMsgClass)).length;iFormMsgs--;)"formMessages"===aFormMsgs[iFormMsgs].className?aFormMsgs[iFormMsgs].parentNode.removeChild(aFormMsgs[iFormMsgs]):aFormMsgs[iFormMsgs].innerHTML="";for(iCounter=0;iCounter<iFormMsgCnt;){if((oElem=document.getElementById(this.oJSON.iFlowMessages.formMessages[iCounter].elementId))||(oElem=document.getElementsByName(this.oJSON.iFlowMessages.formMessages[iCounter].elementId))&&oElem.length&&(oElem=oElem[0]),oElem){for(sHTML="",iFormMsgMessagesCnt=this.oJSON.iFlowMessages.formMessages[iCounter].messages.length,msgTypes=[],jCounter=0;jCounter<iFormMsgMessagesCnt;)sHTML+='<li class="msg'+(msgType=this.sMsgTypeEnum[this.oJSON.iFlowMessages.formMessages[iCounter].messages[jCounter].type])+'"><div class="msgIcon msg'+msgType+'Icon">'+msgType+"</div><p>"+this.oJSON.iFlowMessages.formMessages[iCounter].messages[jCounter].description+"</p></li>",msgTypes.push(msgType),jCounter++;bLabelFound=_setLabel(oElem),""!==sHTML&&(bLabelFound?(oElem.className===uiMethods.iFlowMessages.sCustomPageMsgClass?((oFormMsgList=document.createElement("ul")).id=oElem.id+"_formMsg",oFormMsgList.className="formError",oFormMsgList.innerHTML=sHTML,oElem.appendChild(oFormMsgList),oElem.style.display="block"):((oFormMsgList=document.createElement("div")).id=oElem.id+"_formMsg",oFormMsgList.className="formMessages",oFormMsgList.innerHTML='<ul class="formError">'+sHTML+"</ul>",(msgListParent=uiUtil.queryOne(".data,.dataPn",uiUtil.getParentElem(oElem,".line .linePn")))?msgListParent.appendChild(oFormMsgList):(msgListParent=uiUtil.getParentElem(oElem,"th td"))&&msgListParent&&(msgListParent.appendChild(oFormMsgList),oFormMsgList.className+=" hidden",iconElem=document.createElement("a"),msgType=msgTypes.length&&-1===msgTypes.indexOf("Error")?msgTypes[0]:"Error",uiUtil.css.addClass(msgListParent,"has-message"),uiUtil.css.addClass(msgListParent,"has-message-"+msgType.toLowerCase()),iconElem.className="msgIcon msg"+msgType+"Icon icon-button has-tooltip",iconElem.innerHTML="View "+msgType.toLowerCase()+" message"+(1<iFormMsgMessagesCnt?"s":""),iconElem.setAttribute("role","button"),iconElem.setAttribute("href","#"+uiUtil.establishElementId(oFormMsgList)),iconElem.setAttribute("title",iconElem.innerHTML),iconElem.setAttribute("tabIndex","1"),oElem.parentNode!==msgListParent?(oElem=uiUtil.getParentElem(oElem,".dataPn")).insertBefore(iconElem,oElem.firstChild):msgListParent.insertBefore(iconElem,oElem),PLUGIN.tooltip.addLinks(msgListParent))),(oContainer=uiUtil.getParentElem(oFormMsgList,".ignoreRow"))&&oContainer.className.indexOf("expanded")<0&&uiMethods.table.expandingRows.toggle(document.getElementById(oContainer.id.substring(0,oContainer.id.indexOf("_child")))),iFormMessagesDisplayed++):oPageMsgList?oPageMsgList.innerHTML+=sHTML:oErrorMessagesUL.innerHTML+=sHTML)}else try{throw new Error("Cannot display field-level error message because no field was found with this ID or name: "+this.oJSON.iFlowMessages.formMessages[iCounter].elementId)}catch(ee){uiUtil.errorHandling.jsLog.addEntry(ee,arguments)}iCounter++}0<iFormMessagesDisplayed&&(oPageMsgList?(oPageMsgList.innerHTML='<li class="msgError"><div class="msgIcon msgErrorIcon">Error</div><p>'+this.sDefaultFormErrorMsg+"</p></li>"+oPageMsgList.innerHTML,iPageMsgCnt++):oErrorMessagesUL.innerHTML.indexOf(this.sDefaultFormErrorMsg)<0&&(oErrorMessagesUL.innerHTML='<li class="msgError"><div class="msgIcon msgErrorIcon">Error</div><p>'+this.sDefaultFormErrorMsg+"</p></li>"+oErrorMessagesUL.innerHTML)),oPageMsgList&&(0<iPageMsgCnt?(oErrorMessages.appendChild(oPageMsgList),oErrorMessages.tabIndex=1):oErrorMessages.innerHTML=""),oSettings.oFocus&&uiUtil.setFocus(oSettings.oFocus)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},remove:{pageMessages:{withText:function(sMessageText){try{if(!sMessageText||"string"!=typeof sMessageText)return!1;var oMessagesList=document.getElementById("errorMessagesList");if(!oMessagesList)return!1;sMessageText=sMessageText.toLowerCase(),uiUtil.query("li",oMessagesList).forEach(function(msg){-1<msg.innerHTML.toLowerCase().indexOf(sMessageText)&&msg.parentNode.removeChild(msg)}),uiUtil.queryOne("li",oMessagesList)||oMessagesList.parentNode.removeChild(oMessagesList)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}}}},saveAndExit:{sHiddenFieldName:"FK_VK_SAVE_AND_EXIT_COMMAND",sHiddenFlagFieldName:"FK_VK_IS_SAVE_AND_EXIT",execute:function(){try{var aForms=uiUtil.query("form"),iForms=aForms.length,oHidden=null,bSkipForm=!1,oJSON=null,iKVPairs=0;if(0===iForms)return!1;if("function"==typeof prePrepareSaveAndExit&&!prePrepareSaveAndExit())return!1;for(;iForms--;){if((oHidden=aForms[iForms].elements[uiMethods.saveAndExit.sHiddenFieldName])&&!oHidden.disabled&&("function"==typeof prepareSaveAndExit&&(prepareSaveAndExit(aForms[iForms])||(bSkipForm=!0)),!bSkipForm)){if((oJSON=uiUtil.getJSONFromDelimitedKeyValueString(oHidden.value,"|"))&&0<oJSON.keyValuePairs.length){for(iKVPairs=oJSON.keyValuePairs.length;iKVPairs--;)(oHidden=aForms[iForms].elements[oJSON.keyValuePairs[iKVPairs].key])&&(oHidden.value=oJSON.keyValuePairs[iKVPairs].value);(oHidden=aForms[iForms].elements[uiMethods.saveAndExit.sHiddenFlagFieldName])?oHidden.value="true":((oHidden=document.createElement("input")).setAttribute("type","hidden"),oHidden.setAttribute("name",uiMethods.saveAndExit.sHiddenFlagFieldName),oHidden.setAttribute("value","true"),aForms[iForms].appendChild(oHidden))}aForms[iForms].submit()}bSkipForm=!1}}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},ajax:{sMethodEnum:{get:"get",post:"post"},sSpinImageEnum:{sizeM:"ajaxLoaderM.gif",sizeS:"ajaxLoaderS.gif"},aXmlHTTP:[],aTimeout:[],oDefaultSettings:{sUrl:"",iTimeout:12e5,sMethod:"post",oParams:null,sSpinElemId:"",sOverlayClass:"ajaxOverlay",sSpinImage:"sizeM",sFocusElemId:"",sErrorMessage:"Our system can't display the requested information at this time. Please try again later.",onComplete:function(){uiMethods.ajax.onComplete(arguments)},onSuccess:function(){uiMethods.ajax.onSuccess(arguments)},onError:function(){uiMethods.ajax.onError(arguments)},onTimeout:function(){uiMethods.ajax.onTimeout(arguments)},onSuccessXtra:function(){uiMethods.ajax.onSuccessXtra(arguments)}},execute:function(oOptions){try{for(var sParams,oSettings=uiUtil.extend(!0,{},uiMethods.ajax.oDefaultSettings,oOptions),oUpdateElem=null,oOverlay=null,iIndex=0;uiMethods.ajax.aXmlHTTP[iIndex];)iIndex++;"string"==typeof oSettings.sSpinElemId&&0<oSettings.sSpinElemId.length&&(oUpdateElem=document.getElementById(oSettings.sSpinElemId))&&(""!==oUpdateElem.style.position&&"static"!==oUpdateElem.style.position||(oUpdateElem.style.position="relative"),(oOverlay=document.createElement("div")).setAttribute("id","ajaxOverlay_"+iIndex),oOverlay.innerHTML='<img src="'+uiGlobal.sIFLOWImagesPath+uiMethods.ajax.sSpinImageEnum[oSettings.sSpinImage]+'" alt="Loading...please wait."/>',oUpdateElem.appendChild(oOverlay),oOverlay.className=oSettings.sOverlayClass),sParams=uiMethods.ajax.getFormParams(oSettings),uiMethods.ajax.aXmlHTTP[iIndex]=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),uiMethods.ajax.aTimeout[iIndex]=setTimeout(function(){oSettings.onTimeout(uiMethods.ajax.aXmlHTTP[iIndex],oSettings),uiMethods.ajax.aXmlHTTP[iIndex].abort()},oSettings.iTimeout),oSettings.sMethod===this.sMethodEnum.post?(uiMethods.ajax.aXmlHTTP[iIndex].open(oSettings.sMethod,oSettings.sUrl,!0),uiMethods.ajax.aXmlHTTP[iIndex].setRequestHeader("Content-type","application/x-www-form-urlencoded"),uiMethods.ajax.aXmlHTTP[iIndex].setRequestHeader("Content-length",sParams.length),uiMethods.ajax.aXmlHTTP[iIndex].setRequestHeader("Connection","close"),uiMethods.ajax.aXmlHTTP[iIndex].send(sParams)):(uiMethods.ajax.aXmlHTTP[iIndex].open(oSettings.sMethod,oSettings.sUrl+"?"+sParams,!0),uiMethods.ajax.aXmlHTTP[iIndex].send(null)),uiMethods.ajax.aXmlHTTP[iIndex]&&(uiMethods.ajax.aXmlHTTP[iIndex].onreadystatechange=function(){try{for(var iXmlHTTPLength=uiMethods.ajax.aXmlHTTP.length;iXmlHTTPLength--;)uiMethods.ajax.aXmlHTTP[iXmlHTTPLength]&&4===uiMethods.ajax.aXmlHTTP[iXmlHTTPLength].readyState&&(clearTimeout(uiMethods.ajax.aTimeout[iXmlHTTPLength]),200<=uiMethods.ajax.aXmlHTTP[iXmlHTTPLength].status&&uiMethods.ajax.aXmlHTTP[iXmlHTTPLength].status<300?oSettings.onSuccess(uiMethods.ajax.aXmlHTTP[iXmlHTTPLength],oSettings):oSettings.onError(uiMethods.ajax.aXmlHTTP[iXmlHTTPLength],oSettings),oUpdateElem&&oUpdateElem.removeChild(oOverlay),oSettings.onComplete(uiMethods.ajax.aXmlHTTP[iXmlHTTPLength],oSettings),uiMethods.ajax.aXmlHTTP[iXmlHTTPLength]=null)}catch(e){uiMethods.ajax.aXmlHTTP[iIndex].abort()}})}catch(e){}},onComplete:function(){},onSuccess:function(oArguments){try{var xmlHTTP=oArguments[0],oSettings=oArguments[1],oJSON=null,oHtmlContainer=null,iHtmlContainers=0,bHtmlChanged=!1;try{if(oJSON=JSON.parse(xmlHTTP.responseText),"array"===uiUtil.typeOf(oJSON.htmlContent))for(iHtmlContainers=oJSON.htmlContent.length;iHtmlContainers--;)if(oHtmlContainer=document.getElementById(oJSON.htmlContent[iHtmlContainers].elementId))try{!1===bHtmlChanged&&(bHtmlChanged=!0),oHtmlContainer.innerHTML=oJSON.htmlContent[iHtmlContainers].html}catch(eee){uiUtil.modifyTableInnerHtml(oHtmlContainer,oJSON.htmlContent[iHtmlContainers].html)}void 0!==oJSON.userMessages&&(uiMethods.iFlowMessages.oJSON=oJSON.userMessages,uiMethods.iFlowMessages.display())}catch(e){}finally{uiUtil.setFocus(oSettings.sFocusElemId),!0===bHtmlChanged&&uiMethods.pageSetup(),oSettings.onSuccessXtra(xmlHTTP,oSettings)}}catch(e){}},onError:function(){},onTimeout:function(){},onSuccessXtra:function(){},getFormParams:function(oSettings){var sParams="";try{var reRegExp,iElems=0,iSelectMultiple=0;if(void 0!==oSettings.oParams&&null!==oSettings.oParams)if(/^form$/i.test(oSettings.oParams.nodeName))for(iElems=oSettings.oParams.elements.length;iElems--;)switch(oSettings.oParams.elements[iElems].type){case"select-one":sParams+="&"+oSettings.oParams.elements[iElems].id+"="+oSettings.oParams.elements[iElems].options[oSettings.oParams.elements[iElems].selectedIndex].value;break;case"select-multiple":for(sParams+="&"+oSettings.oParams.elements[iElems].id+"=",iSelectMultiple=oSettings.oParams.elements[iElems].options.length;iSelectMultiple--;)oSettings.oParams.elements[iElems].options[iSelectMultiple].selected&&(sParams+=oSettings.oParams.elements[iElems].options[iSelectMultiple].value+"|");"|"===sParams.substring(sParams.length-1)&&(sParams=sParams.substring(0,sParams.length-1));break;case"checkbox":sParams+="&"+oSettings.oParams.elements[iElems].id+"=",oSettings.oParams.elements[iElems].checked?sParams+=oSettings.oParams.elements[iElems].value:sParams+="";break;case"radio":oSettings.oParams.elements[iElems].checked&&(sParams+="&"+oSettings.oParams.elements[iElems].name+"="+oSettings.oParams.elements[iElems].value);break;default:sParams+="&"+oSettings.oParams.elements[iElems].id+"="+oSettings.oParams.elements[iElems].value}else"string"==typeof oSettings.oParams&&(sParams="&"+oSettings.oParams);"&"===(sParams+="&Ts="+(new Date).getTime().toString()).substring(0,1)&&(sParams=sParams.substring(1)),reRegExp=new RegExp("&&","g"),sParams=sParams.replace(reRegExp,"&")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return sParams}}},sampleCheck:{aImagePaths:{},oFocusedElem:null,bTooltipOpen:!1,bLabelMouseDown:!1,revertTimeout:0,pageSetup:function(){try{var aTypes,sType,i;if(!uiUtil.queryOne(".changeSampleCheck"))return!1;for(i=(aTypes=["routing","account","both"]).length;i--;)sType=aTypes[i],uiMethods.sampleCheck.aImagePaths[sType]={src:uiGlobal.sIFLOWImagesPath+"sample-check-"+sType+".png",alt:"Sample check with the "+("both"===sType?"routing and account numbers":sType+" number")+" highlighted"},uiMethods.preloader.addAsset('<img src="'+uiMethods.sampleCheck.aImagePaths[sType].src+'" alt="" />');uiMethods.sampleCheck.events.pageSetup()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},events:{pageSetup:function(){try{var oElem,oRelatedElem,i,aElems=uiUtil.query(".changeSampleCheck");for(i=aElems.length;i--;)oElem=aElems[i],uiUtil.attachEvent(oElem,"focus",uiMethods.sampleCheck.events.onFocus),uiUtil.attachEvent(oElem,"click",uiMethods.sampleCheck.events.onFocus),uiUtil.attachEvent(oElem,"blur",uiMethods.sampleCheck.events.onBlur),oRelatedElem=uiUtil.queryOne("label",uiUtil.getParentElem(oElem,".line .linePn")),uiUtil.css.addClass(oRelatedElem,"changeSampleCheck"),uiUtil.attachEvent(oRelatedElem,"mousedown",uiMethods.sampleCheck.events.onFocus),uiUtil.attachEvent(oRelatedElem,"mousedown",uiMethods.sampleCheck.events.onLabelMouseDown),uiUtil.attachEvent(oRelatedElem,"mouseup",uiMethods.sampleCheck.events.onLabelMouseUp),uiUtil.css.hasClass(oElem,"help")&&(oRelatedElem=document.getElementById(oElem.id+"_tooltip"))&&(uiUtil.attachEvent(oRelatedElem,"tooltiphide",uiMethods.sampleCheck.events.onToolTipHide,!0),/internet\sexplorer/i.test(uiUtil.browser.sName)&&uiUtil.browser.iVersion<8&&(oRelatedElem=uiUtil.queryOne("div.tooltipBody",oRelatedElem)),uiUtil.css.addClass(oRelatedElem,"changeSampleCheck"),oRelatedElem.setAttribute("data-samplechecktype",oElem.getAttribute("data-samplechecktype")),uiUtil.attachEvent(oRelatedElem,"focus",uiMethods.sampleCheck.events.onFocus));uiUtil.attachEvent(document,"click",uiMethods.sampleCheck.events.onOtherElementClick),uiUtil.query("a.help").forEach(function(oElem){uiUtil.attachEvent(oElem,"click",uiMethods.sampleCheck.events.onOtherElementClick)})}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onFocus:function(eEvt){try{var oSender=uiUtil.getHTMLObjFromEvent(eEvt);uiMethods.sampleCheck.oFocusedElem=oSender,uiUtil.getParentElem(oSender,".tooltip")&&(uiMethods.sampleCheck.bTooltipOpen=!0),uiMethods.sampleCheck.changeImage(eEvt)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onBlur:function(eEvt){try{var oSender=uiUtil.getHTMLObjFromEvent(eEvt);uiUtil.getParentElem(oSender,".changeSampleCheck")&&(uiMethods.sampleCheck.oFocusedElem=null,uiUtil.getParentElem(oSender,".tooltip")&&(uiMethods.sampleCheck.bTooltipOpen=!1),setTimeout(uiMethods.sampleCheck.revertImages,uiMethods.sampleCheck.revertTimeout))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onLabelMouseDown:function(){try{uiMethods.sampleCheck.bLabelMouseDown=!0}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onLabelMouseUp:function(){try{uiMethods.sampleCheck.bLabelMouseDown=!1}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onToolTipHide:function(){try{uiMethods.sampleCheck.bTooltipOpen=!1}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},onOtherElementClick:function(eEvt){try{var oSender=uiUtil.getHTMLObjFromEvent(eEvt);uiUtil.getParentElem(oSender,".tooltip .changeSampleCheck")||(uiMethods.sampleCheck.bTooltipOpen=!1,uiMethods.sampleCheck.oFocusedElem=null,setTimeout(uiMethods.sampleCheck.revertImages,uiMethods.sampleCheck.revertTimeout))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},changeImage:function(eEvt){try{var oParent,sId,oSender=uiUtil.getHTMLObjFromEvent(eEvt),oCheckImg=null;uiUtil.css.hasClass(oSender,"tooltip")||uiUtil.css.hasClass(oSender,"tooltipBody")?oCheckImg=uiUtil.queryOne(".sampleCheckImage",uiUtil.getParentElem(document.getElementById(oSender.id.replace("_tooltip","")),".group")):(oParent=uiUtil.getParentElem(oSender,".group"),oCheckImg=uiUtil.queryOne(".sampleCheckImage",oParent),uiUtil.getParentElem(oSender,".help")?oSender=uiUtil.getParentElem(oSender,".help"):/label/i.test(oSender.nodeName)&&(sId=oSender.getAttribute("for")||oSender.htmlFor,oSender=document.getElementById(sId))),uiMethods.sampleCheck.setImage(oCheckImg,oSender.getAttribute("data-samplechecktype"))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},revertImages:function(){try{if(null!==uiMethods.sampleCheck.oFocusedElem||uiMethods.sampleCheck.bLabelMouseDown||uiMethods.sampleCheck.bTooltipOpen)return!1;uiUtil.query(".sampleCheckImage").forEach(uiMethods.sampleCheck.setImage)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},setImage:function(oCheckImg,sType){try{if(!oCheckImg||"object"!=typeof oCheckImg)return!1;sType&&"string"==typeof sType||(sType="both"),oCheckImg.setAttribute("src",uiMethods.sampleCheck.aImagePaths[sType].src),oCheckImg.setAttribute("alt",uiMethods.sampleCheck.aImagePaths[sType].alt)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},fieldInstructions:{oFooter:null,pageSetup:function(){try{var oLegend=document.getElementById("legend"),oImg=null;if(uiMethods.fieldInstructions.oFooter=document.getElementById("instructionsFooter"),!uiMethods.fieldInstructions.oFooter||!oLegend)return!1;oLegend.querySelector?oImg=uiUtil.queryOne('img[src*="info.png"], .icon-help',oLegend):uiUtil.query("img, .icon-help",oLegend).forEach(function(oElem){(!oImg&&"IMG"!==oElem.nodeName||oElem.src&&-1<oElem.src.indexOf("info.png"))&&(oImg=oElem)}),oImg&&uiUtil.attachEvent(oImg,"click",uiMethods.fieldInstructions.toggle)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},toggle:function(){try{uiUtil.css.hasClass(uiMethods.fieldInstructions.oFooter,"displayInstructions")?uiUtil.css.removeClass(uiMethods.fieldInstructions.oFooter,"displayInstructions"):(uiUtil.css.addClass(uiMethods.fieldInstructions.oFooter,"displayInstructions"),window.scrollTo(0,uiUtil.getElementPosition(uiMethods.fieldInstructions.oFooter)[1]))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},spinwheel:{start:function(elem,options){try{if(!elem)return!1;if(!PLUGIN.spinwheel)return Modernizr.load({load:uiGlobal.assets.urls.spinwheel,callback:function(){uiMethods.spinwheel.start(elem,options)}}),!1;options=options||{},PLUGIN.spinwheel.start(elem,options)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},stop:function(){try{PLUGIN.spinwheel.stop()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}}},uiUtil={helpIcons:{oReturnTo:null,returnToElement:function(){try{var pos;if(!this.oReturnTo)return!0;if("string"==typeof this.oReturnTo)return window.location.hash=this.oReturnTo,!1;if("object"==typeof this.oReturnTo)return pos=this.getElementPosition(this.oReturnTo),setTimeout(function(){window.scrollTo(pos[0],pos[1]-10)},0),!1}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{this.oReturnTo=""}}},css:{oStyleSheet:null,addRule:function(sRule){try{var oStyleSheet;if(!document.styleSheets||"string"!=typeof sRule)return!1;uiUtil.oStyleSheet||((oStyleSheet=document.createElement("style")).type="text/css",oStyleSheet.id="ui-style-sheet",uiUtil.queryOne("head").appendChild(oStyleSheet),uiUtil.oStyleSheet=oStyleSheet),uiUtil.oStyleSheet.sheet?uiUtil.oStyleSheet.appendChild(document.createTextNode(" "+sRule)):uiUtil.oStyleSheet.styleSheet&&(uiUtil.oStyleSheet.styleSheet.cssText+=" "+sRule)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},hasClass:null,addClass:null,removeClass:null,toggleClass:function(oSender,sClasses){try{var aClasses,sClassName,sClass,i,cleanClassNames=function(sClassNames){try{return sClassNames.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")}catch(e){}};for(aClasses=cleanClassNames(sClasses).split(" "),sClassName=" "+cleanClassNames(oSender.className)+" ",i=aClasses.length;i--;)sClass=" "+aClasses[i]+" ",sClassName.indexOf(sClass)<0?sClassName+=sClass:sClassName=sClassName.replace(sClass," ");return oSender.className=cleanClassNames(sClassName),oSender.className}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},getStyleValue:function(oSender,sProperty){try{return oSender&&sProperty?(document.defaultView&&document.defaultView.getComputedStyle?(oDefaultView=oSender.ownerDocument.defaultView)&&(oComputedStyle=oDefaultView.getComputedStyle(oSender,null))&&(""!==(sReturnValue=oComputedStyle.getPropertyValue(sProperty))||uiUtil.contains(oSender.ownerDocument.documentElement,oSender)||(sReturnValue=oSender.style?oSender.style[sProperty]:"")):document.documentElement.currentStyle&&(sProperty=uiUtil.hyphenToCamelCase(sProperty),sReturnValue=oSender.currentStyle&&oSender.currentStyle[sProperty],oStyle=oSender.style,null===sReturnValue&&oStyle&&(sReturnValue=oStyle[sProperty]),!/^-?\d+(?:px)?$/i.test(sReturnValue)&&/^-?\d/.test(sReturnValue)&&(sLeftValue=oStyle.left,(sLeftRuntimeStyle=oSender.runtimeStyle&&oSender.runtimeStyle.left)&&(oSender.runtimeStyle.left=oSender.currentStyle.left),oStyle.left="fontSize"===sProperty?"1em":sReturnValue||0,sReturnValue=oStyle.pixelLeft+"px",oStyle.left=sLeftValue,sLeftRuntimeStyle&&(oSender.runtimeStyle.left=sLeftRuntimeStyle)),""===sReturnValue&&(sReturnValue="auto")),sReturnValue):"";var sReturnValue,oStyle,oDefaultView,oComputedStyle,sLeftValue,sLeftRuntimeStyle}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),""}}},query:null,toArray:function(aList){try{var i,aArray=[];try{aArray=Array.prototype.slice.call(aList)}catch(err){}if(!aArray.length&&aList.length)for(i=0;i<aList.length;)aArray.push(aList[i]),i++;return aArray}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),[]}},extend:function(){var oTarget={};try{var opt,name,oSource,copy,copyIsArr,clone,aArgs=arguments,iArgs=aArgs.length,i=1,deep=!1;for(oTarget=aArgs[0]||{},"boolean"===uiUtil.typeOf(oTarget)&&(deep=oTarget,oTarget=aArgs[1]||{},i=2),"object"!==uiUtil.typeOf(oTarget)&&"function"!==uiUtil.typeOf(oTarget)&&(oTarget="array"===uiUtil.typeOf(oTarget)?[]:{}),iArgs===i&&(oTarget=this,i--);i<iArgs;i++)if(null!==(opt=aArgs[i]))for(name in opt)oSource=oTarget[name],oTarget!==(copy=opt[name])&&(deep&&copy&&(uiUtil.isPlainObject(copy)||(copyIsArr="array"===uiUtil.typeOf(copy)))?(copyIsArr?(copyIsArr=!1,clone=oSource&&"array"===uiUtil.typeOf(oSource)?oSource:[]):clone=oSource&&uiUtil.isPlainObject(oSource)?oSource:{},oTarget[name]=uiUtil.extend(deep,clone,copy)):void 0!==copy&&("string"==typeof copy&&""===copy&&"string"!=typeof oTarget[name]&&oTarget[name]||(oTarget[name]=copy)))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return oTarget}},toTitleCase:function(str){try{return str.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),str}},url:{sGenericAuthErrorUrl:"genericAuthError.jsp",rAppBaseUrl:/(http[s]?\:\/\/[\w+\.]+\.gov\/\w+\/).*/i,getAppBaseUrl:function(){try{return uiUtil.url.rAppBaseUrl.test(window.location.href)?uiUtil.url.rAppBaseUrl.exec(window.location.href)[1]:""}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),""}}},getParentElem:function(oSender,targetValue){try{var aTargetValues,oNode,i,elemTest=uiUtil.matchesSelector||function(oElem,sValue){return 0===sValue.indexOf(".")?uiUtil.css.hasClass(oElem,sValue.substr(1)):0===sValue.indexOf("#")?oElem.id&&oElem.id===sValue.substr(1):oElem.nodeName.toLowerCase()===sValue};for(aTargetValues=targetValue.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ").split(" "),oNode=oSender;oNode&&!/^body$|^html$/i.test(oNode.nodeName);){for(i=aTargetValues.length;i--;)if(elemTest(oNode,aTargetValues[i]))return oNode;oNode=oNode.parentNode}return null}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},matchesSelector:null,matches:function(oElem,sSelectors){try{var wasMatchFound=!1,_hasAllClasses=function(aClasses){var iMatches;return!!aClasses.length&&(iMatches=0,aClasses.forEach(function(sClass){uiUtil.css.hasClass(oElem,sClass)&&iMatches++}),iMatches===aClasses.length)};return"element"===uiUtil.typeOf(oElem)&&"string"==typeof sSelectors&&(!!(sSelectors=uiUtil.trim(sSelectors,",")).length&&(sSelectors.split(",").forEach(function(sSelector){var tagName,classNames;if(wasMatchFound)return!1;tagName="",classNames=[],-1<sSelector.indexOf("#")?(sSelector=sSelector.split("#")[1].split(".")[0],uiUtil.establishElementId(oElem)===sSelector&&(wasMatchFound=!0)):0===sSelector.indexOf(".")?(classNames=sSelector.replace(/^\.+|\.+$/g,"").split("."),_hasAllClasses(classNames)&&(wasMatchFound=!0)):0<sSelector.indexOf(".")?(tagName=(classNames=sSelector.replace(/\.+$/g,"").split(".")).splice(0,1)[0].toLowerCase(),oElem.nodeName.toLowerCase()===tagName&&_hasAllClasses(classNames)&&(wasMatchFound=!0)):/^\w+$/.test(sSelector)&&oElem.nodeName.toLowerCase()===sSelector.toLowerCase()&&(wasMatchFound=!0)}),wasMatchFound))}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},establishElementId:function(oElem,opts){try{var label,id="";return oElem&&"object"==typeof oElem&&oElem.id&&"string"==typeof oElem.id?oElem.id:(opts&&oElem&&"object"==typeof opts&&!0===opts.useLabel&&((label=uiUtil.getParentElem(oElem,".line .selDepFields .linePn"))?(label=uiUtil.queryOne(".label, .labelWrap, .rBtnWrapper",label),label=uiUtil.queryOne("label, legend, .visibleLabel",label)||label):label=uiUtil.getParentElem(oElem,"th td"),id=(id=uiUtil.getValueAsText(label).replace(/\s+/g,"").replace(/\W/g,"").replace(/requiredfields?/gi,"").replace(/moreinformation/gi,"")).substr(0,50)),id||(id+=uiUtil.getRandomString()),document.getElementById(id)&&(id=uiUtil.establishElementId(null)),oElem&&"object"==typeof oElem&&(oElem.id=id),id)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},getRandomString:function(){try{for(var i=4,id="";i--;)id+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(Math.random()*"abcdefghijklmnopqrstuvwxyz".length));return id+=(new Date).getTime().toString().substr(9)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},getTextNodes:function(parent,options){try{var results=[];if(void 0===parent&&(parent=document),!parent||"element"!==uiUtil.typeOf(parent))return[];for("object"===uiUtil.typeOf(options)&&"boolean"==typeof options.recursive&&options.recursive,parent=parent.firstChild;parent;parent=parent.nextSibling)3===parent.nodeType?results.push(parent):results=results.concat(uiUtil.getTextNodes(parent));return results}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),[]}},setFocus:function(oElem){try{var oElement;if(void 0===oElem)return!1;"string"==typeof(oElement=oElem)&&(oElement=document.getElementById(oElement)),oElement&&oElement.focus()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},attachEvent:function(elem,eventName,functionName,isCustom){try{var currentEventHandler;return!!elem&&(elem.addEventListener?elem.addEventListener(eventName,functionName,!1):elem.attachEvent?isCustom?(elem[eventName]||(elem[eventName]=0),elem.attachEvent("onpropertychange",function(evt){evt.propertyName===eventName&&functionName(evt)})):elem.attachEvent("on"+eventName,functionName):(currentEventHandler=elem["on"+eventName],elem["on"+eventName]=currentEventHandler?function(e){currentEventHandler(e),functionName(e)}:functionName),!0)}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},detachEvent:function(elem,eventName,functionName,isCustom){try{return!!elem&&(elem.removeEventListener?elem.removeEventListener(eventName,functionName,!1):elem.detachEvent?isCustom?elem.detachEvent("onpropertychange",function(evt){evt.propertyName===eventName&&functionName(evt)}):elem.detachEvent("on"+eventName,functionName):elem["on"+eventName]&&elem.removeAttribute("on"+eventName),!0)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},stopEvent:function(eEvt){try{eEvt&&(uiUtil.preventDefault(eEvt),uiUtil.stopPropagation(eEvt))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},preventDefault:function(eEvt){"function"==typeof eEvt.preventDefault?eEvt.preventDefault():eEvt.returnValue=!1},stopPropagation:function(eEvt){"function"==typeof eEvt.stopPropagation?eEvt.stopPropagation():eEvt.cancelBubble=!0},getHTMLObjFromEvent:function(eEvt){var oTarg;try{eEvt||(eEvt=window.event),eEvt.target?oTarg=eEvt.target:eEvt.srcElement&&(oTarg=eEvt.srcElement),3===oTarg.nodeType&&(oTarg=oTarg.parentNode)}catch(e){oTarg=null}finally{return oTarg}},isPlainObject:function(oObject){try{var sKey,oHasOwnProp=Object.prototype.hasOwnProperty;if(!oObject||"object"!==uiUtil.typeOf(oObject)||oObject.nodeType||(oObj=oObject)&&"object"===uiUtil.typeOf(oObj)&&"setInterval"in oObj)return!1;try{if(oObject.constructor&&!oHasOwnProp.call(oObject,"constructor")&&!oHasOwnProp.call(oObject.constructor.prototype,"isPrototypeOf"))return!1}catch(ee){return!1}for(sKey in oObject);return void 0===sKey||oHasOwnProp.call(oObject,sKey)}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}var oObj},typeOf:function(thing){try{var objProtoType,objTypes,i,nativeType=typeof thing;if("object"!==nativeType)return nativeType;if(null===thing)return"null";for(objProtoType=Object.prototype.toString.call(thing),objTypes=["Array","Date","RegExp"],i=3;i--;)if(objProtoType==="[object "+objTypes[i]+"]")return objTypes[i].toLowerCase();return"object"==typeof HTMLElement&&thing instanceof HTMLElement?"element":"string"==typeof thing.nodeName&&1===thing.nodeType?"element":"object"==typeof Node&&thing instanceof Node?"node":"number"==typeof thing.nodeType&&"string"==typeof thing.nodeName?"node":/^\[object (HTMLCollection|NodeList|Object)\]$/.test(objProtoType)&&"number"==typeof thing.length&&void 0!==thing.item&&(0===thing.length||"object"==typeof thing[0]&&0<thing[0].nodeType)?"nodelist":"object"}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),""}},val:function(oElem,mValue){try{var i,bSetValue=!1;if(!oElem||"element"!==uiUtil.typeOf(oElem))return null;if(void 0!==mValue&&(mValue+="",bSetValue=!0),/^input$|^textarea$|^option$/i.test(oElem.nodeName))return/checkbox|radio/i.test(oElem.type)?bSetValue?(oElem.checked=!!mValue,!0):!!oElem.checked||!1:bSetValue?(oElem.value=mValue,!0):oElem.value||"";if(!/^select$/i.test(oElem.nodeName))return null;if(!bSetValue)return oElem.options[oElem.selectedIndex].value||"";for(i=0;i<oElem.options.length;){if(oElem.options[i].value===mValue)return oElem.options[i].selected=!0;i++}0<oElem.options.length&&(oElem.options[0].selected=!0,oElem.selectedIndex=0)}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),null}},isUpdatable:function(elem){try{return elem&&"element"===uiUtil.typeOf(elem)?!!/^input$|^textarea$|^option$|^select$/i.test(elem.nodeName):null}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),null}},contains:function(a,b){var bReturnValue=!1;try{document.documentElement.contains?bReturnValue=a!==b&&(!a.contains||a.contains(b)):document.documentElement.compareDocumentPosition&&(bReturnValue=!!(16&a.compareDocumentPosition(b)))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return bReturnValue}},hyphenToCamelCase:function(sString){var sReturnValue="";try{sReturnValue=sString.replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/gi,function(aAll,sLetter){return(sLetter+"").toUpperCase()})}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return sReturnValue}},getElementPosition:function(oSender){try{var left=0,top=0;if(oSender.offsetParent)for(left=oSender.offsetLeft,top=oSender.offsetTop,oSender=oSender.offsetParent;oSender;)left+=oSender.offsetLeft,top+=oSender.offsetTop,oSender=oSender.offsetParent;return[left,top]}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},getViewPort:function(){try{return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight]}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},getScrollTop:function(){try{var iScrollTop=document.body.scrollTop;return iScrollTop||(iScrollTop=window.pageYOffset?window.pageYOffset:document.body.parentElement?document.body.parentElement.scrollTop:0),iScrollTop}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},getElementsByClassName:function(oNode,sTag,sClassNames){try{var i,j,aClasses,aElements,aReturnElements=[];if(!sClassNames||"string"!=typeof sClassNames)return!1;for("object"!=typeof oNode&&(oNode=document),sTag||(sTag="*"),aClasses=sClassNames.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ").split(" "),aElements=oNode.getElementsByTagName(sTag),i=0;i<aElements.length;){for(j=aClasses.length;j--;)if(uiUtil.css.hasClass(aElements[i],aClasses[j])){aReturnElements.push(aElements[i]);break}i++}return aReturnElements}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},getElementsByAttribute:function(sQueryString,oNode){try{var rBracketsLeft,rBracketsRight,rTagName,rAttrNameOnly,rWithValue,aReturnElements=[];return"string"==typeof sQueryString&&sQueryString?(oNode=oNode||document).querySelectorAll?(/^[\w\-]+$/.test(sQueryString)&&(sQueryString="["+sQueryString+"]"),uiUtil.toArray(oNode.querySelectorAll(sQueryString))):(rBracketsLeft=/^([\w\-]+)?\[/,rBracketsRight=/\]$/,rTagName=/^([\w\-]+)\[/,rAttrNameOnly=/^([\w\-]+)((\W?)\=[\"\'][\"\'])?$/,rWithValue=/^([\w\-]+)(\W?)\=\"(.+)\"$/,uiUtil.trim(sQueryString,",").split(",").forEach(function(sSelector){var sAttrName,sAttrValue,aResults,numResults,elemVal,i,sTagName="*";if(rTagName.test(sSelector)&&(sTagName=rTagName.exec(sSelector)[1]),sSelector=sSelector.replace(rBracketsLeft,"").replace(rBracketsRight,""),rAttrNameOnly.test(sSelector))sAttrName=rAttrNameOnly.exec(sSelector)[1];else{if(!rWithValue.test(sSelector))return!1;sAttrName=(aResults=rWithValue.exec(sSelector))[1],sAttrValue=aResults[3]}for(i=0,numResults=(aResults=oNode.getElementsByTagName(sTagName)).length;i<numResults;)uiUtil.hasAttribute(aResults[i],sAttrName)&&(sAttrValue?(null===(elemVal=aResults[i].getAttribute(sAttrName))&&"for"===sAttrName&&aResults[i].htmlFor?elemVal=aResults[i].htmlFor:"number"==typeof elemVal&&(elemVal=elemVal.toString()),sAttrValue===elemVal&&aReturnElements.push(aResults[i])):aReturnElements.push(aResults[i])),i++}),aReturnElements):aReturnElements}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),[]}},hasAttribute:null,trim:function(string,separator){try{var rSeparatorInner,rSeparatorBegin,rSeparatorEnd;return separator&&"string"==typeof separator?(rSeparatorInner=new RegExp("\\s*"+separator+"+\\s*","g"),rSeparatorBegin=new RegExp("^\\s*"+separator+"+\\s*","g"),rSeparatorEnd=new RegExp("\\s*"+separator+"+\\s*$","g"),string.replace(/^\s+|\s+$/g,"").replace(rSeparatorInner,separator).replace(rSeparatorBegin,"").replace(rSeparatorEnd,"")):string.replace(/^\s+|\s+$/g,"")}catch(e){return string}},getJSONFromDelimitedKeyValueString:function(sKeyValueString,sDelimiter){var oJSON=null;try{if("string"!=typeof sKeyValueString||"string"!=typeof sDelimiter)return!1;if(0===sKeyValueString.length||0===sDelimiter.length)return!1;for(var sEqualSign,sKeyValuePair,aKeyValue=sKeyValueString.split(sDelimiter),iKeyValue=aKeyValue.length,iCnt=0,sJSON='{ "keyValuePairs" : [ ';iCnt<iKeyValue;)-1<(sEqualSign=(sKeyValuePair=aKeyValue[iCnt]).indexOf("="))&&(sJSON+='{ "key" : "'+sKeyValuePair.substring(0,sEqualSign)+'", "value" : "'+sKeyValuePair.substring(sEqualSign+1)+'" },'),iCnt++;sJSON=sJSON.substring(0,sJSON.length-1)+" ] }",oJSON=JSON.parse(sJSON)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return oJSON}},modifyTableInnerHtml:function(oElem,sNewHtml){var oSpan=null;try{var sTag,sWrapperHtml,iAttributes,oElemAttributes,i;if(null==oElem)return!1;if("string"!=typeof sNewHtml)return!1;sWrapperHtml={table:"<table>",tbody:"<table><tbody>",thead:"<table><thead>",tfoot:"<table><tfoot>",tr:"<table><tbody><tr>",th:"<table><tbody><tr><th>",td:"<table><tbody><tr><td>"}[sTag=oElem.nodeName.toLowerCase()],(oSpan=document.createElement("span")).setAttribute("class","hidden"),oSpan.innerHTML=sWrapperHtml+sNewHtml,document.body.appendChild(oSpan);try{if(oElem.hasAttributes()&&(oElemAttributes=oSpan.getElementsByTagName(sTag)[0]))for(iAttributes=oElem.attributes.length,i=0;i<iAttributes;)oElemAttributes.setAttribute(oElem.attributes[i].name,oElem.attributes[i].value),i++}catch(e){}oElem.parentNode&&oElem.parentNode.replaceChild(oSpan.getElementsByTagName(sTag)[0],oElem)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{document.body.removeChild(oSpan)}},errorHandling:{jsLog:{addEntry:function(oError,oArguments){try{var sXML,iArgsCnt,iArguments,oArgument,oH1,oH2,oDivTPInfo,sLocationHref,sLocationHostname,sSubdomain,sIflowAppId,sFunction,sDomain=document.domain;if(void 0===oError)return!1;if(void 0===oArguments)return!1;if(-1===sDomain.indexOf(".gov"))return!1;for(oArgument=null,sIflowAppId=sSubdomain="",sXML='<?xml version="1.0" encoding="utf-8"?><ExceptionContainer>',sXML+='<Exception date="'+new Date+'">',sXML+="<Error>",sXML+="<ErrorObject>",sXML+="<Message>"+oError.message+"</Message>",sXML+="<Description>"+oError.description+"</Description>",sXML+="<Number>"+oError.number+"</Number>",sXML+="<Name>"+oError.name+"</Name>",sXML+="<FileName>"+oError.fileName+"</FileName>",sXML+="<LineNumber>"+oError.lineNumber+"</LineNumber>",sXML+="<StackTrace>",sXML+="<Raw>"+oError.stack+"</Raw>",sXML+="<Formatted>"+this.getStackTrace(oError,oArguments)+"</Formatted>",sXML+="</StackTrace>",sXML+="</ErrorObject>",sXML+="<Callee>",sXML+="<FunctionName>"+oArguments.callee.caller+"</FunctionName>",sXML+="<Arguments>",iArguments=oArguments.length,iArgsCnt=0;iArgsCnt<iArguments;)oArgument=oArguments[iArgsCnt++],sXML+="<Argument>","[object Array]"===Object.prototype.toString.call(oArgument)?sXML+="<Type>array</Type><Properties><Id></Id><Name></Name><Value></Value><Tag></Tag><Type></Type><Length>"+oArgument.length+"</Length><FunctionName></FunctionName></Properties>":null===oArgument?sXML+="<Type>null</Type><Properties><Id></Id><Name></Name><Value></Value><Tag></Tag><Type></Type><Length></Length><FunctionName></FunctionName></Properties>":(sXML+="<Type>"+typeof oArgument+"</Type>","object"==typeof oArgument?sXML+="<Properties><Id>"+oArgument.id+"</Id><Name>"+oArgument.name+"</Name><Value>"+oArgument.value+"</Value><Tag>"+oArgument.tagName+"</Tag><Type>"+oArgument.type+"</Type><Length></Length><FunctionName></FunctionName></Properties>":"function"==typeof oArgument?(sFunction=oArgument.toString(),sXML+="<Properties><Id></Id><Name></Name><Value></Value><Tag></Tag><Type></Type><Length>"+oArgument.length+"</Length><FunctionName><![CDATA["+sFunction.substring(sFunction.indexOf("function"),sFunction.indexOf(")")+1)+"]]></FunctionName></Properties>"):sXML+="<Properties><Id></Id><Name></Name><Value>"+oArgument.toString()+"</Value><Tag></Tag><Type></Type><Length></Length><FunctionName></FunctionName></Properties>"),sXML+="</Argument>";sXML+="</Arguments>",sXML+="</Callee>",sXML+="</Error>",sXML+='<Environment scriptVersion="'+uiGlobal.sVersion+'">',sXML+="<Browser>",sXML+="<Name>"+uiUtil.browser.sName+"</Name>",sXML+="<Version>"+uiUtil.browser.iVersion+"</Version>",sXML+="<OS>"+uiUtil.browser.sOS+"</OS>",sXML+="<UserAgent>"+navigator.userAgent+"</UserAgent>",sXML+="</Browser>",sXML+="<Application><URL>"+(sLocationHref=window.location.href)+"</URL>",0<(sLocationHostname=window.location.hostname).length&&(sSubdomain=-1<sLocationHostname.indexOf(".")?sLocationHostname.substring(0,sLocationHostname.indexOf(".")):sLocationHostname,sLocationHref.length>sLocationHostname.length&&-1<(sIflowAppId=sLocationHref.substring(sLocationHref.indexOf(sLocationHostname)+sLocationHostname.length+1)).indexOf("/")&&(sIflowAppId=sIflowAppId.substring(0,sIflowAppId.indexOf("/")))),sXML+="<Subdomain>"+sSubdomain+"</Subdomain><Id>"+sIflowAppId+"</Id><Name>",0<(oH1=document.getElementsByTagName("h1")).length&&(sXML+=oH1[0].innerHTML),sXML+="</Name><PageTitle>",0<(oH2=document.getElementsByTagName("h2")).length&&(sXML+=oH2[0].innerHTML),sXML+="</PageTitle><TaxpayerInfo>",(oDivTPInfo=document.getElementById("taxpayer-info"))&&(sXML+="<![CDATA["+oDivTPInfo.innerHTML+"]]>"),sXML=(sXML+="</TaxpayerInfo></Application></Environment></Exception></ExceptionContainer>").replace(/>undefined</g,"><").replace(/\n/g," ").replace(/\t/g," ").replace(/\s+/g," "),uiMethods.ajax.execute({sUrl:"//"+sDomain+"/UILG/UILGLogMessage.jsp",oParams:"MESSAGE="+uiUtil.base64.encode(sXML)+"&BASE=64"})}catch(e){}},getStackTrace:function(oError,oArguments){var sStack="";try{var oFunction=oArguments.callee.caller,sFunction="";if(oError.stack)sStack=oError.stack;else{for(;oFunction;)sStack+=(sFunction=oFunction.toString()).substring(sFunction.indexOf("function"),sFunction.indexOf(")")+1)+" >> "||"anonymous >> ",oFunction=oFunction.caller;4<sStack.length&&(sStack=sStack.substring(0,sStack.length-4))}}catch(e){}finally{return sStack}}},getErrorObj:function(sMsg,sName){var err=new Error;try{err.message=sMsg,err.name=sName}catch(e){}finally{return err}}},browser:{sName:"",iVersion:0,sOS:"",sVersionSearchString:"",isOldIE:!1,isNewIE:!1,isIE7:!1,isFirefox:!1,isChrome:!1,isIOS:!1,isAndroidBrowser:!1,isResponsive:!1,isSmallScreen:!1,supports:{animation:!1,sticky:!1},eventNames:{transitionEnd:"transitionend"},init:function(){try{var ua=navigator.userAgent;this.sName=this.searchString(this.oBrowserData)||"Unknown browser",this.iVersion=this.searchVersion(ua)||this.searchVersion(navigator.appVersion)||-1,this.sOS=this.searchString(this.oOSData)||"Unknown OS",/Chrome/.test(ua)&&/Android\s(\d[\.\d]*)/.test(ua)&&(this.sName="Chrome"),"Chrome"===this.sName?this.isChrome=!0:"Internet Explorer"===this.sName?this.iVersion<10?(this.isOldIE=!0,9===this.iVersion?uiUtil.css.addClass(document.documentElement,"ie9"):8===this.iVersion?uiUtil.css.addClass(document.documentElement,"ie8"):7===this.iVersion&&(this.isIE7=!0)):(this.isNewIE=!0,uiUtil.css.addClass(document.documentElement,"new-ie")):"Firefox"===this.sName?this.isFirefox=!0:"iOS"===this.sOS&&6<=this.iVersion?this.isIOS=!0:"Android"===this.sName?(this.isAndroidBrowser=!0,uiUtil.css.addClass(document.documentElement,"android")):"Amazon Silk"===this.sName&&(/Playstation/.test(ua)&&(this.sName="Playstation Vita"),this.iVersion<1&&/Silk\/(\d+\.\d+)/.test(ua)&&(this.iVersion=parseFloat(/Silk\/(\d+\.\d+)/.exec(ua)[1]))),this.isOldIE&&7===this.iVersion?uiUtil.css.addClass(document.documentElement,"ie7"):uiUtil.css.addClass(document.documentElement,"no-ie7"),!Modernizr.touch&&/Trident\/\d+\.\d+\;/.test(ua)&&/\sTouch\;/.test(ua)&&/\sIEMobile\/(\d+\.\d+)/.test(ua)&&(Modernizr.touch=!0,this.sName="Internet Explorer",this.sOS="Windows",this.iVersion=parseInt(/\sIEMobile\/(\d+\.\d+)/.exec(ua)[1],10),uiUtil.css.removeClass(document.documentElement,"no-touch")),(!this.isAndroidBrowser||3<=this.iVersion)&&uiUtil.css.addClass(document.documentElement,"optimize-text")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},responsiveInit:function(){try{var elem,breakpoints,docElem=document.documentElement;if(void 0===uiResponsive)return;breakpoints=uiResponsive.getBreakpoints(),this.isSmallScreen=1<screen.width&&screen.width<breakpoints.main.maxWidth,Modernizr.touch?uiUtil.css.addClass(docElem,"touch"):uiUtil.css.addClass(docElem,"no-touch"),window.matchMedia&&window.matchMedia("all").addListener&&document.head&&document.querySelectorAll&&"classList"in docElem?(this.isResponsive=!0,this.supports.animation=!this.isAndroidBrowser&&!(this.isIOS&&this.iVersion<7)&&"function"==typeof getComputedStyle&&docElem&&(docElem.style&&void 0!==docElem.style.animationName||void 0!==docElem.style.WebkitAnimationName),this.supports.animation&&void 0===docElem.style.transition&&void 0!==docElem.style.webkitTransition&&(this.eventNames.transitionEnd="webkitTransitionEnd"),(elem=document.createElement("test")).style.cssText="position: -webkit-sticky; position: sticky;",this.supports.sticky=-1!==elem.style.position.indexOf("sticky"),this.supports.sticky&&docElem.classList.add("position-sticky"),(this.isIOS||"Android"===this.sOS||Modernizr.touch&&this.isSmallScreen)&&((elem=document.createElement("meta")).setAttribute("name","format-detection"),elem.setAttribute("content","telephone=no"),document.head.appendChild(elem)),Modernizr.touch&&this.isSmallScreen?PLUGIN.tracking.trackEvent("client","Responsive, small, touch",navigator.userAgent,screen.width,!0):Modernizr.touch?PLUGIN.tracking.trackEvent("client","Responsive, large, touch",navigator.userAgent,screen.width,!0):this.isSmallScreen?PLUGIN.tracking.trackEvent("client","Responsive, small, no touch",navigator.userAgent,screen.width,!0):PLUGIN.tracking.trackEvent("client","Responsive, large, no touch",navigator.userAgent,screen.width,!0)):Modernizr.touch&&this.isSmallScreen?PLUGIN.tracking.trackEvent("client","Non-responsive, small, touch",navigator.userAgent,screen.width,!0):Modernizr.touch?PLUGIN.tracking.trackEvent("client","Non-responsive, large, touch",navigator.userAgent,screen.width,!0):this.isSmallScreen?PLUGIN.tracking.trackEvent("client","Non-responsive, small, no touch",navigator.userAgent,screen.width,!0):PLUGIN.tracking.trackEvent("client","Non-responsive, large, no touch",navigator.userAgent,screen.width,!0)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},searchString:function(oData){try{if(void 0===oData)return!1;for(var iLength=oData.length,sDataString="",sDataProperty="",iCnt=0;iCnt<iLength;){if(sDataString=oData[iCnt].string,sDataProperty=oData[iCnt].property,this.sVersionSearchString=oData[iCnt].versionSearch||oData[iCnt].identity,sDataString){if(-1!==sDataString.indexOf(oData[iCnt].subString))return oData[iCnt].identity}else if(sDataProperty)return oData[iCnt].identity;iCnt++}}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},searchVersion:function(sDataString){try{var iIndex=sDataString.indexOf(this.sVersionSearchString);if(-1<iIndex)return parseFloat(sDataString.substring(iIndex+this.sVersionSearchString.length+1))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},oBrowserData:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Presto/",identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Internet Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"Internet Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Android",identity:"Android",versionSearch:"Android"},{string:navigator.userAgent,subString:"Silk",identity:"Amazon Silk",versionSearch:"Silk/"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone",versionSearch:"iPhone OS"},{string:navigator.userAgent,subString:"iPod",identity:"iPhone",versionSearch:"iPhone OS"},{string:navigator.userAgent,subString:"iPad",identity:"iPad",versionSearch:" OS"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],oOSData:[{string:navigator.userAgent,subString:"like Mac OS X",identity:"iOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"Silk/",identity:"Android"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.userAgent,subString:"Blackberry",identity:"Blackberry"}],checkNthChildSupport:function(){try{return!!document.querySelector("div:nth-child(odd)")}catch(e){return!1}}},base64:{sKeyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(sInput){try{for(var sResult="",sChr1="",sChr2="",sChr3="",sEnc1="",sEnc2="",sEnc3="",sEnc4="",iCnt=0;iCnt<sInput.length;)sChr1=sInput.charCodeAt(iCnt++),sChr2=sInput.charCodeAt(iCnt++),sChr3=sInput.charCodeAt(iCnt++),sEnc1=sChr1>>2,sEnc2=(3&sChr1)<<4|sChr2>>4,sEnc3=(15&sChr2)<<2|sChr3>>6,sEnc4=63&sChr3,isNaN(sChr2)?sEnc3=sEnc4=64:isNaN(sChr3)&&(sEnc4=64),sResult+=this.sKeyStr.charAt(sEnc1)+this.sKeyStr.charAt(sEnc2)+this.sKeyStr.charAt(sEnc3)+this.sKeyStr.charAt(sEnc4);return sResult}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},decode:function(sInput){try{var sResult="",sChr1="",sChr2="",sChr3="",sEnc1="",sEnc2="",sEnc3="",sEnc4="",iCnt=0;for(sInput=sInput.replace(/[^A-Za-z0-9\+\/\=]/g,"");iCnt<sInput.length;)sEnc1=this.sKeyStr.indexOf(sInput.charAt(iCnt++)),sEnc2=this.sKeyStr.indexOf(sInput.charAt(iCnt++)),sEnc3=this.sKeyStr.indexOf(sInput.charAt(iCnt++)),sEnc4=this.sKeyStr.indexOf(sInput.charAt(iCnt++)),sChr1=sEnc1<<2|sEnc2>>4,sChr2=(15&sEnc2)<<4|sEnc3>>2,sChr3=(3&sEnc3)<<6|sEnc4,sResult+=String.fromCharCode(sChr1),64!==sEnc3&&(sResult+=String.fromCharCode(sChr2)),64!==sEnc4&&(sResult+=String.fromCharCode(sChr3));return sResult}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},getFunctionFromName:function(str){var pieces,i,func=window[str];if("function"==typeof func)return func;for(pieces=str.split("."),func=window[pieces[0]],i=1;func&&i<pieces.length;)func=func[pieces[i]],i++;return func}};if(document.querySelector?uiUtil.query=function(selector,node,options){var settings=null;try{if("boolean"!=typeof(settings=options&&"object"==typeof options?options:{}).single&&(settings.single=!1),void 0===node)node=document;else if(!node)return settings.single?null:[];return settings.single?node.querySelector(selector):uiUtil.toArray(node.querySelectorAll(selector))}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),settings&&!0===settings.single?null:[]}}:uiUtil.query=function(sSelector,oNode,oOptions){try{var oSettings,aSelectors,sTagName,sProperty,oElem,i,aElements=[];if(!sSelector||"string"!=typeof sSelector)return null;for(aSelectors=sSelector.replace(/\s*\,\s*/,",").split(","),oNode=oNode||document,oSettings=oOptions||{single:!1},i=0;i<aSelectors.length;)-1<(sSelector=aSelectors[i]).indexOf(".")?(sTagName=sSelector.split(".")[0]||"*",sProperty=sSelector.split(".")[1]||"",aElements=aElements.concat(uiUtil.getElementsByClassName(oNode,sTagName,sProperty))):-1<sSelector.indexOf("#")?(sProperty=sSelector.substr(sSelector.indexOf("#")+1),(oElem=document.getElementById(sProperty))&&aElements.push(oElem)):aElements=/^([\w\-]+)?\[[\w\-]+(\W?\=\".*\")?\]$/.test(sSelector)?aElements.concat(uiUtil.getElementsByAttribute(sSelector,oNode)):aElements.concat(uiUtil.toArray(oNode.getElementsByTagName(sSelector))),i++;return aElements=aElements.filter(function(value,index,self){return self.indexOf(value)===index}),!0===oSettings.single?aElements.length?aElements[0]:null:aElements}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),oOptions&&!0===oOptions.single?null:[]}},uiUtil.queryOne=function(selector,node,options){try{var result;return options||(options={}),document.querySelectorAll?(options.single=!0,uiUtil.query(selector,node,options)):(result=uiUtil.query(selector,node,options))&&result.length?result[0]:null}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),null}},function(){var proto,nativeMethod;try{proto=Element.prototype,nativeMethod=proto.matches||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector}catch(e){}uiUtil.matchesSelector=nativeMethod?function(elem,selector){return nativeMethod.call(elem,selector)}:function(elem,selector){var nodes,i;if(!elem||!elem.parentNode)return!1;for(nodes=uiUtil.query(selector,elem.parentNode),i=0;i<nodes.length;i++)if(nodes[i]===elem)return!0;return!1}}(),"undefined"!=typeof document&&document.documentElement&&"classList"in document.documentElement?(uiUtil.css.addClass=function(oSender,sClassName){try{return!oSender.classList.add(sClassName)}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},uiUtil.css.removeClass=function(oSender,sClassName){try{return!oSender.classList.remove(sClassName)}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},uiUtil.css.hasClass=function(oSender,sClassName){try{return oSender.classList.contains(sClassName)}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}}):(uiUtil.css.addClass=function(oSender,sClassName){try{return!oSender&&window.event&&(oSender=window.event.srcElement),oSender&&"string"==typeof sClassName?(oSender.className?uiUtil.css.hasClass(oSender,sClassName)||(oSender.className=oSender.className.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")+" "+sClassName):oSender.className=sClassName,!0):!1}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},uiUtil.css.removeClass=function(oSender,sClassName){try{var oRegExp;return!oSender&&window.event&&(oSender=window.event.srcElement),oSender?!(!oSender.className||"string"!=typeof sClassName)&&(!!uiUtil.css.hasClass(oSender,sClassName)&&(oRegExp=new RegExp("(^|\\s)"+sClassName+"(\\s|$)","g"),oSender.className=oSender.className.replace(oRegExp," ").replace(/\s+/g," ").replace(/^\s|\s$/g,""),!0)):!1}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},uiUtil.css.hasClass=function(oSender,sClassName){try{return!oSender&&window.event&&(oSender=window.event.srcElement),oSender.className&&"string"==typeof sClassName?-1<(" "+oSender.className+" ").indexOf(" "+sClassName+" "):null}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}}),"undefined"!=typeof document&&document.documentElement&&"function"==typeof document.documentElement.hasAttribute?uiUtil.hasAttribute=function(elem,attr){try{return elem.hasAttribute(attr)}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}}:uiUtil.hasAttribute=function(elem,attr){try{return/^for$/i.test(attr)&&"LABEL"===elem.nodeName&&null===elem.getAttribute(attr)?0<elem.htmlFor.length:/^string$|^function$|^number$/.test(typeof elem.getAttribute(attr))}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},function(){var NODE_NAME_PATTERNS={input:/^input$|^textarea$/i,checkableInput:/^checkbox$|^radio$/i,select:/^select$/i,button:/^button$/i},TEXT_PROPERTY="string"==typeof document.documentElement.textContent?"textContent":"innerText",DEFAULT_SETTINGS={text:{truthy:"Yes",falsy:"No"},ignorePattern:{select:/^Select\s.+$/}};uiUtil.getValueAsText=function(elem,options){var returnValue="";try{var settings;if(!elem||"element"!==uiUtil.typeOf(elem))return"";settings=uiUtil.extend(!0,{},DEFAULT_SETTINGS,options),NODE_NAME_PATTERNS.input.test(elem.nodeName)?returnValue=NODE_NAME_PATTERNS.checkableInput.test(elem.type)?elem.checked?settings.text.truthy:settings.text.falsy:uiUtil.trim(elem.value):NODE_NAME_PATTERNS.select.test(elem.nodeName)?(returnValue=uiUtil.trim(elem.options[elem.selectedIndex].innerHTML),settings.ignorePattern.select.test(returnValue)&&(returnValue="")):returnValue=NODE_NAME_PATTERNS.button.test(elem.nodeName)?uiUtil.trim(elem.options[elem.selectedIndex][TEXT_PROPERTY]):uiUtil.trim(elem[TEXT_PROPERTY].replace(/&nbsp;/g," ").replace(/<\/?br\/?\s*>/gi,"\n"))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments),returnValue=""}finally{return returnValue}}}(),uiUtil.cookie={},uiUtil.cookie.get=function(key){try{return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(key).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),""}},uiUtil.cookie.set=function(key,value){try{return!(!key||/^(?:expires|max\-age|path|domain|secure)$/i.test(key))&&(document.cookie=encodeURIComponent(key)+"="+encodeURIComponent(value),!0)}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),""}},void 0===List){var List=function(){try{var i,aArgs=arguments,iArgs=aArgs.length;if(this.length=0,this.isSafeKeyName=function(sKey){return!!/string|number/i.test(typeof sKey)&&(!!(sKey+="").length&&(!this[sKey]||["get","set","push","isSet","forEach","remove","length","getLength","indexOf","isSafeKeyName"].indexOf(sKey)<0))},1<iArgs&&iArgs%2==0){for(i=0;i<iArgs;)this.set(aArgs[i],aArgs[i+1]),i+=2;this.length=i}else if(1===iArgs&&"object"===uiUtil.typeOf(aArgs[0]))return(i=uiUtil.extend(!0,{},new List,aArgs[0])).length=i.getLength()-1,i;return this}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),null}};List.prototype={get:function(sKey){var mReturnVal;try{sKey&&this.isSafeKeyName(sKey)&&this.hasOwnProperty(sKey)&&(mReturnVal=this[sKey])}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return mReturnVal}},set:function(sKey,mValue){var iReturnVal=-1;try{this.isSafeKeyName(sKey)&&(this.hasOwnProperty(sKey)||this.length++,this[sKey]=mValue,iReturnVal=this.length)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return iReturnVal}},push:function(sKey,mValue){var iReturnVal=-1;try{iReturnVal=this.set(sKey,mValue)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return iReturnVal}},isSet:function(sKey){try{return void 0!==this.get(sKey)}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},forEach:function(fFunction){try{var sKey;if("function"!=typeof fFunction||this.length<1)return!1;for(sKey in this)this.isSafeKeyName(sKey)&&this.hasOwnProperty(sKey)&&(f=fFunction,v=this[sKey],f(v,sKey,this));return!0}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}var f,v},remove:function(sKey){try{return sKey&&"string"==typeof sKey&&(this.isSafeKeyName(sKey)&&this.hasOwnProperty(sKey))?(delete this[sKey],this.length--,this.length):-1}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),-1}},indexOf:function(mValue){var mReturnVal="";try{var sKey;if(void 0!==mValue)for(sKey in this)if(this.isSafeKeyName(sKey)&&this.hasOwnProperty(sKey)&&this[sKey]===mValue){mReturnVal=sKey;break}}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return mReturnVal}},getLength:function(){var iReturnVal=-1;try{var sKey,iTotal=0;for(sKey in this)this.isSafeKeyName(sKey)&&this.hasOwnProperty(sKey)&&iTotal++;this.length=iTotal,iReturnVal=this.length}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return iReturnVal}}}}uiUtil.getSelector=function(elem){var selector;return elem&&1===elem.nodeType?(selector=elem.nodeName.toLowerCase(),elem.id&&(selector+="#"+elem.id),elem.className&&uiUtil.trim(elem.className," ").split(" ").forEach(function(c){selector+="."+c}),elem.value&&(selector+='[value="'+uiUtil.trim(elem.value)+'"]'),selector):""};var uiIncludes={modeToggleLinks:{desktop:{id:"Desktop",label:"Desktop Version",url:"#",containerClass:"noresponsive-link-wrapper",cssClass:"noresponsive-link",title:"Switch to the desktop version of the site",target:"blank"},mobile:{id:"Mobile",label:"Mobile Version",url:"#",containerClass:"responsive-link-wrapper",title:"Switch to the mobile version of the site",target:"blank"}},header:{setup:function(){return""}}};uiIncludes.banners={oBannerJSON:{bannerSection:{bannerLinks:[{id:"support",cssClass:"",label:"Support",url:"https://www.tax.ny.gov/e-services/otc/help/tips_os.htm",title:"This will open a new window to the support page",target:"blank"},{id:"contactUs",cssClass:"",label:"Contact us",url:"https://www.tax.ny.gov/help/contact/",title:"This will open a new window to the contact us page",target:"blank"}]},navigationLinks:[{id:"home",label:"Home",url:"https://www.tax.ny.gov/",title:"This will open a new window to the NYS Department of Taxation and Finance home page",target:"blank",position:"left"},{id:"help",label:"Help",url:"https://nystax.custhelp.com/app/answers/list/c/83",title:"This will open a new window to Help",target:"blank",position:"right"}]},oDefaultSettings:{bRenderDTFBanner:!0,bRenderOFTBanner:!0,bRenderNavHeader:!0,returnHTML:!1,doInsert:!1},getHTML:{dtf:function(){try{var sHTML="";return sHTML+='<div class="frg-banner-title"><a href="https://www.tax.ny.gov" target="_blank" onclick="PLUGIN.tracking.trackEvent(\'BannerDesktop\', \'Link click\', \'Department of Taxation and Finance\');">Department of Taxation and Finance</a></div><div class="frg-banner-links"><ul>',uiIncludes.banners.oBannerJSON.bannerSection.bannerLinks.forEach(function(item){sHTML+='<li class="'+item.cssClass+'"><a href="'+item.url+'" title="'+item.title+"\" onclick=\"PLUGIN.tracking.trackEvent('BannerDesktop', 'Link click', '"+item.label+'\');" target="'+uiGlobal.sTargetEnum[item.target]+'">'+item.label+"</a></li>"}),sHTML+="</ul></div>"}catch(e){}},navHeader:function(){try{var sListItemClass,oJSON=uiIncludes.banners.oBannerJSON,iItems=oJSON.navigationLinks.length,iCount=iItems-1,bLeft=!1,bRight=!1,sHTML="";for(sHTML='<div id="navHeader">';iItems--;){switch(sListItemClass="",oJSON.navigationLinks[iCount-iItems].position){case"left":bLeft||(sHTML+='<div id="navLeft"><ul>',bLeft=!0,sListItemClass=' class="navHeaderFirstLink"');break;case"right":bRight||(sHTML+='</ul></div><div id="navRight"><ul>',bRight=!0,sListItemClass=' class="navHeaderFirstLink"')}0===iItems&&(sListItemClass=' class="navHeaderFirstLink navHeaderLastLink" style="border-right-width:0px;"'),sHTML+="<li><a"+sListItemClass+'  href="'+oJSON.navigationLinks[iCount-iItems].url+'" title="'+oJSON.navigationLinks[iCount-iItems].title+'" target="'+uiGlobal.sTargetEnum[oJSON.navigationLinks[iCount-iItems].target]+'">'+oJSON.navigationLinks[iCount-iItems].label+"</a></li>"}return sHTML+="</ul></div></div>"}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},renderUNav:function(){try{var iframeContainer;document.getElementById("nygovBanner")||((iframeContainer=document.createElement("div")).id="nygovBanner",iframeContainer.className="gov-bar",iframeContainer.innerHTML='<div class="gov-wrap"><iframe id="nygov-universal-navigation-frame" class="nygov-universal-container" width="100%" height="86px" src="'+uiGlobal.assets.urls.unav.banner+'" data-updated="2014-11-07 08:30" frameborder="0" style="border:none; overflow:hidden; width:100%; height:86px;" scrolling="no">Your browser does not support iFrames</iframe></div>',document.body.insertBefore(iframeContainer,document.body.firstChild),setTimeout(uiIncludes.banners.trackUnavHeight,500),setTimeout(uiIncludes.banners.trackUnavHeight,1500),setTimeout(uiIncludes.banners.trackUnavHeight,3e3))}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},uNavBannerDefaultHeight:86,uNavBannerLastHeight:86,trackUnavHeight:function(){var currHeight=parseInt(document.getElementById("nygov-universal-navigation-frame").style.height,10);return(isNaN(currHeight)||currHeight<uiIncludes.banners.uNavBannerDefaultHeight)&&(currHeight=uiIncludes.banners.uNavBannerDefaultHeight),currHeight!==uiIncludes.banners.uNavBannerLastHeight&&((uiIncludes.banners.uNavBannerLastHeight=currHeight)-2,uiUtil.css.addRule("#navHeader {top: "+(48+currHeight)+"px;}"),!0)},hasDisplayed:!1,display:function(oOptions){try{var oDefaults,oSettings;!uiUtil.css.hasClass(document.documentElement,"bp-desktop")&&uiGlobal.isResponsiveEnabled&&(uiIncludes.banners.hasDisplayed||uiUtil.browser.isResponsive&&uiUtil.browser.isSmallScreen)||(oDefaults={bRenderNavHeader:!1},oSettings=uiUtil.extend(!0,{},uiIncludes.banners.oDefaultSettings,oDefaults,oOptions),uiIncludes.banners.oDefaultSettings=oSettings,uiIncludes.banners.renderXHTML(oSettings),uiIncludes.banners.hasDisplayed=!0)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}},append:function(html){var bannerContainer,existingBanner,insertElem;if(!uiIncludes.banners.oDefaultSettings.bRenderDTFBanner)return uiUtil.css.removeClass(document.documentElement,"frg-banner-not-loaded"),!1;bannerContainer=document.createElement("div"),(existingBanner=uiUtil.queryOne(".frg-banner")||document.getElementById("bannerContainer"))&&existingBanner.parentNode.removeChild(existingBanner),(bannerContainer=document.createElement("div")).id="frg-banner",bannerContainer.className="frg-banner",(insertElem=document.getElementById("nygovBanner"))?insertElem.parentNode.insertBefore(bannerContainer,insertElem.nextSibling):(insertElem=document.getElementById("pageContainer"))&&insertElem.parentNode.insertBefore(bannerContainer,insertElem.previousSibling),uiUtil.css.removeClass(document.documentElement,"frg-banner-not-loaded"),html||(html=uiIncludes.banners.renderXHTML({returnHTML:!0})),bannerContainer.innerHTML=html},appendPlaceholder:function(html){var bannerContainer,insertElem;if(!uiIncludes.banners.oDefaultSettings.bRenderDTFBanner)return!1;bannerContainer=document.createElement("div"),insertElem=document.body.firstChild,bannerContainer.id="frg-banner",bannerContainer.className="frg-banner",insertElem.parentNode.insertBefore(bannerContainer,insertElem.nextSibling),uiUtil.css.removeClass(document.documentElement,"frg-banner-not-loaded"),bannerContainer.innerHTML=html},renderXHTMLHasRun:!1,renderXHTML:function(oOptions){try{var oSettings=uiUtil.extend(!0,{},uiIncludes.banners.oDefaultSettings,oOptions),bannerContainer=uiUtil.queryOne(".frg-banner"),navHeader=document.getElementById("navHeader"),sHTML="";if(oSettings.bRenderDTFBanner||(uiIncludes.banners.oDefaultSettings.bRenderDTFBanner=!1,uiUtil.css.addClass(document.documentElement,"no-frg-banner")),oSettings.bRenderNavHeader||navHeader?uiUtil.css.removeClass(document.documentElement,"no-nav-header"):uiUtil.css.addClass(document.documentElement,"no-nav-header"),bannerContainer&&!uiUtil.browser.isOldIE&&(bannerContainer.innerHTML?(bannerContainer.innerHTML="",uiUtil.query(".frg-banner").forEach(function(banner,i){0!==i&&banner.parentNode.removeChild(banner)})):bannerContainer.innerHTML=""),(oSettings.bRenderOFTBanner||oSettings.bRenderDTFBanner)&&(oSettings.bRenderOFTBanner&&uiIncludes.banners.renderUNav(),oSettings.bRenderDTFBanner&&(sHTML+=uiIncludes.banners.getHTML.dtf())),oSettings.bRenderNavHeader&&(sHTML+=uiIncludes.banners.getHTML.navHeader()),oSettings.returnHTML)return sHTML;uiGlobal.hasLoaded?uiIncludes.banners.append(sHTML):window.attachEvent||"function"!=typeof domready?uiIncludes.banners.renderXHTMLHasRun||(uiIncludes.banners.renderXHTMLHasRun=!0,uiIncludes.banners.appendPlaceholder(sHTML),uiUtil.attachEvent(window,"load",function(){uiIncludes.banners.append(sHTML)})):domready(function(){uiIncludes.banners.append(sHTML)})}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},uiIncludes.footer={bShowTermsAndConditions:!1,bSuppressDTFLinks:!1,oDefaultSettings:{returnHTML:!1,returnElement:!1},oFooterJSON:{links:[{id:"Accessibility",label:"Accessibility",url:"https://www.tax.ny.gov/help/tech/accessibility.htm",title:"This will open a new window to the Web Site Accessibility page",target:"blank"},{id:"Disclaimer",label:"Disclaimer",url:"https://www.tax.ny.gov/help/tech/disclaimer.htm",title:"This will open a new window to the Web Site Disclaimer page",target:"blank"},{id:"Privacy",label:"Privacy",url:"https://www.tax.ny.gov/help/tech/privacy_policy.htm",title:"This will open a new window to the Privacy Policy page",target:"blank"},{id:"Security",label:"Security",url:"https://www.tax.ny.gov/help/tech/securesite.htm",title:"This will open a new window to the Web Site Security page",target:"blank"},{id:"TermsAndConditions",label:"Terms and Conditions",url:"https://www.tax.ny.gov/e-services/otc/terms_and_conditions.htm",title:"This will open a new window to the Terms And Conditions page",target:"blank"},{id:"Copyright",label:"Copyright",url:"https://www.tax.ny.gov/help/tech/copyright.htm",title:"This will open a new window to the Copyright page",target:"blank"},{id:"EmailPhishing",label:"Email/Phishing",url:"https://www.tax.ny.gov/help/tech/email_phishing.htm",title:"This will open a new window to the Email/Phishing page",target:"blank"}]},renderXHTML:function(oOptions){try{var settings=uiUtil.extend(!0,{},uiIncludes.footer.oDefaultSettings,oOptions),links=uiIncludes.footer.oFooterJSON.links,footer=document.createElement("div"),footerCenter=document.createElement("div"),footerIframe=document.createElement("div"),list=document.createElement("ul");if(footer.id="footer",footerCenter.id="footerCenter",links[links.length-1].containerClass="lastItem",settings.bSuppressDTFLinks||links.forEach(function(link){var listItem=document.createElement("li"),anchor=document.createElement("a");if("TermsAndConditions"===link.id&&!0!==uiIncludes.footer.bShowTermsAndConditions)return!1;anchor.href=link.url,anchor.title=link.title,anchor.setAttribute("target",uiGlobal.sTargetEnum[link.target]),anchor.innerHTML=link.label,anchor.setAttribute("onclick",'PLUGIN.tracking.trackEvent("footer", "Link click", "'+link.label+'")'),link.containerClass&&uiUtil.css.addClass(listItem,link.containerClass),listItem.appendChild(anchor),list.appendChild(listItem)}),footerCenter.appendChild(list),footer.appendChild(footerCenter),footerIframe.id="nygovFooter",footerIframe.innerHTML='<iframe id="nygov-universal-footer-frame" class="nygov-universal-container" width="100%" height="200px" src="'+uiGlobal.assets.urls.unav.footer+'" data-updated="2014-11-07 08:30" frameborder="0" style="border:none; overflow:hidden; width:100%; height:200px;" scrolling="no">Your browser does not support iFrames</iframe>',footer.appendChild(footerIframe),settings.returnHTML)return footer.outerHTML;if(settings.returnElement)return footer;document.write(footer.outerHTML)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},uiUtil.css.addClass(document.documentElement,"frg-banner-not-loaded");var uiResponsive=function(){var du={browser:uiUtil.browser,query:uiUtil.query,queryOne:uiUtil.queryOne,addClass:uiUtil.css.addClass,removeClass:uiUtil.css.removeClass,hasClass:uiUtil.css.hasClass,cookie:uiUtil.cookie,trim:uiUtil.trim,getParentElem:uiUtil.getParentElem,event:{add:uiUtil.attachEvent,stop:uiUtil.stopEvent},extend:uiUtil.extend,matches:uiUtil.matches,establishElementId:uiUtil.establishElementId,logError:uiUtil.errorHandling.jsLog.addEntry},BREAKPOINTS={small:{minWidth:1,maxWidth:719,match:function(){uiUtil.css.addClass(document.documentElement,"bp-small")},unmatch:function(){uiUtil.css.removeClass(document.documentElement,"bp-small")},classname:"bp-small"},medium:{minWidth:720,maxWidth:829,match:function(){uiUtil.css.addClass(document.documentElement,"bp-medium")},unmatch:function(){uiUtil.css.removeClass(document.documentElement,"bp-medium")},classname:"bp-medium"},main:{minWidth:1,maxWidth:829,match:function(){uiGlobal.isResponsiveEnabled=!0,uiUtil.css.addClass(document.documentElement,"bp-main"),uiUtil.css.addClass(document.documentElement,"responsive"),uiUtil.css.removeClass(document.documentElement,"req-no-responsive"),uiUtil.css.removeClass(document.documentElement,"no-responsive"),domready(uiResponsive.setupBanner),domready(uiResponsive.table.form.setup),domready(uiResponsive.table.nav.setup),domready(uiResponsive.table.action.setup),domready(uiResponsive.table.radio.setup),domready(uiResponsive.progressbar.setup),Modernizr.touch&&domready(uiResponsive.inputSwitch.setup),PLUGIN.collapsible&&domready(priv.collapseInstructions)},unmatch:function(){},classname:"bp-main"},desktop:{minWidth:830,maxWidth:99999,match:function(){uiGlobal.isResponsiveEnabled=!1,uiUtil.css.addClass(document.documentElement,"bp-desktop"),uiUtil.css.removeClass(document.documentElement,"bp-main"),uiUtil.css.removeClass(document.documentElement,"responsive"),uiUtil.css.addClass(document.documentElement,"no-responsive"),uiResponsive.banner&&(domready(uiResponsive.banner.teardown),domready(priv.setupDesktopBanner)),domready(uiResponsive.table.form.teardown),domready(uiResponsive.table.nav.teardown),domready(uiResponsive.table.radio.teardown),uiResponsive.progressbar&&domready(uiResponsive.progressbar.teardown),domready(uiResponsive.inputSwitch.teardown)},unmatch:function(){uiUtil.css.removeClass(document.documentElement,"bp-desktop")},classname:"bp-desktop"},bodyMargin:{minWidth:820,maxWidth:829,match:function(){uiUtil.css.addClass(document.documentElement,"bp-body-margin")},unmatch:function(){uiUtil.css.removeClass(document.documentElement,"bp-body-margin")},classname:"bp-body-margin"},large:{minWidth:960,maxWidth:99999,match:function(){uiUtil.css.addClass(document.documentElement,"bp-large")},unmatch:function(){uiUtil.css.removeClass(document.documentElement,"bp-large")},classname:"bp-large"},gridSmall:{minWidth:1,maxWidth:599,match:function(){uiUtil.css.addClass(document.documentElement,"bp-grid-small")},unmatch:function(){uiUtil.css.removeClass(document.documentElement,"bp-grid-small")},classname:"bp-grid-small"},gridMedium:{minWidth:600,maxWidth:829,match:function(){uiUtil.css.addClass(document.documentElement,"bp-grid-medium")},unmatch:function(){uiUtil.css.removeClass(document.documentElement,"bp-grid-medium")},classname:"bp-grid-medium"}},ID_VALUES_msViewport="ms-viewport",priv={},events={},_setupBanner=function(){try{du.browser.isResponsive&&window.matchMedia("(max-width: "+BREAKPOINTS.main.maxWidth+"px)").matches?(document.documentElement.classList.add("banner-loading"),uiResponsive.banner?uiResponsive.banner.setup():Modernizr.load([{load:uiGlobal.assets.urls.banner,callback:function(){window.matchMedia("(max-width: "+BREAKPOINTS.main.maxWidth+"px)").matches&&(void 0!==uiResponsive.banner?domready(uiResponsive.banner.setup):setTimeout(function(){void 0!==uiResponsive.banner?domready(uiResponsive.banner.setup):setTimeout(function(){void 0!==uiResponsive.banner&&domready(uiResponsive.banner.setup)},500)},20))}}])):(du.browser.isResponsive&&domready(priv.setupDesktopBanner),du.browser.isResponsive&&!uiResponsive.banner&&Modernizr.load([{load:uiGlobal.assets.urls.banner,callback:function(){uiResponsive.banner&&window.matchMedia("(max-width: "+BREAKPOINTS.main.maxWidth+"px)").matches&&domready(uiResponsive.banner.setup)}}]))}catch(e){du.logError(e,arguments)}},_onDesktopRequestClick=function(evt){try{var action="Request desktop";priv.turnOffResponsive({banner:!0}),du.event.stop(evt),du.getParentElem(evt.target,".nav-container")&&(action+=" (Menu)"),PLUGIN.tracking.trackEvent("responsive",action,navigator.userAgent)}catch(e){du.logError(e,arguments)}};return priv.init=function(){priv.addViewportTag(),window.matchMedia("(max-width: "+BREAKPOINTS.main.maxWidth+"px)").matches&&(document.documentElement.classList.add("responsive"),document.documentElement.classList.remove("no-responsive"),document.documentElement.classList.remove("req-no-responsive")),"undefined"!=typeof enquire&&priv.setupBreakpoints(),uiGlobal.isResponsiveEnabled=!0,domready(priv.onDOMReady),Modernizr.load([{test:Modernizr.touch&&"undefined"==typeof FastClick,yep:uiGlobal.assets.urls.fastclick,callback:function(){"function"==typeof FastClick?domready(function(){FastClick(document.body)}):setTimeout(function(){"function"==typeof FastClick?domready(function(){FastClick(document.body)}):setTimeout(function(){"function"==typeof FastClick&&domready(function(){FastClick(document.body)})},500)},20)}}]),domready(priv.addMobileVersionLink)},priv.addViewportTag=function(){var msViewport,meta=document.createElement("meta");return meta.setAttribute("name","viewport"),meta.setAttribute("content","width=device-width,initial-scale=1"),document.head.appendChild(meta),du.browser.isNewIE&&((msViewport=document.createElement("style")).id=ID_VALUES_msViewport,msViewport.type="text/css",msViewport.appendChild(document.createTextNode("@-ms-viewport { width: device-width; } body {overflow-y: auto;}")),document.head.appendChild(msViewport)),meta},priv.isDesktopRequested=function(){var currentSetting=du.cookie.get("noresponsive");return currentSetting?"true"===currentSetting:(du.cookie.set("noresponsive","false"),!1)},priv.onDOMReady=function(){window.matchMedia("(max-width: "+BREAKPOINTS.main.maxWidth+"px)").matches?PLUGIN.collapsible&&priv.collapseInstructions():priv.setupDesktopBanner(),priv.addDesktopVersionLink(),events.setup()},priv.setupBreakpoints=function(){var bp,breakpoint,mediaQuery,settings;for(bp in BREAKPOINTS)BREAKPOINTS.hasOwnProperty(bp)&&((breakpoint=BREAKPOINTS[bp]).match||breakpoint.unmatch)&&(settings={},mediaQuery="screen","number"==typeof breakpoint.minWidth&&(mediaQuery+=" and (min-width: "+breakpoint.minWidth+"px)",settings.match=breakpoint.match),"number"==typeof breakpoint.maxWidth&&(mediaQuery+=" and (max-width: "+breakpoint.maxWidth+"px)",settings.unmatch=breakpoint.unmatch),enquire.register(mediaQuery,settings))},priv.hasCollapsedInstructions=!1,priv.collapseInstructions=function(){var settings,labelHTML='<span class="collapsible-toggle-image"></span><span class="collapsible-toggle-label">Instructions</span>';if(priv.hasCollapsedInstructions)return!1;document.getElementById("errorPageMessage")||((settings=PLUGIN.collapsible.getDefaultSettings()).selector="#pageInstructions",settings.toggle.label.collapsed=labelHTML,settings.toggle.label.expanded=labelHTML,PLUGIN.collapsible.setup(settings),priv.hasCollapsedInstructions=!0)},priv.addDesktopVersionLink=function(){var container,button,linkObject,footer=document.getElementById("footerCenter");return!!footer&&(linkObject=uiIncludes.modeToggleLinks.desktop,!du.query("."+linkObject.cssClass.split(" ")[0],footer).length&&((button=document.createElement("button")).type="button",button.href=linkObject.url,button.title=linkObject.title,button.setAttribute("target",uiGlobal.sTargetEnum[linkObject.target]),button.className=linkObject.cssClass,button.innerHTML=linkObject.label,(container=document.createElement("div")).className=linkObject.containerClass,container.appendChild(button),void footer.insertBefore(container,footer.childNodes[0])))},priv.addMobileVersionLink=function(){var container,button,linkObject,footer=document.getElementById("footerCenter");return!!footer&&(linkObject=uiIncludes.modeToggleLinks.mobile,!du.queryOne("."+linkObject.containerClass)&&((button=document.createElement("button")).type="button",button.href=linkObject.url,button.title=linkObject.title,button.setAttribute("target",uiGlobal.sTargetEnum[linkObject.target]),button.innerHTML=linkObject.label,button.addEventListener("click",events.onRequestResponsiveClick,!1),(container=document.createElement("div")).className=linkObject.containerClass,container.appendChild(button),void footer.insertBefore(container,footer.childNodes[0])))},priv.setupDesktopBanner=function(){var banner=du.queryOne(".frg-banner");return!(banner&&(!banner||du.trim(banner.innerHTML)))&&(uiIncludes.banners.hasDisplayed=!1,uiIncludes.banners.display({bRenderNavHeader:!1,doInsert:!0}),!0)},priv.turnOffResponsive=function(opts){du.browser.isResponsive=!1,uiGlobal.isResponsiveEnabled=!1,du.cookie.set("noresponsive","true"),domready(priv.removeViewportTag),document.documentElement.classList.add("no-responsive"),document.documentElement.classList.remove("responsive"),document.documentElement.classList.add("req-no-responsive"),priv.destroyBreakpoints(),uiResponsive.banner&&domready(uiResponsive.banner.teardown),domready(uiResponsive.inputSwitch.teardown),domready(uiResponsive.progressbar.teardown),PLUGIN.collapsible&&(domready(PLUGIN.collapsible.teardown),priv.hasCollapsedInstructions=!1),domready(uiResponsive.table.form.teardown),domready(uiResponsive.table.nav.teardown),domready(uiResponsive.table.radio.teardown),domready(priv.addMobileVersionLink),opts&&!0===opts.banner&&(domready(priv.setupDesktopBanner),domready(function(){var banner=document.getElementById("bannerContainer");banner&&(banner.style.marginLeft="0")})),window.scrollTo(0,0)},priv.removeViewportTag=function(){var msViewport,meta=du.queryOne('meta[name="viewport"]');return!!meta&&(meta.parentNode.removeChild(meta),du.browser.isNewIE&&(msViewport=document.getElementById(ID_VALUES_msViewport))&&msViewport.parentNode.removeChild(msViewport),!0)},priv.destroyBreakpoints=function(){var bp,breakpoint,mediaQuery;for(bp in BREAKPOINTS)BREAKPOINTS.hasOwnProperty(bp)&&(((breakpoint=BREAKPOINTS[bp]).match||breakpoint.unmatch)&&(mediaQuery="screen","number"==typeof breakpoint.minWidth&&(mediaQuery+=" and (min-width: "+breakpoint.minWidth+"px)"),"number"==typeof breakpoint.maxWidth&&(mediaQuery+=" and (max-width: "+breakpoint.maxWidth+"px)"),enquire.unregister(mediaQuery),"function"==typeof breakpoint.unmatch&&breakpoint.unmatch()),breakpoint.classname&&document.documentElement.classList.remove(breakpoint.classname))},events.setup=function(){du.query(".noresponsive-link").forEach(function(a){a.addEventListener("click",_onDesktopRequestClick,!1)})},events.onRequestResponsiveClick=function(evt){du.cookie.set("noresponsive","false"),du.browser.isResponsive=!0,document.documentElement.classList.remove("no-responsive"),priv.init(),priv.addDesktopVersionLink(),du.event.stop(evt),PLUGIN.tracking.trackEvent("responsive","Request mobile",navigator.userAgent)},{setup:function(){try{var requestedDesktop=priv.isDesktopRequested();return du.browser.isResponsive?requestedDesktop?priv.turnOffResponsive():priv.init():(uiGlobal.isResponsiveEnabled=!1,priv.removeViewportTag(),_setupBanner()),uiGlobal.isResponsiveEnabled}catch(e){du.logError(e,arguments)}},setupBanner:_setupBanner,getBreakpoints:function(){return du.extend(!0,{},BREAKPOINTS)},table:{},events:{onDesktopRequestClick:_onDesktopRequestClick}}}();uiUtil.browser.responsiveInit();var uiAnimate=function(){var CLASSES_hidden="hidden",TRANSITION_height={value:"height"},ATTRIBUTES={storeOverflow:"data-animate-overflow",finalValue:"data-animate-final-value"},DEFAULT_SETTINGS={finalValue:-1,duration:"100ms",timingFunction:"ease-in-out"},du={browser:uiUtil.browser,addClass:uiUtil.css.addClass,removeClass:uiUtil.css.removeClass,hasClass:uiUtil.css.hasClass,typeOf:uiUtil.typeOf,extend:uiUtil.extend,logError:uiUtil.errorHandling.jsLog.addEntry},priv={},height={},events={};return height.expandElement=function(elem,settings){var parent,startHeight,endHeight;if(!du.hasClass(elem,CLASSES_hidden)&&-1===settings.finalValue)return!1;du.removeClass(elem,CLASSES_hidden),du.browser.supports.animation?(-1!==settings.finalValue?(endHeight=settings.finalValue,elem.setAttribute(ATTRIBUTES.finalValue,settings.finalValue),(startHeight=getComputedStyle(elem).height)===endHeight&&(startHeight="0px")):(elem.style.height="auto",endHeight=getComputedStyle(elem).height,startHeight="0px"),elem.style.height=startHeight,elem.style.overflow="hidden",parent=elem.parentNode,du.browser.isFirefox||"BODY"===parent.nodeName||(parent.setAttribute(ATTRIBUTES.storeOverflow,parent.style.overflow),parent.style.overflow="hidden"),elem.offsetHeight,elem.style.transition=TRANSITION_height.value+" "+settings.duration+" "+settings.timingFunction,elem.addEventListener(du.browser.eventNames.transitionEnd,events.height.onShowTransitionEnd,!1),"function"==typeof settings.callback&&elem.addEventListener(du.browser.eventNames.transitionEnd,function(){settings.callback(elem,settings)},!1),elem.style.height=endHeight):(elem.style.height="auto",priv.setAriaAttributes(elem,!1),"function"==typeof settings.callback&&settings.callback(elem,settings))},height.collapseElement=function(elem,settings){var parent;if(du.hasClass(elem,CLASSES_hidden))return!1;du.browser.supports.animation?(elem.style.height=getComputedStyle(elem).height,elem.offsetHeight,elem.style.overflow="hidden",parent=elem.parentNode,du.browser.isFirefox||"BODY"===parent.nodeName||(parent.setAttribute(ATTRIBUTES.storeOverflow,parent.style.overflow),parent.style.overflow="hidden"),elem.addEventListener(du.browser.eventNames.transitionEnd,events.height.onHideTransitionEnd,!1),elem.style.transition=TRANSITION_height.value+" "+settings.duration+" "+settings.timingFunction,elem.addEventListener(du.browser.eventNames.transitionEnd,events.height.onHideTransitionEnd,!1),"function"==typeof settings.callback&&elem.addEventListener(du.browser.eventNames.transitionEnd,function(){settings.callback(elem,settings)},!1),-1!==settings.finalValue?(elem.setAttribute(ATTRIBUTES.finalValue,settings.finalValue),elem.style.height=settings.finalValue):elem.style.height="0px"):(du.addClass(elem,CLASSES_hidden),priv.setAriaAttributes(elem,!0),"function"==typeof settings.callback&&settings.callback(elem,settings))},priv.setAriaAttributes=function(elem,isHidden){isHidden?(elem.setAttribute("aria-expanded","false"),elem.setAttribute("aria-hidden","true")):(elem.setAttribute("aria-expanded","true"),elem.setAttribute("aria-hidden","false"))},events.height={},events.height.onShowTransitionEnd=function(evt){var elem,finalValue;"height"===evt.propertyName&&((elem=evt.target).style.transition="",elem.style.overflow="visible",priv.setAriaAttributes(elem,!1),finalValue=elem.getAttribute(ATTRIBUTES.finalValue),elem.style.height=finalValue||"auto",!du.browser.isFirefox&&elem.parentNode&&(elem.parentNode.style.overflow=elem.parentNode.getAttribute(ATTRIBUTES.storeOverflow)),elem.removeEventListener(du.browser.eventNames.transitionEnd,events.height.onShowTransitionEnd))},events.height.onHideTransitionEnd=function(evt){var elem,finalValue;"height"===evt.propertyName&&((elem=evt.target).style.transition="",(finalValue=elem.getAttribute(ATTRIBUTES.finalValue))?elem.style.height=elem.getAttribute(ATTRIBUTES.finalValue):(elem.style.overflow="visible",elem.style.height="auto"),finalValue&&0!==parseInt(finalValue,10)||(du.addClass(elem,CLASSES_hidden),priv.setAriaAttributes(elem,!0)),!du.browser.isFirefox&&elem.parentNode&&(elem.parentNode.style.overflow=elem.parentNode.getAttribute(ATTRIBUTES.storeOverflow)),elem.removeEventListener(du.browser.eventNames.transitionEnd,events.height.onHideTransitionEnd))},{getDefaultSettings:function(){return du.extend(!0,{},DEFAULT_SETTINGS)},height:{expand:function(elem,options){try{var settings=du.extend(!0,{},DEFAULT_SETTINGS,options);if(!elem||"element"!==du.typeOf(elem))return!1;height.expandElement(elem,settings)}catch(e){du.logError(e,arguments)}},collapse:function(elem,options){try{var settings=du.extend(!0,{},DEFAULT_SETTINGS,options);if(!elem||"element"!==du.typeOf(elem))return!1;height.collapseElement(elem,settings)}catch(e){du.logError(e,arguments)}},toggle:function(elem,options){try{var settings=du.extend(!0,{},DEFAULT_SETTINGS,options);if(!elem||"element"!==du.typeOf(elem))return!1;du.hasClass(elem,CLASSES_hidden)?height.expandElement(elem,settings):height.collapseElement(elem,settings)}catch(e){du.logError(e,arguments)}}}}}();function ResetCheckboxes(o){try{uiMethods.resetCheckboxes(o)}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}function openExternalLink(){try{throw uiUtil.errorHandling.getErrorObj("[Old code]|openExternalLink","UI custom Error")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}finally{return uiMethods.openExternalLink.call(this)}}!function(){try{var appCodeRegex=/\.gov\/([A-Z]{4}(?:\d{2})?)\//;window.attachEvent||"function"!=typeof domready?uiUtil.attachEvent(window,"load",uiEvents.onLoad):domready(uiEvents.onLoad),uiUtil.browser.init(),appCodeRegex.test(window.location.href)&&(uiGlobal.appCode=appCodeRegex.exec(window.location.href)[1]),function(){var elem,text,pageCodeRegex=/^\s*\w+\s+\-\s+\w+\s+\-\s+(\w+)\s+/;if("object"!=typeof document||!document||!document.documentElement)return;for(elem=document.documentElement.firstChild;elem&&!/head|body/.test(elem.nodeName)&&8!==elem.nodeType;)elem=elem.nextSibling;if(!elem)return;(text="string"==typeof elem.textContent?elem.textContent:elem.innerText)&&pageCodeRegex.test(text)&&(uiGlobal.page.code=pageCodeRegex.exec(text)[1],PLUGIN.tracking.trackEvent("app","Page view",uiGlobal.appCode+"|"+uiGlobal.page.code,null,!0))}()}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}();var returnToElement="";function jumpToElement(o){try{throw uiUtil.helpIcons.oReturnTo=o,uiUtil.helpIcons.returnToElement(),uiUtil.errorHandling.getErrorObj("[Old code]|jumpToElement","UI custom Error")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}function copyFieldValues(){try{for(var json,args=copyFieldValues.arguments,i=args.length-1,sJSON='{"fieldsToCopy":[';1<i;)sJSON+='{"source":"'+args[i-1]+'", "dest":"'+args[i]+'"}',2<i&&(sJSON+=","),i-=2;throw sJSON+="]}",json=JSON.parse(sJSON),uiMethods.copyFieldValues(args[0],json),uiUtil.errorHandling.getErrorObj("[Old code]|copyFieldValues","UI custom Error")}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}if(uiMethods.modalDiv={submitDisplay:function(){try{PLUGIN.spinwheel?uiMethods.insertLoadingMessage({bClearBackground:!1}):Modernizr.load({load:uiGlobal.assets.urls.spinwheel,callback:function(){uiMethods.insertLoadingMessage({bClearBackground:!1})}})}catch(e){uiUtil.errorHandling.jsLog.addEntry(e,arguments)}}},uiResponsive.table=function(){var DEFAULT_TABLE={id:"",sourceElem:null,sourceRset:null,targetElem:null,title:"",removeButton:null,instructions:{items:[],toggleElem:null},removeAllCboxId:"",isExpandable:!1,isExpandedView:!1,isCondensedView:!1,isCheckBoxCollection:!1,headers:[],primary:{indices:[],label:""},secondary:{indices:[],label:""},expanded:{indices:[],labels:[]},selection:null,footer:{label:"",data:""}},DEFAULT_TABLE_HEADER_ITEM={elem:null,text:""},DEFAULT_TABLE_INSTRUCTION={label:"",desc:""},DEFAULT_SELECTION_SETTINGS={type:"",index:-1,label:""},CLASSES_hidden="hidden",CLASSES_hideForMain="hide-for-bp-main",CLASSES_primary="table-primary",CLASSES_secondary="table-secondary",CLASSES_selection="table-select",CLASSES_tableTitle="rset_title",CLASSES_ignoreFooter="rwd-ignore-footer",CLASSES_iconButton="icon-button",CLASSES_iconHelp="icon-help",CLASSES_expandable="form-table-expandable",CLASSES_expandedView="form-table-expanded",CLASSES_condensedView="form-table-condensed",CLASSES_checkBoxCollection="checkBoxCollection",CLASSES_emptyRow="empty-row",CLASSES_instToggle="table-inst-toggle",CLASSES_instTooltip="table-inst-tooltip",CLASSES_instLabel="table-inst-label",CLASSES_instDesc="table-inst-desc",CLASSES_instBlock="table-inst",SELECTORS_acceptableResultSets=".rset.form-table,.rset.form-table-expandable,.rset.form-table-expanded,.rset.form-table-condensed,.rset.nav-table,.rset.action-table,.rset.radio-table",SELECTORS_acceptableTable=".rset table",SELECTORS_checkableInput='input[type="checkbox"], input[type="radio"]',SELECTORS_helpIcon=".help, .icon-help",SELECTORS_ignoredHeaderItems=".copyValue",TEXT_totalLabel="Total:",TEXT_instToggle="More information",ATTR_NAMES_tooltip="data-table-tooltip-id",du={query:uiUtil.query,queryOne:uiUtil.queryOne,browser:uiUtil.browser,getParentElem:uiUtil.getParentElem,extend:uiUtil.extend,typeOf:uiUtil.typeOf,establishElementId:uiUtil.establishElementId,trim:uiUtil.trim,matchesSelector:uiUtil.matchesSelector,getElementPosition:uiUtil.getElementPosition,logError:uiUtil.errorHandling.jsLog.addEntry,event:{trigger:uiEvents.trigger}},tables={},hiddenRows={},priv={},_removeRow=function(rowElem){if(!rowElem||"TR"!==rowElem.nodeName)return null;var remainingRows,row,i,tBody=rowElem.parentNode,table=tBody.parentNode,hiddenRowList=[];for(tBody.removeChild(rowElem),remainingRows=tBody.rows,i=0;i<remainingRows.length;i++)if(row=remainingRows[i],uiUtil.css.hasClass(row,CLASSES_hidden)&&uiUtil.css.hasClass(row,CLASSES_emptyRow))hiddenRowList.push(row);else if(!uiUtil.css.hasClass(row,CLASSES_hidden))return;if(0<hiddenRowList.length)hiddenRowList.forEach(function(row){uiUtil.css.removeClass(row,CLASSES_hidden)});else if(hiddenRows&&"element"===uiUtil.typeOf(hiddenRows[table.id])){var storeRow=hiddenRows[table.id];uiUtil.css.removeClass(storeRow,CLASSES_hidden),tBody.appendChild(storeRow)}else priv.createEmptyRow(tBody.parentNode)};priv.createEmptyRow=function(tableElem){var i,tHeadRow=tableElem.tHead.getElementsByTagName("tr"),newRow=tableElem.tBodies[0].insertRow();for(uiUtil.css.addClass(newRow,CLASSES_emptyRow),i=0;i<tHeadRow[0].cells.length;i++)newRow.insertCell().innerHTML="&nbsp;"};return priv.setupRset=function(rset,tableElem){var button,tableInfo,table=du.extend(!0,{},DEFAULT_TABLE);return table.sourceElem=tableElem,table.id=du.establishElementId(table.sourceElem),rset.classList.add(CLASSES_hideForMain),table.sourceRset=rset,table.isCheckBoxCollection=rset.classList.contains(CLASSES_checkBoxCollection),table.isExpandable=rset.classList.contains(CLASSES_expandable),table.isExpandedView=rset.classList.contains(CLASSES_expandedView),table.isCondensedView=rset.classList.contains(CLASSES_condensedView),(tableInfo=du.queryOne("."+CLASSES_tableTitle,rset))&&(table.title=du.trim(tableInfo.innerHTML," ")),(button=du.queryOne('.tableBtnGroupBelow .button[value*="Remove"], .tableBtnGroupBelowNoFooter .button[value*="Remove"]',rset))&&du.queryOne('td:first-child input[type="checkbox"]',table.sourceElem)&&(table.removeButton=button),(table=priv.getHeaders(table)).sourceElem.tFoot&&!rset.classList.contains(CLASSES_ignoreFooter)&&(table=priv.getFooter(table)),table.instructions.items.length&&(table=priv.createInstructions(table)),tables[table.id]=table},priv.getHeaders=function(table){var tableElem=table.sourceElem,headers=[];return du.query("th",tableElem).forEach(function(th,i){var thElem,icon,elem,header=du.extend(!0,{},DEFAULT_TABLE_HEADER_ITEM),inst=null;if(header.elem=th,table.removeButton&&0===i&&(elem=du.queryOne(SELECTORS_checkableInput,th)))return table.removeAllCboxId=du.establishElementId(elem),headers.push(null),!1;thElem=th.cloneNode(!0),(icon=du.queryOne(SELECTORS_helpIcon,thElem))&&((elem=document.getElementById(icon.href.replace(/.+#/,"")))&&(inst=du.extend(!0,{},DEFAULT_TABLE_INSTRUCTION),"H4"===elem.nodeName&&(elem=elem.parentNode),du.query(".topLink",elem).forEach(function(deprecatedElem){deprecatedElem.parentNode.removeChild(deprecatedElem)}),inst.desc=du.trim(elem.innerHTML.replace(/\n/g," ")," ")),icon.parentNode.removeChild(icon)),du.queryOne(SELECTORS_ignoredHeaderItems,thElem)?header.text="":(header.text=thElem.innerHTML.replace(/\s+|\n|&nbsp;/gim," ").replace(/<\/?br\s*\/?>/gi," ").replace(/\s*\(mm\/dd\/yyyy\)/gi,""),header.text=du.trim(header.text," ")),th.classList.contains(CLASSES_primary)?(table.primary.indices.length&&(table.primary.label+=" "),table.primary.label+=header.text,table.primary.indices.push(th.cellIndex)):th.classList.contains(CLASSES_secondary)?(table.secondary.indices.length&&(table.secondary.label+=" "),table.secondary.label+=header.text,table.secondary.indices.push(th.cellIndex)):th.classList.contains(CLASSES_selection)?((icon=du.queryOne("tbody tr:first-child td:first-child input",tableElem))&&du.matchesSelector(icon,SELECTORS_checkableInput)&&((elem=du.queryOne('label[for="'+icon.id+'"]',tableElem))||(elem=th)),icon&&elem&&(table.selection=du.extend(!0,{},DEFAULT_SELECTION_SETTINGS),table.selection.index=i,table.selection.type=icon.type,table.selection.label=du.trim(elem.textContent).toLowerCase())):header.text.length&&(table.expanded.labels[th.cellIndex]=header.text,table.expanded.indices.push(th.cellIndex)),inst&&(inst.label=header.text,table.instructions.items.push(inst)),headers.push(header)}),table.headers=headers,table},priv.getFooter=function(table){var lastIndex,footerCellIndex;return table.secondary.indices.length&&(lastIndex=table.secondary.indices.slice(-1)[0],du.queryOne("thead tr",table.sourceElem).cells[lastIndex]&&(table.footer.label=TEXT_totalLabel,footerCellIndex=0,du.query("tfoot td",table.sourceElem).forEach(function(td){td.hasAttribute("colspan")&&(footerCellIndex+=parseInt(td.getAttribute("colspan"),10)-1),footerCellIndex===lastIndex&&(table.footer.data=du.trim(td.innerHTML," ")),footerCellIndex++}))),table},priv.createInstructions=function(table){var instToggle=document.createElement("div"),instWrapper=document.createElement("div");return instWrapper.classList.add(CLASSES_hidden),instToggle.classList.add(CLASSES_instToggle),instToggle.classList.add(CLASSES_instTooltip),instToggle.classList.add(CLASSES_iconButton),instToggle.classList.add(CLASSES_iconHelp),instToggle.setAttribute("role","button"),instToggle.setAttribute(ATTR_NAMES_tooltip,du.establishElementId(instWrapper)),instToggle.innerHTML=TEXT_instToggle,table.instructions.items.forEach(function(inst){var block=document.createElement("div"),label=document.createElement("div"),desc=document.createElement("div");block.className=CLASSES_instBlock,label.className=CLASSES_instLabel,desc.className=CLASSES_instDesc,label.innerHTML=inst.label,desc.innerHTML=inst.desc,block.appendChild(label),block.appendChild(desc),instWrapper.appendChild(block)}),table.sourceRset.appendChild(instWrapper),table.instructions.toggleElem=instToggle,table},{create:function(resultSets){var returnObjects=[],doReturnElement="array"!==du.typeOf(resultSets);return resultSets&&!doReturnElement||(resultSets=[resultSets]),resultSets.forEach(function(rset){var tableElem;"element"===du.typeOf(rset)&&du.matchesSelector(rset,SELECTORS_acceptableResultSets)&&(tableElem=du.queryOne("table",rset))&&tableElem.tBodies&&du.matchesSelector(tableElem,SELECTORS_acceptableTable)&&returnObjects.push(priv.setupRset(rset,tableElem))}),doReturnElement?returnObjects.length?returnObjects[0]:null:returnObjects},removeRow:_removeRow,removeEmptyRow:function(tableElem){var i,tBody=tableElem.tBodies[0],table=tBody.parentNode;for(i=0;i<tBody.rows.length;i++)if(row=tBody.rows[i],uiUtil.css.hasClass(row,CLASSES_emptyRow))return hiddenRows[table.id]=row,void _removeRow(row)}}}(),PLUGIN.namespace("ajaxFetch"),PLUGIN.ajaxFetch=function(){var tokens={},EVENT_NAMES={button:"click",input:"blur",select:"change",textarea:"blur",_default:"click"},DEFAULT_OPTIONS={jadeAction:""},SELECTORS_mainQuery=".ajax-fetch",SELECTORS_optionsAttribute="data-ajax-fetch",_setup=function(){uiUtil.query(SELECTORS_mainQuery).forEach(function(srcElem){var eventName,nodeName,targetElem=srcElem;if(uiUtil.css.hasClass(srcElem,"dataPn")){if(!(targetElem=uiUtil.queryOne("input, select, textarea, button",srcElem)))return!1;uiUtil.hasAttribute(srcElem,SELECTORS_optionsAttribute)?targetElem.setAttribute(SELECTORS_optionsAttribute,srcElem.getAttribute(SELECTORS_optionsAttribute)):uiUtil.hasAttribute(targetElem,SELECTORS_optionsAttribute)&&srcElem.setAttribute(SELECTORS_optionsAttribute,targetElem.getAttribute(SELECTORS_optionsAttribute))}"input"===(nodeName=targetElem.nodeName.toLowerCase())&&uiMethods.buttons.isButton(targetElem)&&(nodeName="button"),eventName=EVENT_NAMES.hasOwnProperty(nodeName)?EVENT_NAMES[nodeName]:EVENT_NAMES._default,uiUtil.attachEvent(targetElem,eventName,_onUserAction)})},_onUserAction=function(evt){try{uiMethods.buttons.mutex.disableAll();var token,srcElem=uiUtil.getHTMLObjFromEvent(evt),viewkey=srcElem.name||uiUtil.establishElementId(srcElem),srcValue=uiUtil.val(srcElem),settings=uiUtil.extend(!0,{},DEFAULT_OPTIONS),options=uiUtil.hasAttribute(srcElem,SELECTORS_optionsAttribute),reqParams=[];if(options)try{"string"==typeof(options=srcElem.getAttribute(SELECTORS_optionsAttribute))&&(options=JSON.parse(options)),settings=uiUtil.extend(!0,settings,options)}catch(e){}token=_generateToken(viewkey);reqParams.push("token="+encodeURIComponent(token)),settings.sources?settings.sources.split(",").forEach(function(key){var elem=document.getElementById(key);elem||(elem=document.getElementsByName(key))&&elem.length&&(elem=elem[0]),elem&&elem.value&&reqParams.push(encodeURIComponent(key)+"="+encodeURIComponent(elem.value))}):reqParams.push("viewkey="+encodeURIComponent(viewkey)+"&value="+encodeURIComponent(srcValue)),settings.jadeAction&&reqParams.push("jadeAction="+encodeURIComponent(settings.jadeAction));var request={sUrl:"IFlowAjaxGatewayServlet",sMethod:"post",oParams:reqParams.join("&"),onSuccess:function(xhr,settings){try{var response=JSON.parse(xhr.responseText);if(response.token!==token)return;if(response.token!==tokens[viewkey])return;_handleResponse(response,xhr,settings)}catch(e){}finally{uiMethods.buttons.mutex.enableAll()}},onError:_handleError,onTimeout:_handleTimeout,callOptions:options};"function"==typeof fakeAjax?fakeAjax(request):uiMethods.ajax.execute(request)}catch(e){uiMethods.buttons.mutex.enableAll()}},_handleResponse=function(response,xhr,settings){if("SUCCESS"===response.status||"ERROR"===response.status){var callbackRef;if("array"===uiUtil.typeOf(response.elements)&&_applyElementValues(response.elements),settings.callOptions&&settings.callOptions.callback)"function"==typeof(callbackRef="function"==typeof settings.callOptions.callback?settings.callOptions.callback:uiUtil.getFunctionFromName(settings.callOptions.callback))&&(settings.callOptions.callbackParams?callbackRef(settings.callOptions.callbackParams):callbackRef());response.elements&&"array"!==uiUtil.typeOf(response.elements)&&settings.callOptions.callback}else"FORWARD"===response.status&&(window.location=response.forwardPage);response.userMessages&&(uiMethods.iFlowMessages.oJSON=response.userMessages,uiMethods.iFlowMessages.display())},_handleError=function(){try{window.location.href="error.jsp"}catch(e){}},_handleTimeout=function(){try{window.location.href="error.jsp"}catch(e){}},_applyElementValues=function(elements){elements.forEach(function(obj){var elem;if(!obj||!obj.id)return!1;(elem=document.getElementById(obj.id))&&(obj.value?_setElementValue(elem,obj.value):obj.options?_setElementOptions(elem,obj.options):obj.rows?_createTableRows(elem,obj.rows):(obj.value||""===obj.value)&&_setElementValue(elem,obj.value))})},_createTableRows=function(elem,rows){var tbody,tr;if(!rows||"array"!==uiUtil.typeOf(rows))return null;tbody=elem.tBodies[0],rows.forEach(function(row){tr=document.createElement("tr"),row.columns.forEach(function(col){var label,input,td=document.createElement("td");col.className&&(td.className=col.className),col.html?td.innerHTML=col.html:"select-row"===col.type?((label=document.createElement("label")).htmlFor=elem.id+"_cbox_"+row.index,label.innerHTML="Select this row",label.className="hideOffScreen",(input=document.createElement("input")).setAttribute("type","checkbox"),input.id=elem.id+"_cbox_"+row.index,input.name=input.id,input.setAttribute("tabIndex","1"),col.checked&&input.setAttribute("checked","checked"),uiUtil.attachEvent(input,"click",uiMethods.checkBoxes.collection.events.handleClick),td.appendChild(label),td.appendChild(input)):"remove"===col.type&&((input=document.createElement("button")).setAttribute("type","button"),input.className="icon-button icon-delete",input.setAttribute("tabIndex","1"),input.innerHTML="Remove",col.args[0].elem=tr,uiUtil.attachEvent(input,"click",function(){uiMethods.removeItem(col.args[0],col.args[1],col.args[2],uiUtil.getFunctionFromName(col.args[3]))}),td.appendChild(input)),tr.appendChild(td)}),tbody.appendChild(tr)}),uiResponsive.table.removeEmptyRow(elem)},_setElementValue=function(elem,value){uiUtil.isUpdatable(elem)?uiUtil.val(elem,value):elem&&(elem.innerHTML=value)},_setElementOptions=function(elem,opts){uiUtil.isUpdatable(elem)&&(_clearElementOptions(elem),opts.forEach(function(opt,i){elem.options[i]=new Option(opt.content,opt.value),!opt.selected||!0!==opt.selected&&"true"!==opt.selected||(elem.options[i].selected=!0),opt.className&&""!==opt.className&&(elem.options[i].className=opt.className)}))},_clearElementOptions=function(elem,addPlaceholder){try{for(;elem.firstChild;)elem.removeChild(elem.firstChild);return addPlaceholder&&(elem.options[0]=new Option("Select one","00"),elem.options[0].setAttribute("selected","selected")),!0}catch(e){return uiUtil.errorHandling.jsLog.addEntry(e,arguments),!1}},_generateToken=function(id){var token;return id?(token=uiUtil.getRandomString(),tokens[id]=token):""};return window.attachEvent||"function"!=typeof domready?uiUtil.attachEvent(window,"load",_setup):domready(_setup),{request:function(options){try{uiMethods.buttons.mutex.disableAll();var token,srcElem=options.srcElem,viewkey=srcElem.name||uiUtil.establishElementId(srcElem),settings=uiUtil.extend(!0,{},DEFAULT_OPTIONS),reqParams=[];for(var key in options&&("string"==typeof options&&(options=JSON.parse(options)),settings=uiUtil.extend(!0,{},settings,options)),options.params)options.params.hasOwnProperty(key)&&reqParams.push(key+"="+encodeURIComponent(options.params[key]));token=_generateToken(viewkey),reqParams.push("token="+encodeURIComponent(token)),settings.sources?settings.sources.split(",").forEach(function(key){var elem=document.getElementById(key);elem||(elem=document.getElementsByName(key))&&elem.length&&(elem=elem[0]),elem&&elem.value&&reqParams.push(encodeURIComponent(key)+"="+encodeURIComponent(elem.value))}):reqParams.push("viewkey="+encodeURIComponent(viewkey));var request={sUrl:options.url||"IFlowAjaxGatewayServlet",sMethod:"post",oParams:reqParams.join("&"),onSuccess:function(xhr,settings){try{var response=JSON.parse(xhr.responseText);if(response.token!==token)return;if(response.token!==tokens[viewkey])return;_handleResponse(response,xhr,settings)}catch(e){}finally{uiMethods.buttons.mutex.enableAll()}},onError:_handleError,onTimeout:_handleTimeout,callOptions:options};"function"==typeof fakeAjax?fakeAjax(request):uiMethods.ajax.execute(request)}catch(e){uiMethods.buttons.mutex.enableAll()}}}}(),/\.gov$/.test(document.location.host)){var appCode="XXXX",googleAnalyticsProperty=!1,appCodeRegex=/\.gov\/([A-Z]{4}(?:\d{2})?)\//;try{var discoveredCode=!1;if(appCodeRegex.test(window.location.href)&&(discoveredCode=appCodeRegex.exec(window.location.href)[1]),discoveredCode)switch(discoveredCode){case"PRIS":googleAnalyticsProperty="UA-47449816-14";break;case"OSIN":case"MPMT":case"STMI":googleAnalyticsProperty="UA-47449816-15";break;case"WTUI":case"CEXT":case"PPMT":case"PBWF":case"PBAC":case"IEPC":case"POAW":case"WTWF":case"PBWM":case"JRLA":case"PMTX":case"TIVL":case"PAIC":case"RPCA":case"NAIC":case"VOLD":case"PIGI":case"HUWF":case"MTTC":case"MCTF":case"IFWF":case"WTUL":case"CTES":case"TWMF":case"STRF":case"CSTF":case"BBDF":googleAnalyticsProperty="UA-47449816-16";break;case"SNER":case"FTLU":case"STRC":case"RTDB":case"RTEV":case"STRP":case"PTRR":case"RTDN":case"CEXT":case"OSBZ":case"STPM":case"BADR":case"VCSP":case"CTFI":case"ADTI":case"RPXT":case"QPAY":case"OSFI":case"CSOA":case"IADR":case"PTFZ":case"AURF":case"TNCA":case"CIPA":case"SCDS":case"TPRG":case"TIRS":case"TPRR":googleAnalyticsProperty="UA-47449816-17";break;default:googleAnalyticsProperty="UA-47449816-18"}}catch(e){}!function(i,s,o,g,r,a,m){i.GoogleAnalyticsObject=r,i.ga=i.ga||function(){(i.ga.q=i.ga.q||[]).push(arguments)},i.ga.l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src=g,m.parentNode.insertBefore(a,m)}(window,document,"script",uiGlobal.assets.protocol+"//www.google-analytics.com/analytics.js","ga"),ga("create",googleAnalyticsProperty,"auto"),ga("send","pageview")}PLUGIN.namespace("calendar"),PLUGIN.calendar=function(){var MONTH_EN=["January","February","March","April","May","June","July","August","September","October","November","December"],MSHORT_EN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAYS_WK_EN=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],DAYS_MON=[31,28,31,30,31,30,31,31,30,31,30,31],CULTURES={USA:{mask:"MM|DD|YYYY",delim:"/"},INT:{mask:"DD|MM|YYYY",delim:"/"},SYS:{mask:"YYYY|MM|DD",delim:"-"}},PREFIX_ID="datePicker_",ICON_TOOLTIP_show="Open the calendar popup",ICON_TOOLTIP_hide="Close the calendar popup",OPTIONS_TOOLTIP_show="Open options",OPTIONS_TOOLTIP_hide="Close options",_priv={},_events={},_imgPath="/iflow/images/",_defaultSettings_datePickers=[{inputId:"",culture:"USA",minDate:"01/01/1900",maxDate:"12/31/2150",display:{theme:0,autoError:!1,enableBoundaryDetection:!0}}],_mySettings={datePickers:[]};return _priv._getSettings=function(inputId){try{var i=_mySettings.datePickers.length;if(0===i)return _defaultSettings_datePickers[0];for(;0<=(i-=1);)if(_mySettings.datePickers[i].inputId===inputId)return _mySettings.datePickers[i];return _defaultSettings_datePickers[0]}catch(e){return _defaultSettings_datePickers[0]}},_priv._showHideDatePicker=function(elem,cal,forceHide){try{var inputId=elem.id.substring(elem.id.indexOf("cal_")+4);forceHide=forceHide||!1,cal?uiUtil.css.hasClass(cal,"hidden")&&!forceHide?(cal=_priv._refreshDatePickerHtml(cal),_priv._setDatePickerPosition(cal),_priv._showDatePicker(cal),_priv._getSettings(inputId).display.enableBoundaryDetection&&_priv._handleBoundaryDetection(cal),uiUtil.setFocus(document.getElementById("dpCalWrap_"+inputId))):(_priv._hideDatePicker(cal),uiUtil.setFocus(elem)):(cal=_priv._createDatePicker(elem),_priv._setDatePickerPosition(cal),_priv._getSettings(inputId).display.enableBoundaryDetection&&_priv._handleBoundaryDetection(cal),uiUtil.setFocus(document.getElementById("dpCalWrap_"+inputId)),elem.title=ICON_TOOLTIP_hide)}catch(e){}},_priv._setupField=function(calLink){var inputElem;uiUtil.attachEvent(calLink,"click",_events._iconClick),calLink.title=ICON_TOOLTIP_show,inputElem=document.getElementById(calLink.id.substring(calLink.id.indexOf("cal_")+4)),uiUtil.attachEvent(inputElem,"blur",_events._inputBlur),uiUtil.attachEvent(inputElem,"focus",_events._inputFocus)},_priv._createDatePicker=function(elem){try{var inputId=elem.id.substring(elem.id.indexOf("cal_")+4),cal=document.createElement("div");return cal.setAttribute("id",PREFIX_ID+inputId),cal.setAttribute("style","inline-block"),cal.className="dp",cal.innerHTML=_priv._getDatePickerHtml(_priv._getDatePickerInitialDate(inputId),inputId),document.body.appendChild(cal),uiUtil.attachEvent(cal,"click",_events._calClick),uiUtil.attachEvent(cal,"dblclick",_events._calClick),uiUtil.attachEvent(cal,"keydown",_events._calKeydown),cal}catch(e){return null}},_priv._refreshDatePickerHtml=function(cal){try{var inputId=cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1));return cal.innerHTML=_priv._getDatePickerHtml(_priv._getDatePickerInitialDate(inputId),inputId),cal}catch(e){return null}},_priv._getDatePickerHtml=function(dmyCal,inputId){try{var lastDayMonth,lastDayPrevMonth,html="",calDate=null,weekday=-1,prevMon=0,prevYr=0,nextMon=0,nextYr=0,i=0,rows=0,daysCnt=0,titleDate=null,today=new Date,__getDayTitle=function(date){try{return DAYS_WK_EN[date.getDay()]+", "+MONTH_EN[date.getMonth()]+" "+date.getDate()+", "+date.getFullYear()}catch(e){}};for(dmyCal=_priv._convertDMYToNumeric(dmyCal),html+='<div id="dpCalWrap_'+inputId+'" class="dpCalWrap" tabindex="1"><div class="dpCal">',html+=_priv._getHeaderHtml(dmyCal,inputId),html+='<div class="dpBody"><div class="dpDayDesc"><ul><li>S</li><li>M</li><li>T</li><li>W</li><li>T</li><li>F</li><li>S</li></ul></div><div class="dpWeekNbrDays">',html+='<div class="dpDays"><ul>',weekday=(calDate=new Date(dmyCal.month.toString()+"/01/"+dmyCal.year.toString())).getDay(),lastDayMonth=_priv._getLastDayOfMonth(calDate),nextMon=dmyCal.month+1,nextYr=dmyCal.year,1===dmyCal.month?(prevMon=12,prevYr=dmyCal.year-1):(prevMon=dmyCal.month-1,prevYr=dmyCal.year,12<nextMon&&(nextYr+=nextMon=1)),lastDayPrevMonth=_priv._getLastDayOfMonth(new Date(prevMon+"/01/"+prevYr)),0===weekday&&(weekday=7);0<weekday;)daysCnt+=1,html+='<li class="prevMonthDay',0===i&&(html+=" newLine",rows+=1,i+=1),titleDate=new Date(prevMon+"/"+(lastDayPrevMonth-weekday+1)+"/"+prevYr),_priv._validateMinMaxRange({day:lastDayPrevMonth-weekday+1,month:prevMon,year:prevYr},inputId)?html+='"><a href="#" title="'+__getDayTitle(titleDate)+'" tabindex="1">'+(lastDayPrevMonth-weekday+1)+"</a></li>":html+='"><span class="disabled">'+(lastDayPrevMonth-weekday+1)+"</span></li>",weekday-=1;for(i=0;i<lastDayMonth;)html+='<li class="',8===(daysCnt+=1)&&(html+="newLine",rows+=1,daysCnt=1),today.getDate()===i+1&&today.getMonth()===dmyCal.month-1&&today.getFullYear()===dmyCal.year&&(html+=" today"),dateParsed=_priv._processDate(uiUtil.trim(document.getElementById(inputId).value),inputId),dateParsed.valid&&parseInt(dateParsed.dmy.day,10)===i+1&&parseInt(dateParsed.dmy.month,10)===dmyCal.month&&parseInt(dateParsed.dmy.year,10)===dmyCal.year&&(html+=" selectedDay"),titleDate=new Date(dmyCal.month.toString()+"/"+(i+1)+"/"+dmyCal.year.toString()),_priv._validateMinMaxRange({day:i+1,month:dmyCal.month,year:dmyCal.year},inputId)?html+='"><a href="#" title="'+__getDayTitle(titleDate)+'" tabindex="1">'+(i+1)+"</a></li>":html+='"><span class="disabled">'+(i+1)+"</span></li>",i+=1;for(i=0,7===daysCnt&&(daysCnt=0);daysCnt<7;)html+='<li class="nextMonthDay',0===daysCnt&&(html+=" newLine",rows+=1),titleDate=new Date(nextMon+"/"+(i+1)+"/"+nextYr),_priv._validateMinMaxRange({day:i+1,month:nextMon,year:nextYr},inputId)?html+='"><a href="#" title="'+__getDayTitle(titleDate)+'" tabindex="1">'+(i+1)+"</a></li>":html+='"><span class="disabled">'+(i+1)+"</span></li>",i+=1,7===(daysCnt+=1)&&rows<6&&(daysCnt=0);return i=0,html+='</ul></div></div><div class="dpFoot"></div></div></div>',html+='<div class="dpCalShadow"></div></div>',html+='<div id="dpOptions_'+inputId+'" class="dpOptWrap hidden" tabindex="1">',html+='<div class="dpOpt"><div class="dpMon">'+_priv._setOptionsMonths(dmyCal,inputId)+"</div>",html+='<div class="dpYr">'+_priv._setOptionsYears(dmyCal,inputId)+"</div>",html+='<div id="dpOther_'+inputId+'" class="dpOther"><div class="dpOtherL"><a href="#" title="Today" tabindex="1">Today</a></div><div class="dpOtherR"><a href="#" id="dpOK_'+inputId+'" title="OK" tabindex="1">OK</a><a href="#" title="Cancel" tabindex="1">Cancel</a></div></div>',html+='</div><div class="dpOptShadow"></div></div></div>'}catch(e){}},_priv._getHeaderHtml=function(dmyCal,inputId){try{var html="",settings=_priv._getSettings(inputId),minDate=_priv._parseDateStringToDateObject(settings.minDate,inputId),maxDate=_priv._parseDateStringToDateObject(settings.maxDate,inputId);return html='<div class="dpHead">',dmyCal.month===minDate.getMonth()+1&&dmyCal.year===minDate.getFullYear()?html+='<ul class="lIcons"><li><span class="grayedOut"><img src="'+_imgPath+'CalendarPreviousQuarter.png" alt="Previous quarter"></span></li><li><span class="grayedOut"><img src="'+_imgPath+'CalendarPreviousMonth.png" alt="Previous month"></span></li></ul>':html+='<ul class="lIcons"><li><a href="#" class="fastNavPrevQtr" title="Previous quarter" tabindex="1"><img src="'+_imgPath+'CalendarPreviousQuarter.png" alt="Previous quarter" /></a></li><li><a href="#" class="navPrevMon" title="Previous month" tabindex="1"><img src="'+_imgPath+'CalendarPreviousMonth.png" alt="Previous month"></a></li></ul>',html+='<div class="title"><a href="#" class="monthYear" title="'+OPTIONS_TOOLTIP_show+'" tabindex="1">'+MONTH_EN[dmyCal.month-1]+" "+dmyCal.year.toString()+'</a><input type="hidden" id="dpSel_'+inputId+'" value="'+dmyCal.month.toString()+"/"+dmyCal.year.toString()+'"></div>',dmyCal.month===maxDate.getMonth()+1&&dmyCal.year===maxDate.getFullYear()?html+='<ul class="rIcons"><li><span class="grayedOut"><img src="'+_imgPath+'CalendarNextMonth.png" alt="Next month" /></span></li><li><span class="grayedOut"><img src="'+_imgPath+'CalendarNextQuarter.png" alt="Next quarter"></span></li></ul>':html+='<ul class="rIcons"><li><a href="#" class="navNextMon" title="Next month" tabindex="1"><img src="'+_imgPath+'CalendarNextMonth.png" alt="Next month"></a></li><li><a href="#" class="fastNavNextQtr" title="Next quarter" tabindex="1"><img src="'+_imgPath+'CalendarNextQuarter.png" alt="Next quarter"></a></li></ul>',html+="</div>"}catch(e){return""}},_priv._setDatePickerPosition=function(cal){try{var input=document.getElementById(cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1))),inputParent=null,coord=[],borderTop=0,borderBottom=0;if(input){(inputParent=input.parentNode).style.position="relative",coord=uiUtil.getElementPosition(inputParent),cal.style.left=coord[0]+"px";try{borderTop=getComputedStyle(input,"").getPropertyValue("border-top-width"),borderBottom=getComputedStyle(input,"").getPropertyValue("border-bottom-width")}catch(e){borderTop=input.currentStyle.borderTopWidth,borderBottom=input.currentStyle.borderBottomWidth}cal.style.top=coord[1]+input.clientHeight+parseInt(borderTop,10)+parseInt(borderBottom,10)+input.offsetTop+"px"}}catch(e){}},_priv._showDatePicker=function(cal){try{var inputId=cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1)),calIcon=document.getElementById("cal_"+inputId);uiUtil.css.removeClass(cal,"hidden"),calIcon.title=ICON_TOOLTIP_hide}catch(e){}},_priv._hideDatePicker=function(cal){try{var inputId=cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1)),calIcon=document.getElementById("cal_"+inputId);uiUtil.css.addClass(cal,"hidden"),calIcon.title=ICON_TOOLTIP_show}catch(e){}},_priv._hideAllDatePickers=function(inputId){try{var cals=uiUtil.query("div.dp"),i=cals.length;for(inputId=inputId||"";0<=(i-=1);)cals[i].id!==PREFIX_ID+inputId&&(uiUtil.css.hasClass(cals[i],"hidden")||(uiUtil.css.addClass(cals[i],"hidden"),document.getElementById("cal_"+cals[i].id.substring(cals[i].id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1))).title=ICON_TOOLTIP_show))}catch(e){}},_priv._showHideOptions=function(elem,opts,forceHide){try{var inputId=opts.id.substring(opts.id.indexOf("_")+1),cal=document.getElementById(PREFIX_ID+inputId),monthYear=_priv._getMonthYearFromCalHeader(cal);forceHide=forceHide||!1,uiUtil.css.hasClass(opts,"hidden")&&!forceHide?(document.getElementById("selMon_"+inputId).value=monthYear[0],document.getElementById("selYr_"+inputId).value=monthYear[1],uiUtil.queryOne("div.dpMon",opts).innerHTML=_priv._setOptionsMonths(_priv._convertDMYToNumeric({day:1,month:monthYear[0],year:monthYear[1]}),inputId),uiUtil.queryOne("div.dpYr",opts).innerHTML=_priv._setOptionsYears(_priv._convertDMYToNumeric({day:1,month:monthYear[0],year:monthYear[1]}),inputId),_priv._positionOptions(elem,opts),elem.title=OPTIONS_TOOLTIP_hide,_priv._showOptions(opts),_priv._getSettings(inputId).display.enableBoundaryDetection&&_priv._handleBoundaryDetection(opts),uiUtil.setFocus(opts)):(elem.title=OPTIONS_TOOLTIP_show,_priv._hideOptions(opts),uiUtil.setFocus(elem))}catch(e){}},_priv._setOptionsSelectedMonth=function(elem,opts,cal){try{for(var months=uiUtil.query("a, span.disabled",opts),i=months.length,inputId=cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1)),selMonth=document.getElementById("selMon_"+inputId);0<=(i-=1);)uiUtil.css.removeClass(months[i].parentNode,"selected");uiUtil.css.addClass(elem.parentNode,"selected"),selMonth.value=_priv._getMonthValFromShortStr(elem.innerHTML)}catch(e){}},_priv._setOptionsSelectedYear=function(elem,opts,cal){try{for(var years=uiUtil.query("a",opts),i=years.length,yr=elem.innerHTML,inputId=cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1)),selMonth=document.getElementById("selMon_"+inputId),selYear=document.getElementById("selYr_"+inputId),divMonths=uiUtil.queryOne("div.dpMon",document.getElementById("dpOptions_"+inputId));0<=(i-=1);)uiUtil.css.removeClass(years[i].parentNode,"selected");uiUtil.css.addClass(elem.parentNode,"selected"),selYear.value=yr,divMonths.innerHTML=_priv._setOptionsMonths(_priv._convertDMYToNumeric({day:1,month:selMonth.value,year:yr}),inputId)}catch(e){}},_priv._setOptionsYears=function(dmyCal,inputId){try{var html="",i=0,selYear=document.getElementById("selYr_"+inputId);for(dmyCal.year=parseInt(dmyCal.year,10),selYear=selYear?parseInt(selYear.value,10):dmyCal.year,html+="<ul>";i<10;)html+='<li class="',i%2==0&&(html+="newLine"),dmyCal.year-(5-i)===selYear&&(html+=" selected"),_priv._validateMinMaxRange({day:0,month:0,year:dmyCal.year-(5-i)},inputId)?html+='"><a href="#" title="'+(dmyCal.year-(5-i))+'" tabindex="1">'+(dmyCal.year-(5-i))+"</a>":html+='"><span class="disabled">'+(dmyCal.year-(5-i))+"</span>",html+=0===i?'<input type="hidden" id="startOptYr_'+inputId+'" value="'+(dmyCal.year-(5-i))+'"></li>':9===i?'<input type="hidden" id="endOptYr_'+inputId+'" value="'+(dmyCal.year-(5-i))+'"></li>':"</li>",i+=1;return _priv._validateMinMaxRange({day:0,month:0,year:dmyCal.year-6},inputId)?html+='<li class="newLine"><a href="#" class="fastNavPrevYrs" title="Previous years" tabindex="1"><img src="'+_imgPath+'CalendarPreviousQuarter.png" alt="Previous years"></a></li>':html+='<li class="newLine"><span class="grayedOut"><img src="'+_imgPath+'CalendarPreviousQuarter.png" alt="Previous years"></span></li>',_priv._validateMinMaxRange({day:0,month:0,year:dmyCal.year+5},inputId)?html+='<li><a href="#" class="fastNavNextYrs" title="Next years" tabindex="1"><img src="'+_imgPath+'CalendarNextQuarter.png" alt="Next years"></a></li>':html+='<li><span class="grayedOut"><img src="'+_imgPath+'CalendarNextQuarter.png" alt="Next years"></span></li>',html+='</ul><input type="hidden" id="selYr_'+inputId+'" value="'+selYear.toString()+'">'}catch(e){return""}},_priv._setOptionsMonths=function(dmyCal,inputId){try{var html="",i=0,selMonth=document.getElementById("selMon_"+inputId);for(selMonth=selMonth?parseInt(selMonth.value,10):dmyCal.month,html+="<ul>";i<12;)html+='<li class="',i%2==0&&(html+="newLine"),i+1===selMonth&&(html+=" selected"),_priv._validateMinMaxRange({day:1,month:i+1,year:dmyCal.year},inputId)||_priv._validateMinMaxRange({day:_priv._getLastDayOfMonth(new Date(i+1+"/01/"+dmyCal.year)),month:i+1,year:dmyCal.year},inputId)?html+='"><a href="#" title="'+MONTH_EN[i]+'" tabindex="1">'+MSHORT_EN[i]+"</a></li>":html+='"><span class="disabled">'+MSHORT_EN[i]+"</span></li>",i+=1;return html+='</ul><input type="hidden" id="selMon_'+inputId+'" value="'+selMonth.toString()+'"/>'}catch(e){return""}},_priv._positionOptions=function(elem,option){try{option.style.left=parseInt(elem.offsetLeft+elem.clientWidth/2,10)+"px",option.style.top=elem.clientHeight+"px"}catch(e){}},_priv._showOptions=function(opts){try{uiUtil.css.removeClass(opts,"hidden")}catch(e){}},_priv._hideOptions=function(opts){try{uiUtil.css.addClass(opts,"hidden")}catch(e){}},_priv._handleBoundaryDetection=function(elem){try{var bodyElem=document.body,scrollLeft=bodyElem.scrollLeft,scrollTop=bodyElem.scrollTop,viewportHeight=window.innerHeight||document.body.parentElement.offsetHeight;0===scrollTop&&0!==bodyElem.parentElement.scrollTop&&(scrollTop=bodyElem.parentElement.scrollTop),0===scrollLeft&&0!==bodyElem.parentElement.scrollLeft&&(scrollLeft=bodyElem.parentElement.scrollLeft),viewportHeight-(elem.parentNode.offsetTop+1)-(elem.offsetTop-scrollTop)-20<elem.clientHeight&&window.scrollBy(0,elem.clientHeight-(viewportHeight-(elem.parentNode.offsetTop+1)-(elem.offsetTop-scrollTop)-20)),bodyElem.clientWidth-(elem.offsetLeft+elem.parentNode.offsetLeft)+scrollLeft-5<elem.clientWidth&&window.scrollBy(elem.clientWidth-(bodyElem.clientWidth-(elem.offsetLeft+elem.parentNode.offsetLeft)+scrollLeft)+5,0),0<scrollLeft-elem.offsetLeft-elem.parentNode.offsetLeft+5&&window.scrollBy(-1*(scrollLeft-elem.offsetLeft-elem.parentNode.offsetLeft+5),0)}catch(e){}},_priv._getMonthValFromLongStr=function(monthStr){try{for(var i=MONTH_EN.length;0<=(i-=1);)if(monthStr===MONTH_EN[i]){i+=1;break}return i}catch(e){return 0}},_priv._getMonthValFromShortStr=function(monthStr){try{for(var i=MSHORT_EN.length;0<=(i-=1);)if(monthStr===MSHORT_EN[i]){i+=1;break}return i}catch(e){return 0}},_priv._getMonthYearFromCalHeader=function(cal){try{var splitMonYr=uiUtil.queryOne("a.monthYear",cal).innerHTML.split(" ");return[_priv._getMonthValFromLongStr(splitMonYr[0]),splitMonYr[1]]}catch(e){}},_priv._getLastDayOfMonth=function(date){try{var mon=date.getMonth()+1,lastDayMonth=0;return lastDayMonth=DAYS_MON[mon-1],2===mon&&new Date("02/29/"+date.getFullYear()).getMonth()+1===mon&&(lastDayMonth+=1),lastDayMonth}catch(e){}},_priv._getDatePickerInitialDate=function(inputId){try{var input=document.getElementById(inputId);if(input)return dateParsed=_priv._processDate(uiUtil.trim(input.value),inputId),date=null,{day:(date=dateParsed.valid?new Date(dateParsed.dmy.month+"/"+dateParsed.dmy.day+"/"+dateParsed.dmy.year):new Date).getDate(),month:date.getMonth()+1,year:date.getFullYear()}}catch(e){}var dateParsed,date},_priv._getFormattedDate=function(dateStr,inputId){try{var dateParsed;return(dateParsed=_priv._processDate(uiUtil.trim(dateStr),inputId)).valid?dateParsed.stringValue:null}catch(e){return null}},_priv._processDate=function(dateStr,inputId){var dateParsed={valid:!1,dmy:{},stringValue:""};try{var splitDate,dateTest=null,settings=_priv._getSettings(inputId);dateParsed.stringValue=dateStr,splitDate=_priv._getDateFromCulture(dateStr,inputId),dateParsed.dmy=splitDate.dmy,dateParsed.stringValue=splitDate.ordered[0]+CULTURES[settings.culture].delim+splitDate.ordered[1]+CULTURES[settings.culture].delim+splitDate.ordered[2],(dateStr=dateParsed.stringValue).length===CULTURES[settings.culture].mask.length&&(dateTest=new Date(dateParsed.dmy.month+"/"+dateParsed.dmy.day+"/"+dateParsed.dmy.year),parseInt(dateParsed.dmy.month,10)===dateTest.getMonth()+1&&(dateParsed.valid=_priv._validateMinMaxRange(_priv._convertDMYToNumeric(dateParsed.dmy),inputId)))}catch(e){}finally{return dateParsed}},_priv._convertDMYToNumeric=function(dmy){try{return{day:parseInt(dmy.day,10),month:parseInt(dmy.month,10),year:parseInt(dmy.year,10)}}catch(e){return{}}},_priv._validateMinMaxRange=function(dmyCal,inputId){try{var settings=_priv._getSettings(inputId),minDate=_priv._parseDateStringToDateObject(settings.minDate,inputId),maxDate=_priv._parseDateStringToDateObject(settings.maxDate,inputId),dateTest=null;if(0===dmyCal.day&&0===dmyCal.month){if(dmyCal.year>=minDate.getFullYear()&&dmyCal.year<=maxDate.getFullYear())return!0}else if(minDate<=(dateTest=new Date(dmyCal.month+"/"+dmyCal.day+"/"+dmyCal.year))&&dateTest<=maxDate)return!0;return!1}catch(e){return!1}},_priv._getDateFromCulture=function(dateStr,inputId){var dateParsed={dmy:{day:"",month:"",year:""},ordered:[]};try{var day="",mon="",yr="",settings=_priv._getSettings(inputId),dateSplit=dateStr.split(CULTURES[settings.culture].delim),maskSplit=CULTURES[settings.culture].mask.split("|"),i=dateSplit.length,j=0;if(i===maskSplit.length)for(;j<i;){switch(maskSplit[j]){case"DD":day=parseInt(dateSplit[j],10),isNaN(day)||(dateParsed.dmy.day=day<10?"0"+day:day.toString(),dateParsed.ordered[j]=dateParsed.dmy.day);break;case"MM":mon=parseInt(dateSplit[j],10),isNaN(mon)||(dateParsed.dmy.month=mon<10?"0"+mon:mon.toString(),dateParsed.ordered[j]=dateParsed.dmy.month);break;case"YYYY":yr=parseInt(dateSplit[j],10),isNaN(yr)||(dateParsed.dmy.year=yr.toString(),dateParsed.ordered[j]=dateParsed.dmy.year)}j+=1}}catch(e){}finally{return dateParsed}},_priv._parseDateStringToDateObject=function(dateStr,inputId){try{var dateDMY=_priv._getDateFromCulture(dateStr,inputId);return new Date(dateDMY.dmy.month+"/"+dateDMY.dmy.day+"/"+dateDMY.dmy.year)}catch(e){}},_priv._setDateToCulture=function(dmyCal,inputId,culture){try{return void 0===culture?_priv._setDateToSelectedCulture(dmyCal,inputId,CULTURES[_priv._getSettings(inputId).culture]):_priv._setDateToSelectedCulture(dmyCal,inputId,culture)}catch(e){}},_priv._setDateToSelectedCulture=function(dmyCal,inputId,culture){try{for(var maskSplit=culture.mask.split("|"),i=maskSplit.length,j=0,dateStr="";j<i;){switch(maskSplit[j]){case"DD":dateStr+=dmyCal.day.toString()+culture.delim;break;case"MM":dateStr+=dmyCal.month.toString()+culture.delim;break;case"YYYY":dateStr+=dmyCal.year.toString()+culture.delim}j+=1}return dateStr.substring(0,dateStr.length-1)}catch(e){return""}},_priv._runOptionsActions=function(elem,opts,cal){try{for(var actions=uiUtil.query("a",opts),i=actions.length,j=0;j<i;){if(actions[j]===elem){switch(j){case 0:_priv._runOptionsToday(cal);break;case 1:_priv._runOptionsOK(cal);break;case 2:_priv._runOptionsClose(cal)}break}j+=1}}catch(e){}},_priv._runOptionsToday=function(cal){try{_priv._setSelectedDate(null,cal)}catch(e){}},_priv._runOptionsOK=function(cal){try{var inputId=cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1)),selMonth=document.getElementById("selMon_"+inputId),selYear=document.getElementById("selYr_"+inputId),settings=_priv._getSettings(inputId),minDate=_priv._parseDateStringToDateObject(settings.minDate,inputId),maxDate=_priv._parseDateStringToDateObject(settings.maxDate,inputId),dateTest=new Date(selMonth.value+"/01/"+selYear.value);_priv._validateMinMaxRange(_priv._convertDMYToNumeric({day:1,month:selMonth.value,year:selYear.value}),inputId)||(dateTest<minDate?selMonth.value=minDate.getMonth()+1:maxDate<dateTest&&(selMonth.value=maxDate.getMonth()+1)),cal.innerHTML=_priv._getDatePickerHtml(_priv._convertDMYToNumeric({day:1,month:selMonth.value,year:selYear.value}),inputId),_priv._runOptionsClose(cal)}catch(e){}},_priv._runOptionsClose=function(cal){try{_priv._showHideOptions(uiUtil.queryOne("a.monthYear",cal),document.getElementById("dpOptions_"+cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1))),!0)}catch(e){}},_priv._getSelectedDate=function(elem,cal){try{var dmyCal={},inputId="",splitHdn=[],todaysDate=new Date;return elem?(inputId=cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1)),splitHdn=document.getElementById("dpSel_"+inputId).value.split("/"),dmyCal={day:parseInt(elem.innerHTML,10),month:parseInt(splitHdn[0],10),year:parseInt(splitHdn[1],10)},-1<elem.parentNode.className.indexOf("prevMonthDay")?(dmyCal.month-=1,dmyCal.month<1&&(dmyCal.month=12,dmyCal.year-=1)):-1<elem.parentNode.className.indexOf("nextMonthDay")&&(dmyCal.month+=1,12<dmyCal.month&&(dmyCal.month=1,dmyCal.year+=1))):dmyCal={day:todaysDate.getDate(),month:todaysDate.getMonth()+1,year:todaysDate.getFullYear()},dmyCal}catch(e){return{}}},_priv._setSelectedDate=function(elem,cal){try{var inputId=cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1)),input=document.getElementById(inputId),dmyCal=_priv._getSelectedDate(elem,cal),settings=_priv._getSettings(inputId),previousValue=input.value;input.value=_priv._getFormattedDate(_priv._setDateToCulture(dmyCal,inputId),inputId),previousValue!==input.value&&uiEvents.trigger(input,"change"),settings.display.autoError&&_priv._removeInlineError(input),_priv._hideDatePicker(cal),uiUtil.setFocus(document.getElementById("cal_"+inputId))}catch(e){}},_priv._handleCalHeaderNavigation=function(elem,cal){try{var inputId=cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1)),monthYear=_priv._getMonthYearFromCalHeader(cal),dmyCal={day:1,month:monthYear[0],year:monthYear[1]},settings=_priv._getSettings(inputId),minDate=_priv._parseDateStringToDateObject(settings.minDate,inputId),maxDate=_priv._parseDateStringToDateObject(settings.maxDate,inputId),minDateMonth=minDate.getMonth()+1,maxDateMonth=maxDate.getMonth()+1,minDateYear=minDate.getFullYear(),maxDateYear=maxDate.getFullYear();switch("string"==typeof elem?elem:elem.className){case"fastNavPrevQtr":dmyCal.month===minDateMonth&&dmyCal.year===minDateYear||(dmyCal.day=_priv._getLastDayOfMonth(new Date("01/"+monthYear[0]+"/"+monthYear[1])),dmyCal=_priv._previousQuarter(_priv._convertDMYToNumeric(dmyCal)),_priv._validateMinMaxRange(dmyCal,inputId)?(cal.innerHTML=_priv._getDatePickerHtml(dmyCal,inputId),-1<cal.innerHTML.indexOf(elem.className)?uiUtil.setFocus(uiUtil.queryOne("a."+elem.className,cal)):uiUtil.setFocus(uiUtil.queryOne("a.monthYear",cal))):(dmyCal.month<minDateMonth||dmyCal.year<minDateYear)&&(dmyCal.month=minDateMonth,dmyCal.year=minDateYear,cal.innerHTML=_priv._getDatePickerHtml(dmyCal,inputId),-1<cal.innerHTML.indexOf(elem.className)?uiUtil.setFocus(uiUtil.queryOne("a."+elem.className,cal)):uiUtil.setFocus(uiUtil.queryOne("a.monthYear",cal))));break;case"navPrevMon":dmyCal.month===minDateMonth&&dmyCal.year===minDateYear||(dmyCal.day=_priv._getLastDayOfMonth(new Date("01/"+monthYear[0]+"/"+monthYear[1])),dmyCal=_priv._previousMonth(_priv._convertDMYToNumeric(dmyCal)),_priv._validateMinMaxRange(dmyCal,inputId)&&(cal.innerHTML=_priv._getDatePickerHtml(dmyCal,inputId),-1<cal.innerHTML.indexOf(elem.className)?uiUtil.setFocus(uiUtil.queryOne("a."+elem.className,cal)):uiUtil.setFocus(uiUtil.queryOne("a.monthYear",cal))));break;case"navNextMon":dmyCal.month===maxDateMonth&&dmyCal.year===maxDateYear||(dmyCal=_priv._nextMonth(_priv._convertDMYToNumeric(dmyCal)),_priv._validateMinMaxRange(dmyCal,inputId)&&(cal.innerHTML=_priv._getDatePickerHtml(dmyCal,inputId),-1<cal.innerHTML.indexOf(elem.className)?uiUtil.setFocus(uiUtil.queryOne("a."+elem.className,cal)):uiUtil.setFocus(uiUtil.queryOne("a.monthYear",cal))));break;case"fastNavNextQtr":dmyCal.month===maxDateMonth&&dmyCal.year===maxDateYear||(dmyCal=_priv._nextQuarter(_priv._convertDMYToNumeric(dmyCal)),_priv._validateMinMaxRange(dmyCal,inputId)?(cal.innerHTML=_priv._getDatePickerHtml(dmyCal,inputId),-1<cal.innerHTML.indexOf(elem.className)?uiUtil.setFocus(uiUtil.queryOne("a."+elem.className,cal)):uiUtil.setFocus(uiUtil.queryOne("a.monthYear",cal))):(dmyCal.month>maxDateMonth||dmyCal.year>maxDate.getFullYear())&&(dmyCal.month=maxDateMonth,dmyCal.year=maxDateYear,cal.innerHTML=_priv._getDatePickerHtml(dmyCal,inputId),-1<cal.innerHTML.indexOf(elem.className)?uiUtil.setFocus(uiUtil.queryOne("a."+elem.className,cal)):uiUtil.setFocus(uiUtil.queryOne("a.monthYear",cal))));break;case"navPrevYear":dmyCal.month===maxDateMonth&&dmyCal.year===maxDateYear||(dmyCal.day=_priv._getLastDayOfMonth(new Date("01/"+monthYear[0]+"/"+monthYear[1])),dmyCal=_priv._previousYear(_priv._convertDMYToNumeric(dmyCal)),_priv._validateMinMaxRange(dmyCal,inputId)&&(cal.innerHTML=_priv._getDatePickerHtml(dmyCal,inputId)));break;case"navNextYear":dmyCal.month===maxDateMonth&&dmyCal.year===maxDateYear||(dmyCal=_priv._nextYear(_priv._convertDMYToNumeric(dmyCal)),_priv._validateMinMaxRange(dmyCal,inputId)&&(cal.innerHTML=_priv._getDatePickerHtml(dmyCal,inputId)))}}catch(e){}},_priv._handleOptionsNavigation=function(elem,cal){try{var inputId=cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1)),startOptYr=parseInt(document.getElementById("startOptYr_"+inputId).value,10),endOptYr=parseInt(document.getElementById("endOptYr_"+inputId).value,10),selYear=parseInt(document.getElementById("selYr_"+inputId).value,10),divMonths=uiUtil.queryOne("div.dpMon",document.getElementById("dpOptions_"+inputId)),divYears=uiUtil.queryOne("div.dpYr",document.getElementById("dpOptions_"+inputId)),settings=_priv._getSettings(inputId),minDate=_priv._parseDateStringToDateObject(settings.minDate,inputId),maxDate=_priv._parseDateStringToDateObject(settings.maxDate,inputId);switch(elem.className){case"fastNavPrevYrs":_priv._validateMinMaxRange({day:31,month:12,year:startOptYr-1},inputId)&&(divYears.innerHTML=_priv._setOptionsYears({day:1,month:1,year:startOptYr-5},inputId),divMonths.innerHTML=startOptYr-10<=selYear&&selYear<startOptYr?_priv._setOptionsMonths({day:31,month:12,year:selYear},inputId):_priv._setOptionsMonths({day:31,month:12,year:startOptYr-1},inputId),minDate.getFullYear()<startOptYr-10?uiUtil.setFocus(uiUtil.queryOne("a."+elem.className,cal)):uiUtil.setFocus(uiUtil.queryOne("a.fastNavNextYrs",cal)));break;case"fastNavNextYrs":_priv._validateMinMaxRange({day:1,month:1,year:endOptYr+1},inputId)&&(divYears.innerHTML=_priv._setOptionsYears({day:1,month:1,year:endOptYr+6},inputId),divMonths.innerHTML=endOptYr<selYear&&selYear<=endOptYr+10?_priv._setOptionsMonths({day:1,month:1,year:selYear},inputId):_priv._setOptionsMonths({day:1,month:1,year:endOptYr+1},inputId),maxDate.getFullYear()>endOptYr+10?uiUtil.setFocus(uiUtil.queryOne("a."+elem.className,cal)):uiUtil.setFocus(uiUtil.queryOne("a.fastNavPrevYrs",cal)))}}catch(e){}},_priv._previousQuarter=function(dmyCal){try{dmyCal.month+=-3}catch(e){}finally{return _priv._recalculateDMY(dmyCal)}},_priv._previousMonth=function(dmyCal){try{dmyCal.month+=-1}catch(e){}finally{return _priv._recalculateDMY(dmyCal)}},_priv._nextMonth=function(dmyCal){try{dmyCal.month+=1}catch(e){}finally{return _priv._recalculateDMY(dmyCal)}},_priv._nextQuarter=function(dmyCal){try{dmyCal.month+=3}catch(e){}finally{return _priv._recalculateDMY(dmyCal)}},_priv._previousYear=function(dmyCal){try{dmyCal.month+=-12}catch(e){}finally{return _priv._recalculateDMY(dmyCal)}},_priv._nextYear=function(dmyCal){try{dmyCal.month+=12}catch(e){}finally{return _priv._recalculateDMY(dmyCal)}},_priv._recalculateDMY=function(dmyCal){try{dmyCal.month<=0?(dmyCal.month+=12,dmyCal.year-=1):12<dmyCal.month&&(dmyCal.month-=12,dmyCal.year+=1)}catch(e){}finally{return dmyCal}},_priv._showInlineError=function(elem){try{uiUtil.css.addClass(elem,"invalidDate")}catch(e){}},_priv._removeInlineError=function(elem){try{uiUtil.css.removeClass(elem,"invalidDate")}catch(e){}},_priv._forceOptionsOK=function(cal){try{var inputId=cal.id.substring(cal.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1)),okBtn=document.getElementById("dpOK_"+inputId),opts=document.getElementById("dpOther_"+inputId);_priv._runOptionsActions(okBtn,opts,cal)}catch(e){}},_events._iconClick=function(ev){try{var icon=uiUtil.getHTMLObjFromEvent(ev),elemId=icon.id.substring(icon.id.indexOf("cal_")+4),cal=document.getElementById(PREFIX_ID+elemId);_priv._hideAllDatePickers(elemId),_priv._showHideDatePicker(icon,cal),uiUtil.stopEvent(ev)}catch(e){}},_events._inputBlur=function(ev){try{var elem=uiUtil.getHTMLObjFromEvent(ev),dateParsed=null,settings=_priv._getSettings(elem.id);elem&&(0<uiUtil.trim(elem.value).length?(dateParsed=_priv._getFormattedDate(elem.value,elem.id))?(elem.value!==(elem.value=dateParsed)&&uiEvents.trigger(elem,"change"),settings.display.autoError&&_priv._removeInlineError(elem)):settings.display.autoError&&_priv._showInlineError(elem):settings.display.autoError&&_priv._removeInlineError(elem))}catch(e){}},_events._inputFocus=function(ev){},_events._calClick=function(ev){try{for(var parent=uiUtil.getHTMLObjFromEvent(ev),clickElem=null,clickParent=null;parent.id.indexOf(PREFIX_ID)<0;)"A"===parent.nodeName&&(clickElem=parent),parent=parent.parentNode;if(clickElem)switch(clickElem.className){case"fastNavPrevQtr":case"navPrevMon":case"navNextMon":case"fastNavNextQtr":_priv._handleCalHeaderNavigation(clickElem,parent);break;case"monthYear":_priv._showHideOptions(clickElem,document.getElementById("dpOptions_"+parent.id.substring(parent.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1))));break;case"fastNavPrevYrs":case"fastNavNextYrs":_priv._handleOptionsNavigation(clickElem,parent);break;default:for(clickParent=clickElem;clickParent!==parent&&"BODY"!==clickParent.nodeName;){if("dpMon"===clickParent.className){_priv._setOptionsSelectedMonth(clickElem,clickParent,parent),"dblclick"===ev.type&&_priv._forceOptionsOK(parent);break}if("dpYr"===clickParent.className){_priv._setOptionsSelectedYear(clickElem,clickParent,parent),"dblclick"===ev.type&&_priv._forceOptionsOK(parent);break}if("dpOther"===clickParent.className){_priv._runOptionsActions(clickElem,clickParent,parent);break}if("dpDays"===clickParent.className){_priv._setSelectedDate(clickElem,parent);break}clickParent=clickParent.parentNode}}uiUtil.stopEvent(ev)}catch(e){}},_events._calKeydown=function(ev){try{var elem=uiUtil.getHTMLObjFromEvent(ev),parent=uiUtil.getParentElem(elem,".dp"),inputId=parent.id.substring(parent.id.indexOf(PREFIX_ID+"_")+(PREFIX_ID.length+1)),calIcon=document.getElementById("cal_"+inputId),cal=document.getElementById(PREFIX_ID+inputId),linksCal=[],linksOpts=[];switch(ev.keyCode){case 27:_priv._showHideDatePicker(calIcon,cal,!0);break;case 9:linksCal=uiUtil.query("a",document.getElementById("dpCalWrap_"+inputId)),linksOpts=uiUtil.query("a",document.getElementById("dpOptions_"+inputId)),(elem.id==="dpCalWrap_"+inputId&&ev.shiftKey||linksCal[linksCal.length-1]===elem&&!ev.shiftKey)&&(_priv._hideDatePicker(cal),uiUtil.setFocus(document.getElementById("cal_"+inputId)),uiUtil.stopEvent(ev)),(elem.id==="dpOptions_"+inputId&&ev.shiftKey||linksOpts[linksOpts.length-1]===elem&&!ev.shiftKey)&&(_priv._runOptionsClose(cal),uiUtil.stopEvent(ev));break;case 37:uiUtil.css.hasClass(document.getElementById("dpOptions_"+inputId),"hidden")&&(_priv._handleCalHeaderNavigation(uiUtil.queryOne(".navPrevMon",cal),cal),uiUtil.stopEvent(ev));break;case 39:uiUtil.css.hasClass(document.getElementById("dpOptions_"+inputId),"hidden")&&(_priv._handleCalHeaderNavigation(uiUtil.queryOne(".navNextMon",cal),cal),uiUtil.stopEvent(ev));break;case 38:uiUtil.css.hasClass(document.getElementById("dpOptions_"+inputId),"hidden")&&(_priv._handleCalHeaderNavigation("navNextYear",cal),uiUtil.setFocus(uiUtil.queryOne("a.monthYear",cal)),uiUtil.stopEvent(ev));break;case 40:uiUtil.css.hasClass(document.getElementById("dpOptions_"+inputId),"hidden")&&(_priv._handleCalHeaderNavigation("navPrevYear",cal),uiUtil.setFocus(uiUtil.queryOne("a.monthYear",cal)),uiUtil.stopEvent(ev))}}catch(e){}},_events._bodyClick=function(ev){try{for(var parent=uiUtil.getHTMLObjFromEvent(ev).parentNode,bubbledToCal=!1;"BODY"!==parent.nodeName;){if(-1<parent.id.indexOf(PREFIX_ID)){bubbledToCal=!0;break}parent=parent.parentNode}bubbledToCal||_priv._hideAllDatePickers()}catch(e){}},_events._windowResize=function(){try{for(var cals=uiUtil.query("div.dp"),i=cals.length;0<=(i-=1);)uiUtil.css.hasClass(cals[i],"hidden")||_priv._setDatePickerPosition(cals[i])}catch(e){}},{init:function(){try{for(var calLinks=uiUtil.query("a.calendar"),i=calLinks.length;0<=(i-=1);)_priv._setupField(calLinks[i]);uiUtil.attachEvent(document.body,"click",_events._bodyClick),uiUtil.attachEvent(window,"resize",_events._windowResize)}catch(e){}},setImagesPath:function(url){try{"string"==typeof url&&0<uiUtil.trim(url).length&&(_imgPath=url)}catch(e){}},customize:function(settings){try{var i=0,j=0,k=0,dp=null,minDefaultDate=new Date(_defaultSettings_datePickers[0].minDate),maxDefaultDate=new Date(_defaultSettings_datePickers[0].maxDate);if("object"==typeof settings)for(i=settings.datePickers.length;j<i;)(dp=settings.datePickers[j]).inputId&&0<uiUtil.trim(dp.inputId).length&&(dp.display||(dp.display={}),_mySettings.datePickers[k]={inputId:dp.inputId,culture:dp.culture||_defaultSettings_datePickers[0].culture,minDate:dp.minDate||_priv._setDateToCulture({day:minDefaultDate.getDate(),month:minDefaultDate.getMonth()+1,year:minDefaultDate.getFullYear()},dp.inputId,CULTURES[dp.culture]),maxDate:dp.maxDate||_priv._setDateToCulture({day:maxDefaultDate.getDate(),month:maxDefaultDate.getMonth()+1,year:maxDefaultDate.getFullYear()},dp.inputId,CULTURES[dp.culture]),display:{theme:dp.display.theme||_defaultSettings_datePickers[0].display.theme,autoError:dp.display.autoError||_defaultSettings_datePickers[0].display.autoError,enableBoundaryDetection:dp.display.enableBoundaryDetection||_defaultSettings_datePickers[0].display.enableBoundaryDetection}},dp.calLink?_priv._setupField(dp.calLink):(dp.calLink=document.getElementById("cal_"+dp.inputId),dp.calLink&&_priv._setupField(dp.calLink)),k+=1),j+=1}catch(e){}}}}(),PLUGIN.namespace("checkblock"),PLUGIN.checkblock=function(){var DEFAULT_BLOCK_CONFIG={id:"",show:{condition:{items:[],operator:"and"}},fieldIds:[],elem:null,dependents:[],isVisible:!0},DEFAULT_FIELD_CONFIG={id:"",value:"",elem:null,labelElem:null},DEFAULT_CONDITION_CONFIG={items:[],operator:"and"},FIELD_VALUES={selected:"selected",unselected:"unselected"},OPERATORS={and:"and",or:"or",none:""},CLASSES_block="checkblock",CLASSES_hidden="hidden",ID_SUFFIX_TEST=/_block$/,ATTRIBUTES={idList:"data-checkblock-field-id",storeOverflow:"data-checkblock-overflow"},du={query:uiUtil.query,queryOne:uiUtil.queryOne,addClass:uiUtil.css.addClass,removeClass:uiUtil.css.removeClass,hasClass:uiUtil.css.hasClass,getParentElem:uiUtil.getParentElem,extend:uiUtil.extend,typeOf:uiUtil.typeOf,establishElementId:uiUtil.establishElementId,isRadioButton:uiMethods.radioButtons.isRadioButton,isCheckBox:uiMethods.checkBoxes.isCheckBox,isCheckableInput:uiMethods.checkBoxes.isCheckableInput,hasAttribute:uiUtil.hasAttribute,getSelectedOption:uiMethods.dropdowns.getSelectedOption,logError:uiUtil.errorHandling.jsLog.addEntry,browser:uiUtil.browser,trim:uiUtil.trim,event:{add:uiUtil.attachEvent,remove:uiUtil.detachEvent,getTarget:uiUtil.getHTMLObjFromEvent}},blocks={},priv={},_customize=function(configs){try{var i,checkField;if(!configs||"object"!=typeof configs)return!1;for(i in"array"!==du.typeOf(configs)&&(configs=[configs]),configs.forEach(function(config){var cond,addId,block=du.extend(!0,{},DEFAULT_BLOCK_CONFIG,config);if(!(block.id&&block.show&&block.show.condition&&block.show.condition.items&&block.show.condition.items.length))return!1;if(block.elem||(block.elem=document.getElementById(block.id)),!block.elem)return!1;if(du.addClass(block.elem,CLASSES_block),("none"===block.elem.style.display||du.hasClass(block.elem,CLASSES_hidden))&&(block.isVisible=!1),block.show.condition&&(block.show.condition=priv.validateCondition(block.show.condition,block.elem)),!block.show.condition)return!1;for(addId=function(itm){itm.id&&!itm.condition&&block.fieldIds.push(itm.id)},cond=block.show;cond&&cond.condition;)cond.condition.items.forEach(addId),cond=cond.condition;blocks[block.id]=block}),checkField=function(fieldId){priv.evaluateField(fieldId)},blocks)blocks.hasOwnProperty(i)&&!priv.hasParentBlock(i)&&blocks[i].fieldIds.forEach(checkField)}catch(e){du.logError(e,arguments)}};return priv.init=function(){try{var discoveredBlocks=[];du.query("."+CLASSES_block).forEach(function(blockElem){var block,blockIdentifier,fieldElem,fieldElems,field;if(blocks.hasOwnProperty(du.establishElementId(blockElem)))return!1;if(blockIdentifier=blockElem.id.replace(ID_SUFFIX_TEST,""),(fieldElem=document.getElementById(blockIdentifier))||(fieldElem=du.queryOne('[data-value-dep-id="'+blockIdentifier+'"]')),fieldElem)(field=du.extend(!0,{},DEFAULT_FIELD_CONFIG)).id=blockIdentifier,field.value=FIELD_VALUES.selected,field.elem=fieldElem,(block=du.extend(!0,{},DEFAULT_BLOCK_CONFIG)).id=blockElem.id,block.show.condition=du.extend(!0,{},DEFAULT_CONDITION_CONFIG),block.show.condition.items.push(field);else{if(!(fieldElems=du.query("."+blockIdentifier)).length)return!1;(block=du.extend(!0,{},DEFAULT_BLOCK_CONFIG)).id=blockElem.id,block.show.condition=du.extend(!0,{},DEFAULT_CONDITION_CONFIG),block.show.condition.operator=OPERATORS.or,fieldElems.forEach(function(elem){(field=du.extend(!0,{},DEFAULT_FIELD_CONFIG)).id=du.establishElementId(elem),field.value=FIELD_VALUES.selected,field.elem=elem,block.show.condition.items.push(field)})}discoveredBlocks.push(block)}),_customize(discoveredBlocks)}catch(e){du.logError(e,arguments)}},priv.validateCondition=function(cond,blockElem){try{return cond.items&&"array"===du.typeOf(cond.items)?(cond.items=priv.validateItems(cond.items,blockElem),cond.items.length?((!cond.operator||cond.operator&&!OPERATORS.hasOwnProperty(cond.operator))&&(cond.operator=OPERATORS.none),cond.condition&&(cond.condition=priv.validateCondition(cond.condition,blockElem)),cond):null):null}catch(e){du.logError(e,arguments)}},priv.validateItems=function(items,blockElem){try{var itemsToKeep=[];return items.forEach(function(itm){var field,labelElem,inputElem,select,parentBlock,ids;if(itm.condition)return(itm=priv.validateCondition(itm,blockElem))&&itemsToKeep.push(itm),!1;if(!(field=du.extend(!0,{},DEFAULT_FIELD_CONFIG,itm)).id)return!1;if(field.elem=field.elem||document.getElementById(field.id),!field.elem)return!1;if(inputElem=field.elem,du.isRadioButton(inputElem))du.query('input[name="'+inputElem.name+'"]').forEach(function(radio){du.hasAttribute(radio,ATTRIBUTES.idList)?-1===(ids=radio.getAttribute(ATTRIBUTES.idList).split(",")).indexOf(field.id)&&(ids.push(field.id),radio.setAttribute(ATTRIBUTES.idList,ids.join(","))):(radio.setAttribute(ATTRIBUTES.idList,field.id),du.event.add(radio,"change",priv.onFieldChange),du.browser.isOldIE&&du.event.add(radio,"click",priv.onFieldChange))});else if(/^option$/i.test(inputElem.nodeName))select=du.getParentElem(inputElem,"select"),du.hasAttribute(select,ATTRIBUTES.idList)?-1===(ids=select.getAttribute(ATTRIBUTES.idList).split(",")).indexOf(field.id)&&(ids.push(field.id),select.setAttribute(ATTRIBUTES.idList,ids.join(","))):(select.setAttribute(ATTRIBUTES.idList,field.id),du.event.add(select,"change",priv.onFieldChange),(du.browser.isFirefox||du.browser.isOldIE)&&du.event.add(select,"keyup",priv.forceSelectChangeEvent));else{if(!du.isCheckBox(inputElem))return!1;du.event.add(inputElem,"change",priv.onFieldChange),du.browser.isOldIE&&du.event.add(inputElem,"click",priv.onFieldChange)}(labelElem=field.labelElem||priv.getLabelByInput(inputElem))&&(priv.addAttributeValue(labelElem,"aria-owns",blockElem.id),priv.addAttributeValue(labelElem,"aria-controls",blockElem.id),priv.addAttributeValue(blockElem,"aria-labelledby",du.establishElementId(labelElem))),blockElem.setAttribute("role","region"),blockElem.setAttribute("aria-live","polite"),blockElem.style.display&&"none"!==blockElem.style.display?(blockElem.setAttribute("aria-hidden","false"),blockElem.setAttribute("aria-expanded","true"),labelElem&&labelElem.setAttribute("aria-expanded","true")):(blockElem.setAttribute("aria-hidden","true"),blockElem.setAttribute("aria-expanded","false"),labelElem&&labelElem.setAttribute("aria-expanded","false")),field.value&&FIELD_VALUES.hasOwnProperty(field.value)||(field.value=FIELD_VALUES.selected),(parentBlock=du.getParentElem(inputElem,"."+CLASSES_block))&&parentBlock.id&&blocks.hasOwnProperty(parentBlock.id)&&priv.getBlocksByFieldId(parentBlock.id.replace(ID_SUFFIX_TEST,"")).forEach(function(block){block.dependents.push(field.id+"_block")}),field.elem=inputElem,labelElem&&(field.labelElem=labelElem),itemsToKeep.push(field)}),itemsToKeep}catch(e){du.logError(e,arguments)}},priv.evaluateField=function(fieldId){try{priv.getBlocksByFieldId(fieldId).forEach(function(block){if(!block.show.condition)return!1;priv.isConditionSatisfied(block.show.condition)?priv.hasOnlyHiddenParentBlocks(block.id)||priv.showBlockByFieldId(block,fieldId):priv.hideBlockByFieldId(block,fieldId)})}catch(e){du.logError(e,arguments)}},priv.isConditionSatisfied=function(cond){var isSatisfied=!1;try{var numSatisfiedItems=0;cond.items&&cond.items.length?(cond.items.forEach(function(itm){itm.conditon?priv.isConditionSatisfied(itm.condition)&&numSatisfiedItems++:itm.value===FIELD_VALUES.selected&&priv.isElementSelected(itm.elem)?numSatisfiedItems++:itm.value!==FIELD_VALUES.unselected||priv.isElementSelected(itm.elem)||numSatisfiedItems++}),cond.operator===OPERATORS.and&&numSatisfiedItems===cond.items.length?isSatisfied=!0:cond.operator===OPERATORS.or&&0<numSatisfiedItems&&(isSatisfied=!0)):isSatisfied=!0}catch(e){du.logError(e,arguments)}finally{return isSatisfied}},priv.showBlockByFieldId=function(block,fieldId){try{var field=priv.getFieldById(fieldId);priv.showElement(block.elem),block.isVisible=!0,field.elem.setAttribute("aria-expanded","true"),block.elem.setAttribute("aria-hidden","false"),block.elem.setAttribute("aria-expanded","true"),field.labelElem&&field.labelElem.setAttribute("aria-expanded","true"),block.dependents.forEach(function(depId){blocks.hasOwnProperty(depId)&&blocks[depId].fieldIds.forEach(function(id){priv.evaluateField(id)})})}catch(e){du.logError(e,arguments)}},priv.hideBlockByFieldId=function(block,fieldId){try{var field=priv.getFieldById(fieldId);priv.hideElement(block.elem),block.isVisible=!1,field.elem.setAttribute("aria-expanded","false"),block.elem.setAttribute("aria-hidden","true"),block.elem.setAttribute("aria-expanded","false"),field.labelElem&&field.labelElem.setAttribute("aria-expanded","false"),block.dependents.forEach(function(depId){blocks.hasOwnProperty(depId)&&blocks[depId].fieldIds.forEach(function(id){priv.hasOnlyHiddenParentBlocks(blocks[depId].id)&&priv.hideBlockByFieldId(blocks[depId],id)})})}catch(e){du.logError(e,arguments)}},priv.showElement=function(elem){try{if(!du.hasClass(elem,CLASSES_hidden))return!1;du.browser.supports.animation?uiAnimate.height.expand(elem):(du.removeClass(elem,CLASSES_hidden),elem.style.height="auto")}catch(e){du.logError(e,arguments)}},priv.hideElement=function(elem){try{if(du.hasClass(elem,CLASSES_hidden))return!1;du.browser.supports.animation?uiAnimate.height.collapse(elem):du.addClass(elem,CLASSES_hidden)}catch(e){du.logError(e,arguments)}},priv.getBlocksByFieldId=function(id){try{var i,matches=[];for(i in blocks)blocks.hasOwnProperty(i)&&-1!==blocks[i].fieldIds.indexOf(id)&&matches.push(blocks[i]);return matches}catch(e){du.logError(e,arguments)}},priv.getFieldById=function(id){try{var field,obj,i,checkId=function(elem){return elem.id===id&&(field=elem,!0)};for(i in blocks)if(blocks.hasOwnProperty(i)&&-1!==blocks[i].fieldIds.indexOf(id)){for(obj=blocks[i].show;!field&&obj&&obj.condition;)obj.condition.items.some(checkId),obj=obj.condition;if(field)break}return field}catch(e){du.logError(e,arguments)}},priv.hasOnlyHiddenParentBlocks=function(blockId){try{for(var ids=priv.getParentBlockIds(blockId),numIds=ids.length,i=0;i<numIds;){if(blocks[ids[i]].isVisible)return!1;i++}return 0<ids.length}catch(e){du.logError(e,arguments)}},priv.getParentBlockIds=function(blockId){try{var i,ids=[];for(i in blocks)blocks.hasOwnProperty(i)&&-1!==blocks[i].dependents.indexOf(blockId)&&ids.push(i);return ids}catch(e){du.logError(e,arguments)}},priv.hasParentBlock=function(id){try{var i;for(i in blocks)if(blocks.hasOwnProperty(i)&&-1!==blocks[i].dependents.indexOf(id))return!0;return!1}catch(e){du.logError(e,arguments)}},priv.getLabelByInput=function(inputElem){try{return/^option$/i.test(inputElem.nodeName)&&(inputElem=du.getParentElem(inputElem,"select")),du.queryOne('label[for="'+du.establishElementId(inputElem)+'"]')||null}catch(e){du.logError(e,arguments)}},priv.addAttributeValue=function(elem,attr,value){try{var values="";return du.hasAttribute(elem,attr)?(" "+(values=du.trim(elem.getAttribute(attr)," "))+" ",-1===textValues.indexOf(value)&&(values+=" "+value)):values=value,elem.setAttribute(attr,values),values}catch(e){du.logError(e,arguments)}},priv.isElementSelected=function(elem){try{return du.isCheckableInput(elem)?elem.checked:!!/^option$/i.test(elem.nodeName)&&elem.selected}catch(e){du.logError(e,arguments)}},priv.onFieldChange=function(evt){try{var fieldIds,targ=du.event.getTarget(evt);/^input$|^select$/i.test(targ.nodeName)&&((fieldIds=targ.getAttribute(ATTRIBUTES.idList))&&fieldIds.length&&fieldIds.split(",").forEach(function(id){priv.evaluateField(id)}),priv.evaluateField(targ.id))}catch(e){du.logError(e,arguments)}},priv.onShowTransitionEnd=function(evt){try{var targ;"height"===evt.propertyName&&((targ=du.event.getTarget(evt)).style.transition="",targ.style.overflow="visible",du.removeClass(targ,CLASSES_hidden),targ.style.height="auto",du.browser.isFirefox||(targ.parentNode.style.overflow=targ.parentNode.getAttribute(ATTRIBUTES.storeOverflow)),du.event.remove(targ,du.browser.eventNames.transitionEnd,priv.onShowTransitionEnd))}catch(e){du.logError(e,arguments)}},priv.onHideTransitionEnd=function(evt){try{var targ;"height"===evt.propertyName&&((targ=du.event.getTarget(evt)).style.overflow="visible",targ.style.transition="",targ.style.height="auto",du.addClass(targ,CLASSES_hidden),du.browser.isFirefox||(targ.parentNode.style.overflow=targ.parentNode.getAttribute(ATTRIBUTES.storeOverflow)),du.event.remove(targ,du.browser.eventNames.transitionEnd,priv.onHideTransitionEnd))}catch(e){du.logError(e,arguments)}},priv.forceSelectChangeEvent=function(evt){try{var targ=du.event.getTarget(evt);targ.blur(),targ.focus()}catch(e){du.logError(e,arguments)}},window.attachEvent||"function"!=typeof domready?du.event.add(window,"load",priv.init):domready(priv.init),{customize:_customize,updateBlocksById:function(blockIds){try{var discoveredBlocks=[];"string"===du.typeOf(blockIds)&&(blockIds=[blockIds]);for(var i=0;i<blockIds.length;i++){var block,blockIdentifier,fieldElem,fieldElems,field;if(blockElem=document.getElementById(blockIds[i]),!blockElem)return!1;if(du.hasAttribute(blockElem,"aria-labelledby")&&blockElem.setAttribute("aria-labelledby",""),blockIdentifier=blockElem.id.replace(ID_SUFFIX_TEST,""),(fieldElem=document.getElementById(blockIdentifier))||(fieldElem=du.queryOne('[data-value-dep-id="'+blockIdentifier+'"]')),fieldElem)(field=du.extend(!0,{},DEFAULT_FIELD_CONFIG)).id=blockIdentifier,field.value=FIELD_VALUES.selected,field.elem=fieldElem,(block=du.extend(!0,{},DEFAULT_BLOCK_CONFIG)).id=blockElem.id,block.show.condition=du.extend(!0,{},DEFAULT_CONDITION_CONFIG),block.show.condition.items.push(field);else{if(!(fieldElems=du.query("."+blockIdentifier)).length)return!1;(block=du.extend(!0,{},DEFAULT_BLOCK_CONFIG)).id=blockElem.id,block.show.condition=du.extend(!0,{},DEFAULT_CONDITION_CONFIG),block.show.condition.operator=OPERATORS.or,fieldElems.forEach(function(elem){(field=du.extend(!0,{},DEFAULT_FIELD_CONFIG)).id=du.establishElementId(elem),field.value=FIELD_VALUES.selected,field.elem=elem,block.show.condition.items.push(field)})}discoveredBlocks.push(block)}_customize(discoveredBlocks)}catch(e){du.logError(e,arguments)}}}}(),PLUGIN.namespace("collapsible"),PLUGIN.collapsible=function(){var DEFAULT_BLOCK_CONFIG={targetElem:null,toggleElem:null,clickWrapper:null,isCollapsed:!0},DEFAULT_SETTINGS={selector:"",id:"",initialState:"collapsed",toggle:{label:{collapsed:"Show",expanded:"Hide"}},config:{float:""}},CLASSES={block:"collapsible",hidden:"hidden",toggle:"collapsible-toggle",target:"collapsible-target",collapsed:"collapsible-collapsed",expanded:"collapsible-expanded",clickWrapper:"collapsible-click-wrapper"},STATES_collapsed="collapsed",STATES_expanded="expanded",ID_SUFFIX_TEST=/_toggle$/,du={query:uiUtil.query,addClass:uiUtil.css.addClass,removeClass:uiUtil.css.removeClass,hasClass:uiUtil.css.hasClass,getParentElem:uiUtil.getParentElem,expand:uiAnimate.height.expand,collapse:uiAnimate.height.collapse,extend:uiUtil.extend,typeOf:uiUtil.typeOf,establishElementId:uiUtil.establishElementId,logError:uiUtil.errorHandling.jsLog.addEntry,event:{add:uiUtil.attachEvent,getTarget:uiUtil.getHTMLObjFromEvent}},blocks={},priv={};return priv.setupOptions=function(options){options.forEach(function(obj){var settings,elements;if("element"===du.typeOf(obj))settings=du.extend(!0,{},DEFAULT_SETTINGS),elements=[obj];else{if(!(settings=du.extend(!0,{},DEFAULT_SETTINGS,obj)).selector)return!1;elements=du.query(settings.selector)}if(!elements.length)return!1;elements.forEach(function(elem){var block=du.extend(!0,{},DEFAULT_BLOCK_CONFIG);block.targetElem=elem,du.addClass(block.targetElem,CLASSES.target),block.id=du.establishElementId(block.targetElem),block.toggleElem=document.createElement("div"),du.addClass(block.toggleElem,CLASSES.toggle),block.toggleElem.setAttribute("role","button"),block.toggleElem.setAttribute("aria-controls",block.id),block.toggleElem.id=block.id+"_toggle",settings.config.float&&du.addClass(block.toggleElem,"float-"+settings.config.float),settings.initialState===STATES_collapsed?block.isCollapsed=!0:settings.initialState===STATES_expanded?block.isCollapsed=!1:"none"===block.targetElem.style.display||du.hasClass(block.targetElem,CLASSES.hidden)?block.isCollapsed=!1:block.isCollapsed=!0,block.clickWrapper=document.createElement("div"),block.clickWrapper.className=CLASSES.clickWrapper,block.isCollapsed?(block.clickWrapper.innerHTML=settings.toggle.label.collapsed,du.addClass(block.targetElem,CLASSES.hidden),du.addClass(block.toggleElem,CLASSES.collapsed)):(block.clickWrapper.innerHTML=settings.toggle.label.expanded,du.removeClass(block.targetElem,CLASSES.hidden),du.addClass(block.toggleElem,CLASSES.expanded)),block.toggleElem.appendChild(block.clickWrapper),priv.setDisplayAttributes(block),block.toggleElem=block.targetElem.parentNode.insertBefore(block.toggleElem,block.targetElem),du.event.add(block.clickWrapper,"click",priv.onToggleClick),block.settings=settings,blocks[block.id]=block})})},priv.evaluateField=function(block){block.isCollapsed?priv.expandBlock(block):priv.collapseBlock(block)},priv.expandBlock=function(block,doNotTrack){var trackingId;block.isCollapsed=!1,du.expand(block.targetElem),block.clickWrapper.innerHTML=block.settings.toggle.label.expanded,du.addClass(block.toggleElem,CLASSES.expanded),du.removeClass(block.toggleElem,CLASSES.collapsed),priv.setDisplayAttributes(block),doNotTrack||("pageInstructions"!==(trackingId=block.id)&&(trackingId=uiGlobal.appCode+"|"+block.id),PLUGIN.tracking.trackEvent("collapsible","Expand",trackingId))},priv.collapseBlock=function(block){var trackingId;block.isCollapsed=!0,du.collapse(block.targetElem),block.clickWrapper.innerHTML=block.settings.toggle.label.collapsed,du.addClass(block.toggleElem,CLASSES.collapsed),du.removeClass(block.toggleElem,CLASSES.expanded),priv.setDisplayAttributes(block),"pageInstructions"!==(trackingId=block.id)&&(trackingId=uiGlobal.appCode+"|"+block.id),PLUGIN.tracking.trackEvent("collapsible","Collapse",trackingId)},priv.setDisplayAttributes=function(block){block.isCollapsed?(block.toggleElem.setAttribute("aria-hidden","true"),block.toggleElem.setAttribute("aria-expanded","false")):(block.toggleElem.setAttribute("aria-hidden","false"),block.toggleElem.setAttribute("aria-expanded","true"))},priv.teardown=function(){var block,b,count=0;for(b in blocks)blocks.hasOwnProperty(b)&&(block=blocks[b],priv.expandBlock(block,!0),du.removeClass(block.targetElem,CLASSES.target),block.toggleElem.parentNode.removeChild(block.toggleElem),block.clickWrapper.parentNode.removeChild(block.clickWrapper),delete blocks[b],count++);return count},priv.onToggleClick=function(evt){var id=du.getParentElem(du.event.getTarget(evt),"."+CLASSES.toggle).id.replace(ID_SUFFIX_TEST,"");id&&blocks[id]&&priv.evaluateField(blocks[id])},{setup:function(options){try{if(!options||"object"!=typeof options)return!1;"array"!==du.typeOf(options)&&(options=[options]),priv.setupOptions(options)}catch(e){du.logError(e,arguments)}},teardown:function(){try{return priv.teardown()}catch(e){return du.logError(e,arguments),-1}},getDefaultSettings:function(){return du.extend(!0,{},DEFAULT_SETTINGS)}}}(),PLUGIN.namespace("copydata"),PLUGIN.copydata=function(){var SELECTORS_invoker=".copydata",ID_SUFFIXES_source="_source",ID_SUFFIXES_dest="_dest",ATTR_NAMES_groupId="data-copydata-id",DEFAULT_GROUP={invoker:null,source:null,dest:null,syncCheckedStateWithDest:!0},groups={},priv={},events={};return priv.copyValue=function(source,dest){var value="";uiMethods.checkBoxes.isCheckableInput(source)&&uiMethods.checkBoxes.isCheckableInput(dest)?dest.checked=source.checked:(value=uiUtil.getValueAsText(source),null===uiUtil.val(dest,value)&&(dest.innerHTML=value)),uiEvents.trigger(dest,"change")},priv.copyViaCheckbox=function(group){group.invoker.checked?priv.copyValue(group.source,group.dest):group.syncCheckedStateWithDest&&(group.dest.value="")},priv.syncCheckedStateWithDest=function(group){var val=uiUtil.trim(group.dest.value);val?/^0+(\.0+)?$/.test(val)?group.invoker.checked=!1:group.invoker.checked=!0:group.invoker.checked=!1},events.onCheckboxChange=function(evt){var elem=uiUtil.getHTMLObjFromEvent(evt);groups.hasOwnProperty(elem.id)&&priv.copyViaCheckbox(groups[elem.id])},events.onDestChange=function(evt){var group,id=uiUtil.getHTMLObjFromEvent(evt).getAttribute(ATTR_NAMES_groupId);groups.hasOwnProperty(id)&&(group=groups[id]).syncCheckedStateWithDest&&priv.syncCheckedStateWithDest(group)},{setup:function(){uiUtil.query(SELECTORS_invoker).forEach(function(invoker){var group,id,source,dest;if(!uiMethods.checkBoxes.isCheckBox(invoker))return!1;id=invoker.id,source=document.getElementById(id+ID_SUFFIXES_source),dest=document.getElementById(id+ID_SUFFIXES_dest),source&&dest&&(uiUtil.attachEvent(invoker,"change",events.onCheckboxChange),uiUtil.browser.isOldIE&&uiUtil.attachEvent(invoker,"click",events.onCheckboxChange),(group=uiUtil.extend(!0,{},DEFAULT_GROUP)).invoker=invoker,group.source=source,group.dest=dest,group.syncCheckedStateWithDest&&(dest.setAttribute(ATTR_NAMES_groupId,invoker.id),uiUtil.attachEvent(dest,"change",events.onDestChange),/^input$|^select$|^textarea$/i.test(dest.nodeName)&&uiUtil.attachEvent(dest,"keyup",events.onDestChange)),groups[invoker.id]=group)})},teardown:function(){var i;for(i in groups)groups.hasOwnProperty(i)&&(uiUtil.detachEvent(groups[i].invoker,"change",events.onCheckboxChange),groups[i]=null)}}}(),function(){var CLASSES={hidden:"hidden",container:"dropdown",toggler:"dropdown-toggler",collapsed:"dropdown-collapsed",expanded:"dropdown-expanded",selected:"dropdown-selected",optionsList:"dropdown-list"},ATTRIBUTES_optionIndex="data-dropdown-index",du={query:uiUtil.query,getParentElem:uiUtil.getParentElem,getElementPosition:uiUtil.getElementPosition,getViewPort:uiUtil.getViewPort,getScrollTop:uiUtil.getScrollTop,trim:uiUtil.trim,establishElementId:uiUtil.establishElementId,addClass:uiUtil.css.addClass,removeClass:uiUtil.css.removeClass,event:{add:uiUtil.attachEvent,remove:uiUtil.detachEvent,getTarget:uiUtil.getHTMLObjFromEvent,stop:uiUtil.stopEvent}},Dropdown=function(settings){if(!(this instanceof Dropdown))return new Dropdown(settings);if(!(settings&&"object"==typeof settings&&settings.sourceElem&&settings.sourceElem.parentNode&&settings.options&&settings.options.length))return null;var selectedIndexText,dropdownWidth,self=this,isOneOptionSelected=!1;return this.sourceElem=settings.sourceElem||null,this.options=settings.options||[],this.selectedIndex=settings.selectedIndex||0,this.widestOption=settings.widestOption||0,this.elems={},this.isCollapsed=!0,(this.self=this).callback=settings.callback,this.smallScreenWidth=isNaN(settings.smallScreenWidth)?640:settings.smallScreenWidth,selectedIndexText=this.options[this.selectedIndex].label||"Select one",this.elems.container=document.createElement("div"),this.elems.toggleWrap=document.createElement("div"),this.elems.toggleLabel=document.createElement("div"),this.elems.toggleThumb=document.createElement("i"),this.elems.optionsList=document.createElement("ul"),this.elems.container.className=CLASSES.container,dropdownWidth=Dropdown.determineTogglerWidth(self),this.elems.container.style.width=dropdownWidth+"px",this.elems.container.setAttribute("role","dropdown"),this.elems.container.setAttribute("aria-valuemin",1),this.elems.container.setAttribute("aria-valuenow",this.selectedIndex+1),this.elems.container.setAttribute("aria-valuemax",this.options.length),this.elems.container.setAttribute("aria-controls",du.establishElementId(this.elems.optionsList)),this.elems.container.setAttribute("aria-hidden","true"),this.elems.container.setAttribute("aria-expanded","false"),du.addClass(this.elems.toggleWrap,CLASSES.toggler),this.elems.toggleWrap.setAttribute("tabIndex","1"),du.event.add(this.elems.toggleWrap,"click",function(evt){Dropdown.onToggleClick(evt,self)}.bind(self)),du.event.add(this.elems.toggleWrap,"keydown",function(evt){Dropdown.onToggleKeydown(evt,self)}.bind(self)),this.elems.toggleLabel.innerHTML=selectedIndexText,this.options.forEach(function(opt,i){var listItem=document.createElement("li"),_self=this;opt.selected&&(isOneOptionSelected?opt.selected=!1:(isOneOptionSelected=!0,du.addClass(listItem,CLASSES.selected))),opt.index=i,listItem.innerHTML=opt.label,listItem.setAttribute(ATTRIBUTES_optionIndex,opt.index),listItem.setAttribute("tabIndex",1),du.event.add(listItem,"click",function(evt){Dropdown.onItemClick(evt,_self)}.bind(_self)),du.event.add(listItem,"keydown",function(evt){Dropdown.onItemDown(evt,_self)}.bind(_self)),self.elems.optionsList.appendChild(listItem),opt.element=listItem}.bind(self)),isOneOptionSelected||(this.options[0].selected=!0),this.elems.optionsList.className=CLASSES.hidden+" "+CLASSES.optionsList,this.elems.optionsList.setAttribute("aria-hidden","true"),this.elems.optionsList.setAttribute("aria-expanded","false"),this.elems.optionsList.setAttribute("tabIndex","1"),this.elems.optionsList.style.width=dropdownWidth+"px",this.elems.toggleWrap.appendChild(this.elems.toggleLabel),this.elems.toggleWrap.appendChild(this.elems.toggleThumb),this.elems.container.appendChild(this.elems.toggleWrap),document.body.appendChild(this.elems.optionsList),this.element=this.elems.container,du.event.add(window,"resize",function(evt){Dropdown.onWindowResize(evt,self)}.bind(self),!1),this};Dropdown.version="1.0.0.20150818",Dropdown.getVersion=function(){return"1.0.0.20150818"},Dropdown.show=function(DD){DD.isCollapsed=!1,Dropdown.prePositionPopover(DD),uiAnimate.height.expand(DD.elems.optionsList),DD.elems.container.setAttribute("aria-expanded","true"),DD.elems.container.setAttribute("aria-hidden","false"),DD.elems.container.classList.add(CLASSES.expanded),du.event.add(document.body,"click",function(evt){Dropdown.onBodyClick(evt,DD)}.bind(DD),!1)},Dropdown.hide=function(DD){DD.isCollapsed=!0,uiAnimate.height.collapse(DD.elems.optionsList),DD.elems.container.setAttribute("aria-expanded","false"),DD.elems.container.setAttribute("aria-hidden","true"),du.removeClass(DD.elems.container,CLASSES.expanded),du.event.remove(document.body,"click",function(evt){Dropdown.onBodyClick(evt,DD)}.bind(DD))},Dropdown.positionPopover=function(DD){var popover=DD.elems.optionsList,toggler=DD.elems.toggleWrap;Dropdown.isSmallScreen(DD),popover.style.top=du.getElementPosition(toggler)[1]+toggler.clientHeight+1+"px",popover.style.left=du.getElementPosition(toggler)[0]+"px"},Dropdown.prePositionPopover=function(DD){var popover=DD.elems.optionsList;popover.style.visibility="hidden",popover.classList.remove(CLASSES.hidden),Dropdown.positionPopover(DD),popover.classList.add(CLASSES.hidden),popover.style.visibility="visible"},Dropdown.fixTogglerWidth=function(DD){DD.elems.container.style.width=Dropdown.determineTogglerWidth(DD)+"px"},Dropdown.isSmallScreen=function(DD){return window.innerWidth<=DD.smallScreenWidth},Dropdown.determineTogglerWidth=function(DD){var dropdownWidth=Math.min(DD.sourceElem.parentNode.clientWidth-10,DD.widestOption);return window.innerWidth<DD.smallScreenWidth?dropdownWidth-=10:300<dropdownWidth&&(dropdownWidth-=20),dropdownWidth},Dropdown.setSelectedIndex=function(DD,newIndex,doNotForcefullyHide){du.removeClass(DD.options[DD.selectedIndex].element,CLASSES.selected),du.addClass(DD.options[newIndex].element,CLASSES.selected),DD.elems.toggleLabel.innerHTML=DD.options[newIndex].label,DD.elems.container.setAttribute("aria-valuenow",newIndex+1),DD.selectedIndex=newIndex,doNotForcefullyHide||DD.isCollapsed||Dropdown.hide(DD),"function"==typeof DD.callback&&DD.callback({value:DD.options[newIndex].value,element:DD.sourceElem})},Dropdown.handleLetterKey=function(code,DD){var letter=String.fromCharCode(96<=code&&code<=105?code-48:code).toLowerCase(),foundItemBeforeCurrent=-1,foundItemAfterCurrent=-1,moveFocusToIndex=-1;DD.options.some(function(opt){if(opt.firstChar||(opt.firstChar=opt.label.substr(0,1).toLowerCase()),opt.firstChar===letter)if(opt.index===DD.selectedIndex);else if(opt.index<DD.selectedIndex)-1===foundItemBeforeCurrent&&(foundItemBeforeCurrent=opt.index);else if(opt.index>DD.selectedIndex)return foundItemAfterCurrent=opt.index,!0}),-1!==foundItemAfterCurrent?moveFocusToIndex=foundItemAfterCurrent:-1!==foundItemBeforeCurrent&&(moveFocusToIndex=foundItemBeforeCurrent),-1!==moveFocusToIndex&&Dropdown.setSelectedIndex(DD,moveFocusToIndex,!0)},Dropdown.onItemClick=function(evt,DD){var listItem=du.event.getTarget(evt),newIndex=parseInt(listItem.getAttribute(ATTRIBUTES_optionIndex),10);newIndex!==DD.selectedIndex&&(Dropdown.setSelectedIndex(DD,newIndex),DD.elems.toggleWrap.focus())},Dropdown.onToggleClick=function(evt,DD){du.event.stop(evt),DD.isCollapsed?Dropdown.show(DD):Dropdown.hide(DD)},Dropdown.onToggleKeydown=function(evt,DD){var code=evt.keyCode;13===code||32===code?(du.event.stop(evt),DD.isCollapsed?Dropdown.show(DD):Dropdown.hide(DD)):9===code?evt.shiftKey||DD.isCollapsed||DD.elems.optionsList.focus():27===code?DD.isCollapsed||Dropdown.hide(DD):40===code?(du.event.stop(evt),DD.isCollapsed&&Dropdown.show(DD),DD.options[0].element.focus()):38===code?(du.event.stop(evt),DD.isCollapsed||Dropdown.hide(DD)):(48<=code&&code<=57||65<=code&&code<=90||96<=code&&code<=105)&&Dropdown.handleLetterKey(code,DD)},Dropdown.onItemDown=function(evt,DD){var listItem,itemIndex,code=evt.keyCode;du.event.stop(evt),13===code||32===code?Dropdown.onItemClick(evt,DD):!evt.shiftKey&&9===code||40===code?(listItem=du.event.getTarget(evt),itemIndex=parseInt(listItem.getAttribute(ATTRIBUTES_optionIndex),10),DD.options.length>itemIndex+1?DD.options[itemIndex+1].element.focus():DD.options[0].element.focus()):evt.shiftKey&&9===code||38===code?0<(itemIndex=(listItem=du.event.getTarget(evt)).getAttribute(ATTRIBUTES_optionIndex))?DD.options[itemIndex-1].element.focus():(Dropdown.hide(DD),DD.elems.toggleWrap.focus()):27===code?(Dropdown.hide(DD),DD.elems.toggleWrap.focus()):(48<=code&&code<=57||65<=code&&code<=90||96<=code&&code<=105)&&Dropdown.handleLetterKey(code,DD)},Dropdown.onBodyClick=function(evt,DD){var target=du.event.getTarget(evt);du.getParentElem(target,"."+CLASSES.container)||(du.event.stop(evt),Dropdown.hide(DD))},Dropdown.onWindowResize=function(evt,DD){DD.isCollapsed?Dropdown.fixTogglerWidth(DD):Dropdown.positionPopover(DD)},Dropdown.prototype={},Dropdown.prototype.destroy=function(){du.event.remove(document.body,"click",Dropdown.onBodyClick),du.event.remove(window,"resize",Dropdown.onWindowResize),du.event.remove(this.elems.toggleWrap,"click",this.onToggleClick),this.elems.container.parentNode.removeChild(container),this.selectedIndex=-1,this.elems={},this.options=[]},window.Dropdown=Dropdown}(),PLUGIN.dropdown=function(){var CLASSES_hasDropdown="has-dropdown",du={query:uiUtil.query,val:uiUtil.val,trim:uiUtil.trim,establishElementId:uiUtil.establishElementId,event:{add:uiUtil.attachEvent,stop:uiUtil.stopEvent}},priv={},dropdowns={};return priv.setup=function(selectElem){var optionElem,optionObj,i,numOptions,widthTestSelect,widthTestOption,width,DD,settings={options:[],selectedIndex:0,widestOption:0,sourceElem:selectElem,callback:priv.onValueChange,smallScreenWidth:830};for((widthTestSelect=document.createElement("select")).style.cssText="position: absolute; visibility: hidden;",widthTestOption=document.createElement("option"),widthTestSelect.appendChild(widthTestOption),selectElem.parentNode.appendChild(widthTestSelect),i=0,numOptions=selectElem.options.length;i<numOptions;)optionElem=selectElem.options[i],0,(optionObj={}).value=du.val(optionElem),optionObj.label=du.trim(optionElem.innerHTML),optionElem.getAttribute("selected")?(settings.selectedIndex=i,optionObj.selected=!0):optionObj.selected=!1,widthTestOption.innerHTML=optionObj.label,(width=parseInt(window.getComputedStyle(widthTestSelect).width,10))>settings.widestOption&&(settings.widestOption=width),settings.options.push(optionObj),i++;settings.widestOption+=5,selectElem.parentNode.removeChild(widthTestSelect),(DD=Dropdown(settings))&&(selectElem.parentNode.insertBefore(DD.element,selectElem.nextSibling),selectElem.style.display="none",dropdowns[du.establishElementId(selectElem)]=DD)},priv.teardown=function(){var id;for(id in dropdowns)dropdowns.hasOwnProperty(id)&&dropdowns[id]&&(document.getElementById(id).style.display="inline",dropdowns[id].destroy(),delete dropdowns[id])},priv.onValueChange=function(obj){du.val(obj.element,obj.value)},{setup:function(){var numSetup=0;return window.getComputedStyle&&"classList"in document.documentElement?(du.query("."+CLASSES_hasDropdown).forEach(function(elem){var selectElem;if("SELECT"!==elem.nodeName){if(!(selectElem=elem.getElementsByTagName("select"))||!selectElem.length)return!1;selectElem=selectElem[0]}else selectElem=elem;if(!selectElem)return!1;priv.setup(selectElem),numSetup++}),numSetup):0},teardown:function(){return priv.teardown(),!0}}}();var DEBUG=!1;PLUGIN.dropmenu=function(){var CLASSES={hidden:"hidden",toggler:"dropmenu-toggler",collapsed:"dropmenu-collapsed",expanded:"dropmenu-expanded",selected:"dropmenu-selected",itemList:"dropmenu-list",hasDropmenu:"has-dropmenu",container:"is-dropmenu-container"},ATTRIBUTES_itemIndex="data-dropmenu-index",dropmenus={},priv={},Dropmenu=function(DM){if(!(this instanceof Dropmenu))return new Dropmenu(DM);if(!(DM&&"object"==typeof DM&&DM.containerElem&&DM.items&&DM.items.length))return null;var self=this;return this.containerElem=DM.containerElem,this.id=uiUtil.establishElementId(this.containerElem),this.items=DM.items||[],this.elems={},this.isCollapsed=!0,(this.self=this).smallScreenWidth=isNaN(DM.smallScreenWidth)?640:DM.smallScreenWidth,this.elems.toggleWrap=document.createElement("div"),this.elems.toggleLabel=document.createElement("div"),this.elems.toggleThumb=document.createElement("i"),this.elems.itemList=document.createElement("ul"),this.elems.itemList.id=this.id+"_itemList",this.elems.toggleWrap.className="dropmenu "+CLASSES.toggler,this.elems.toggleWrap.setAttribute("role","dropdown"),this.elems.toggleWrap.setAttribute("aria-controls",this.elems.itemList.id),this.elems.toggleWrap.setAttribute("aria-hidden","true"),this.elems.toggleWrap.setAttribute("aria-expanded","false"),this.elems.toggleLabel.innerHTML=DM.title||"",this.elems.toggleWrap.setAttribute("tabIndex","1"),uiUtil.css.addClass(this.elems.toggleWrap,CLASSES.toggler),uiUtil.attachEvent(this.elems.toggleWrap,"click",function(evt){priv.onToggleClick(evt,self)}.bind(self)),uiUtil.attachEvent(this.elems.toggleWrap,"keydown",function(evt){priv.onToggleKeydown(evt,self)}.bind(self)),this.items.forEach(function(itm,i){var innerElem,listItemElem=document.createElement("li"),_self=this;itm.index=i,listItemElem.setAttribute(ATTRIBUTES_itemIndex,itm.index),listItemElem.setAttribute("tabIndex",1),itm.url?((innerElem=document.createElement("a")).href=itm.url,itm.target&&innerElem.setAttribute("target",itm.target)):innerElem=document.createElement("span"),innerElem.innerHTML=itm.label,listItemElem.appendChild(innerElem),uiUtil.attachEvent(listItemElem,"click",function(evt){priv.onItemClick(evt,_self)}.bind(_self)),uiUtil.attachEvent(listItemElem,"keydown",function(evt){priv.onItemKeydown(evt,_self)}.bind(_self)),self.elems.itemList.appendChild(listItemElem),itm.element=innerElem}.bind(self)),this.elems.itemList.className=CLASSES.hidden+" "+CLASSES.itemList,this.elems.itemList.setAttribute("aria-hidden","true"),this.elems.itemList.setAttribute("aria-expanded","false"),this.elems.itemList.setAttribute("tabIndex","1"),this.elems.toggleWrap.appendChild(this.elems.toggleLabel),this.elems.toggleWrap.appendChild(this.elems.toggleThumb),this.containerElem.appendChild(this.elems.toggleWrap),uiUtil.css.addClass(this.containerElem,CLASSES.container),document.body.appendChild(this.elems.itemList),this.element=this.elems.toggleWrap,uiUtil.attachEvent(window,"resize",function(evt){priv.onWindowResize(evt,self)}.bind(self),!1),this.bodyClickFunc=function(evt){priv.onBodyClick(evt,this)}.bind(this),this},_setup=function(DM){return DM&&priv.setup(DM)?DM:null};return priv.validate=function(DM){var containerElem,validItems=[];return DM&&DM.container&&DM.items&&"array"===uiUtil.typeOf(DM.items)&&DM.items.length?(DM.items.forEach(function(itm){return!!itm.label&&("function"!=typeof itm.confirmation&&!1!==itm.confirmation&&/delete|remove/i.test(itm.label)&&(itm.confirmation=function(){return confirm("Are you sure you want to perform this action?")}),!!(itm.url||itm.hasOwnProperty("confirmation")||itm.hasOwnProperty("callback"))&&void validItems.push(itm))}),validItems.length&&(containerElem=document.getElementById(DM.container)||uiUtil.queryOne(DM.container))?(DM.containerElem=containerElem,DM.items=validItems,DM):null):null},priv.setup=function(DM){return DM.smallScreenWidth=830,(DM=priv.validate(DM))&&(DM=new Dropmenu(DM))?(DM.containerElem.insertBefore(DM.element,DM.containerElem.firstChild),dropmenus[DM.id]=DM):null},priv.teardown=function(){var id,DM,numTornDown=0;for(id in dropmenus)dropmenus.hasOwnProperty(id)&&dropmenus[id]&&(DM=dropmenus[id],uiUtil.detachEvent(document.body,"click",DM.bodyClickFunc),uiUtil.detachEvent(window,"resize",priv.onWindowResize),uiUtil.detachEvent(DM.elems.toggleWrap,"click",DM.onToggleClick),DM.elems.toggleWrap.parentNode.removeChild(container),DM.elems={},DM.items=[],delete dropmenus[id],numTornDown++);return numTornDown},priv.show=function(DM){return DM.isCollapsed=!1,priv.prePositionPopover(DM),uiAnimate.height.expand(DM.elems.itemList),DM.elems.toggleWrap.setAttribute("aria-expanded","true"),DM.elems.toggleWrap.setAttribute("aria-hidden","false"),uiUtil.css.addClass(DM.elems.toggleWrap,CLASSES.expanded),uiUtil.attachEvent(document.body,"click",DM.bodyClickFunc),!0},priv.hide=function(DM){return DM.isCollapsed=!0,uiAnimate.height.collapse(DM.elems.itemList),DM.elems.toggleWrap.setAttribute("aria-expanded","false"),DM.elems.toggleWrap.setAttribute("aria-hidden","true"),uiUtil.css.removeClass(DM.elems.toggleWrap,CLASSES.expanded),uiUtil.detachEvent(document.body,"click",DM.bodyClickFunc),!0},priv.positionPopover=function(DM){var togglerWidth,popover=DM.elems.itemList,toggler=DM.elems.toggleWrap,togglerPosition=uiUtil.getElementPosition(toggler),winW=0;window.getComputedStyle&&(togglerWidth=parseInt(getComputedStyle(toggler).width,10)),isNaN(togglerWidth)&&(togglerWidth=toggler.scrollWidth),priv.isSmallScreen(DM)?(popover.style.top=togglerPosition[1]+toggler.clientHeight/2+12+"px",popover.style.right="6px"):(popover.style.top=togglerPosition[1]+toggler.clientHeight+5+"px",window&&window.innerWidth?winW=window.innerWidth:document.body&&document.body.offsetWidth&&(winW=document.body.offsetWidth+16),popover.style.right=winW-togglerPosition[0]-togglerWidth-18+"px")},priv.prePositionPopover=function(DM){var popover=DM.elems.itemList;popover.style.visibility="hidden",uiUtil.css.removeClass(popover,CLASSES.hidden),priv.positionPopover(DM),uiUtil.css.addClass(popover,CLASSES.hidden),popover.style.visibility="visible"},priv.isSmallScreen=function(DM){var winW=0;return window&&window.innerWidth?winW=window.innerWidth:document.body&&document.body.offsetWidth&&(winW=document.body.offsetWidth+16),winW<=DM.smallScreenWidth},priv.onItemClick=function(evt,DM){var listItem=uiUtil.getParentElem(uiUtil.getHTMLObjFromEvent(evt),"li"),itemIndex=parseInt(listItem.getAttribute(ATTRIBUTES_itemIndex),10),itm=DM.items[itemIndex];"function"!=typeof itm.confirmation||itm.confirmation(itm.callbackArgs,itm,DM,evt)?"function"==typeof itm.callback&&(itm.callback(itm.callbackArgs,itm,DM,evt),uiUtil.stopEvent(evt)):uiUtil.stopEvent(evt)},priv.onToggleClick=function(evt,DM){var id;for(id in uiUtil.stopEvent(evt),DM.isCollapsed?priv.show(DM):priv.hide(DM),dropmenus)dropmenus.hasOwnProperty(id)&&(dropmenus[id].isCollapsed||id===DM.id||priv.hide(dropmenus[id]))},priv.onToggleKeydown=function(evt,DM){var code=evt.keyCode;13===code||32===code?(uiUtil.stopEvent(evt),DM.isCollapsed?priv.show(DM):priv.hide(DM)):9===code?evt.shiftKey||DM.isCollapsed||DM.elems.itemList.focus():27===code?DM.isCollapsed||priv.hide(DM):40===code?(uiUtil.stopEvent(evt),DM.isCollapsed&&priv.show(DM),DM.items[0].element.focus()):38===code&&(uiUtil.stopEvent(evt),DM.isCollapsed||priv.hide(DM))},priv.onItemKeydown=function(evt,DM){var listItem,itemIndex,code=evt.keyCode;13===code||32===code?priv.onItemClick(evt,DM):(uiUtil.stopEvent(evt),!evt.shiftKey&&9===code||40===code?(listItem=uiUtil.getParentElem(uiUtil.getHTMLObjFromEvent(evt),"li"),itemIndex=parseInt(listItem.getAttribute(ATTRIBUTES_itemIndex),10),DM.items.length>itemIndex+1?DM.items[itemIndex+1].element.focus():DM.items[0].element.focus()):evt.shiftKey&&9===code||38===code?0<(itemIndex=(listItem=uiUtil.getHTMLObjFromEvent(evt)).getAttribute(ATTRIBUTES_itemIndex))?DM.items[itemIndex-1].element.focus():(priv.hide(DM),DM.elems.toggleWrap.focus()):27===code&&(priv.hide(DM),DM.elems.toggleWrap.focus()))},priv.onBodyClick=function(evt,DM){priv.hide(DM)},priv.onWindowResize=function(evt,DM){DM.isCollapsed||priv.positionPopover(DM)},{init:function(){var numSetup=0;return uiGlobal.dropmenus&&uiGlobal.dropmenus.length?(uiGlobal.dropmenus.forEach(function(DM){_setup(DM)&&numSetup++}),numSetup):0},setup:_setup,show:function(DM){return"string"==typeof DM&&dropmenus.hasOwnProperty(DM)&&(DM=dropmenus[DM]),!(!DM||"array"!==uiUtil.typeOf(DM.items))&&priv.show(DM)},hide:function(DM){return"string"==typeof DM&&dropmenus.hasOwnProperty(DM)&&(DM=dropmenus[DM]),!(!DM||"array"!==uiUtil.typeOf(DM.items))&&priv.hide(DM)},toggle:function(DM){return"string"==typeof DM&&dropmenus.hasOwnProperty(DM)&&(DM=dropmenus[DM]),!(!DM||"array"!==uiUtil.typeOf(DM.items))&&(DM.isCollapsed?priv.show(DM):priv.hide(DM))},teardown:function(){return priv.teardown()}}}(),uiResponsive.inputSwitch=function(){var DEFAULT_FIELDSET={id:"",container:null,items:[]},CLASSES={fieldset:"inputswitch",selected:"inputswitch-selected",horizontal:"inputswitch-horizontal",vertical:"inputswitch-vertical"},SELECTORS_containerInFieldset="fieldset .dataPn:not(.selDepFldsWrapper)",SELECTORS_container=".dataPn",SELECTORS_radioButton='input[type="radio"]',SELECTORS_checkableInput='input[type="radio"]',du={query:uiUtil.query,queryOne:uiUtil.queryOne,getParentElem:uiUtil.getParentElem,matchesSelector:uiUtil.matchesSelector,extend:uiUtil.extend,establishElementId:uiUtil.establishElementId},fieldsets={},priv={},events={};return priv.setupPage=function(){du.query(SELECTORS_containerInFieldset).forEach(function(container){du.queryOne("label",container)&&du.queryOne("input",container)&&priv.setupFields(container)})},priv.setupFields=function(container){var inputs,fieldset;if((fieldset=du.extend(!0,{},DEFAULT_FIELDSET)).id=du.establishElementId(container),fieldset.container=container,(inputs=du.query(SELECTORS_checkableInput,container)).forEach(function(input){var label=du.queryOne('label[for="'+input.id+'"]',container);label&&fieldset.items.push({label:label,input:input})}),!fieldset.items.length||inputs.length!==fieldset.items.length)return!1;container.classList.add(CLASSES.fieldset),du.matchesSelector(inputs[0],SELECTORS_radioButton)?container.classList.add(CLASSES.horizontal):container.classList.add(CLASSES.vertical),priv.updateStyles(fieldset),container.addEventListener("click",events.onContainerUpdate,!1),inputs.forEach(function(input){input.addEventListener("change",events.onContainerUpdate,!1),input.addEventListener("keyup",events.onContainerUpdate,!1)}),fieldsets[fieldset.id]=fieldset},priv.updateStyles=function(fieldset){fieldset.items.forEach(function(item){item.input.checked?item.label.classList.add(CLASSES.selected):item.label.classList.remove(CLASSES.selected)})},priv.teardown=function(){var fieldset,f,teardownItem=function(item){item.label.classList.remove(CLASSES.selected),item.input.removeEventListener("change",events.onContainerUpdate),item.input.removeEventListener("keyup",events.onContainerUpdate)};for(f in fieldsets)fieldsets.hasOwnProperty(f)&&((fieldset=fieldsets[f]).container.classList.remove(CLASSES.fieldset),fieldset.container.classList.remove(CLASSES.horizontal),fieldset.container.classList.remove(CLASSES.vertical),fieldset.container.removeEventListener("click",events.onContainerUpdate),fieldset.items.forEach(teardownItem))},events.onContainerUpdate=function(evt){var target=evt.target,container=du.getParentElem(target,SELECTORS_container),fieldset=fieldsets[container.id];fieldset&&priv.updateStyles(fieldset)},{setup:function(){priv.setupPage()},teardown:function(){priv.teardown()}}}(),PLUGIN.namespace("masktoggle"),PLUGIN.masktoggle=function(){var DEFAULT_SETTINGS={input:null,cbox:null,type:"text",touchType:"text",label:null,wrapper:null,labelText:{show:"Show",hide:"Hide"}},ATTR_NAMES={origType:"data-masktoggle-type",toggleIdSuffix:"_toggle"},priv={},events={},isTouch=!1,inputs={},du={query:uiUtil.query,queryOne:uiUtil.queryOne,getParentElem:uiUtil.getParentElem,addClass:uiUtil.css.addClass,extend:uiUtil.extend,getTarget:uiUtil.getHTMLObjFromEvent,typeOf:uiUtil.typeOf,trim:uiUtil.trim,browser:uiUtil.browser,addEvent:uiUtil.attachEvent,trigger:uiEvents.trigger},CLASSES={inputParent:"masktoggle",input:"masktoggle-input",toggleWrapper:"masktoggle-toggle-wrapper"},SELECTORS={inputsToMask:"."+CLASSES.inputParent+" .dataPn input,td."+CLASSES.inputParent+" > input,."+CLASSES.inputParent+".row-r input"};return priv.createToggle=function(settings){return settings.wrapper=document.createElement("div"),settings.wrapper.className=CLASSES.toggleWrapper,settings.toggle=document.createElement("button"),settings.toggle.innerHTML="Hide <span>input content</span>",settings.toggle.id=settings.input.id+ATTR_NAMES.toggleIdSuffix,settings.toggle.setAttribute("type","button"),settings.toggle.setAttribute("data-state","false"),settings.toggle.setAttribute("tabindex","1"),du.addClass(settings.toggle,"mask-toggle-button"),du.addEvent(settings.toggle,"click",events.onTogglerChange),settings.wrapper.appendChild(settings.toggle),settings.wrapper=settings.input.parentNode.insertBefore(settings.wrapper,settings.input.nextSibling),inputs[settings.input.id]=settings},priv.setLabelText=function(settings){var state="true"===settings.toggle.getAttribute("data-state")?"Show":"Hide";settings.toggle.innerHTML="Show"===state?"Hide <span>input content</span>":"Show <span>masked input content</span>"},priv.enableMask=function(settings,doNotTrack){return settings.input.type="password",priv.setLabelText(settings),doNotTrack||priv.trackEvent(settings,"Masked"),!0},priv.disableMask=function(settings,doNotTrack){return settings.input.type=isTouch?settings.touchType:settings.type,priv.setLabelText(settings),doNotTrack||priv.trackEvent(settings,"Unmasked"),!0},priv.toggleMask=function(settings){return"true"===settings.toggle.getAttribute("data-state")?(settings.toggle.setAttribute("data-state","false"),priv.enableMask(settings),priv.setFocus(settings),1):(settings.toggle.setAttribute("data-state","true"),priv.disableMask(settings),priv.setFocus(settings),2)},priv.setFocus=function(settings){try{settings.input.focus()}catch(e){}},priv.trackEvent=function(settings,eventName){var trackingType=(isTouch?settings.touchType:settings.type)+"|"+settings.type+","+settings.touchType;PLUGIN.tracking.trackEvent("MaskToggle",eventName,trackingType)},priv.canSetInputAttribute=function(){var body=document.body,input=document.createElement("input"),result=!0;if(window.attachEvent&&!window.addEventListener)return!1;body||(body=document.createElement("body")),input=body.appendChild(input);try{input.setAttribute("type","text")}catch(e){result=!1}return body.removeChild(input),result},events.onTogglerChange=function(evt){var input=du.getTarget(evt),settings=inputs[input.id.replace(ATTR_NAMES.toggleIdSuffix,"")];priv.toggleMask(settings)},{setup:function(items){if(!document.querySelectorAll||!uiResponsive||!priv.canSetInputAttribute())return!1;uiResponsive.getBreakpoints(),isTouch=du.browser.isSmallScreen&&Modernizr.touch,(items&&"array"===du.typeOf(items)?items:du.query(SELECTORS.inputsToMask)).forEach(function(input){var inputParent,settings=du.extend(!0,{},DEFAULT_SETTINGS),origType=du.trim(input.getAttribute(ATTR_NAMES.origType));if(inputs[input.id]||inputs[input.id.replace(/_toggle$/,"")])return!1;origType||(inputParent=du.getParentElem(input,"."+CLASSES.inputParent),origType=du.trim(inputParent.getAttribute(ATTR_NAMES.origType))),input.setAttribute("autocomplete","off"),input.setAttribute("spellcheck","false"),du.addClass(input,CLASSES.input);var inputID=input.getAttribute("id"),inputLabel=document.querySelector('label[for="'+inputID+'"'),inputLabelText=inputLabel.textContent?inputLabel.textContent:inputLabel.innerText;inputLabelText=inputLabelText.replace(":Required field",""),settings.input=input,origType&&(origType=origType.split(","),settings.type=origType[0],2===origType.length?settings.touchType=origType[1]:settings.touchType=settings.type),"false"===(settings=priv.createToggle(settings)).toggle.getAttribute("data-state")?priv.enableMask(settings,!0):priv.disableMask(settings,!0),inputs[input.id]=settings,priv.trackEvent(settings,"Rendered")})},teardown:function(items){var config,configs={};for(config in items&&"array"===du.typeOf(items)?items.forEach(function(input){input.id&&inputs[input.id]&&inputs.hasOwnProperty(input.id)&&(configs[input.id]=inputs[input.id])}):configs=inputs,configs)configs.hasOwnProperty(config)&&((config=configs[config]).wrapper.removeChild(config.cbox),config.wrapper.removeChild(config.label),config.wrapper.parentNode.removeChild(config.wrapper),inputs[config.input.id]=null)}}}(),uiResponsive.progressbar=function(){var container,bar,popover,progress,label,CLASSES={hidden:"hidden",collapsed:"progressbar-collapsed",expanded:"progressbar-expanded"},du={query:uiUtil.query,queryOne:uiUtil.queryOne,getParentElem:uiUtil.getParentElem,getElementPosition:uiUtil.getElementPosition,logError:uiUtil.errorHandling.jsLog.addEntry,breakpoints:uiResponsive.getBreakpoints(),event:{stop:uiUtil.stopEvent}},items=[],selectedIndex=-1,positionCenter=!0,enquireSettings={query:"screen and (min-width: "+du.breakpoints.medium.minWidth+"px) and (max-width: "+du.breakpoints.medium.maxWidth+"px)",options:{match:function(){positionCenter=!1,priv.positionPopover()},unmatch:function(){positionCenter=!0,priv.positionPopover()}}},priv={};return priv.setupPage=function(sourceProgBar){popover=document.createElement("ol"),items=du.query("li",sourceProgBar),selectedIndex=items.length-1,items.forEach(function(item,i){var clone=item.cloneNode(!0),indicator=document.createElement("div");clone.id="",clone.removeAttribute("style"),clone.className="",item.classList.contains("pbSelected")?(clone.classList.add("pb-selected"),selectedIndex=i):i<selectedIndex?clone.classList.add("pb-visited"):clone.classList.add("pb-unvisited"),clone.getElementsByTagName("a").length||clone.classList.add("popover-item-no-link"),indicator.className="indicator",clone.appendChild(indicator),popover.appendChild(clone)}),selectedIndex++,(container=document.createElement("div")).id="pb",(progress=document.createElement("div")).className="progress "+CLASSES.collapsed,progress.setAttribute("aria-controls","pb-popover"),progress.setAttribute("aria-hidden","true"),progress.setAttribute("aria-expanded","false"),progress.addEventListener("click",priv.onToggleClick,!1),(bar=document.createElement("div")).className="progress-bar progress-bar-"+selectedIndex+"-"+items.length,bar.setAttribute("role","progressbar"),bar.setAttribute("aria-valuemin",1),bar.setAttribute("aria-valuenow",selectedIndex),bar.setAttribute("aria-valuemax",items.length),(label=document.createElement("span")).innerHTML='<span class="toggle-image"></span> Step '+selectedIndex+" of "+items.length,popover.id="pb-popover",popover.className="popover "+CLASSES.hidden,popover.setAttribute("aria-hidden","true"),popover.setAttribute("aria-expanded","false"),progress.appendChild(bar),progress.appendChild(label),container.appendChild(progress),document.body.appendChild(popover),sourceProgBar.parentNode.insertBefore(container,sourceProgBar),enquire.register(enquireSettings.query,enquireSettings.options)},priv.teardown=function(){document.body.removeEventListener("click",priv.onBodyClick),window.removeEventListener("resize",priv.onWindowResize),progress&&progress.removeEventListener("click",priv.onToggleClick),container&&container.parentNode&&container.parentNode.removeChild(container),popover&&popover.parentNode&&popover.parentNode.removeChild(popover),enquire.unregister(enquireSettings.query,enquireSettings.options)},priv.showPopover=function(){priv.prePositionPopover(),uiAnimate.height.expand(popover),progress.setAttribute("aria-expanded","true"),progress.setAttribute("aria-hidden","false"),progress.classList.add(CLASSES.expanded),progress.classList.remove(CLASSES.collapsed),document.body.addEventListener("click",priv.onBodyClick,!1),window.addEventListener("resize",priv.onWindowResize,!1)},priv.hidePopover=function(){uiAnimate.height.collapse(popover),progress.setAttribute("aria-expanded","false"),progress.setAttribute("aria-hidden","true"),progress.classList.remove(CLASSES.expanded),progress.classList.add(CLASSES.collapsed),document.body.removeEventListener("click",priv.onBodyClick),window.removeEventListener("resize",priv.onWindowResize)},priv.positionPopover=function(){popover.style.top=du.getElementPosition(bar)[1]+bar.clientHeight+4+"px",popover.style.left=positionCenter?document.body.clientWidth/2-popover.clientWidth/2+"px":container.clientWidth/2-popover.clientWidth/2+"px"},priv.prePositionPopover=function(){popover.style.visibility="hidden",popover.classList.remove(CLASSES.hidden),priv.positionPopover(),popover.classList.add(CLASSES.hidden),popover.style.visibility="visible"},priv.onToggleClick=function(evt){du.event.stop(evt),popover.classList.contains(CLASSES.hidden)?priv.showPopover():priv.hidePopover()},priv.onBodyClick=function(evt){var target=evt.target;du.getParentElem(target,".popover")||(du.event.stop(evt),priv.hidePopover())},priv.onWindowResize=function(evt){priv.positionPopover()},{setup:function(){var sourceProgBar=document.getElementById("progress-bar");return!(!sourceProgBar||document.getElementById("pb")||(priv.setupPage(sourceProgBar),0))},teardown:function(){return priv.teardown(),!0}}}(),PLUGIN.namespace("repeatfields"),PLUGIN.repeatfields=function(){var DEFAULT_SETTINGS={id:"",fields:[],elems:{}},DEFAULT_FIELD={type:"text",size:20,label:"",baseId:"",labelSize:"labelM"},ATTRIBUTES_storeId="data-repeat-fields-id",ATTRIBUTES_index="data-repeat-fields-index",store={},priv={},events={};return priv.validateSettings=function(options){var settings,i;if(!options||"object"!=typeof options)return null;if((settings=uiUtil.extend(!0,{},DEFAULT_SETTINGS,options)).container=document.getElementById(settings.id),!settings.container)return null;if("TABLE"===settings.container.nodeName?(settings.addButton=uiUtil.queryOne(".button",settings.container.parentNode.parentNode.parentNode),settings.isTable=!0):settings.addButton=uiUtil.queryOne(".button",settings.container),!settings.addButton)return null;if(settings.isTable&&1!==settings.fields.length)return null;for(i=0;i<settings.fields.length;i++)priv.validateField(settings.fields[i])?settings.fields[i]=priv.validateField(settings.fields[i]):settings.fields.splice(i,0);return settings.count||(settings.count=0),settings},priv.validateField=function(field){if(!field||"object"!=typeof field)return null;if("table-row"===field.type){if(!(field=priv.validateTableField(field)))return null}else!(field=uiUtil.extend(!0,{},DEFAULT_FIELD,field)).hasOwnProperty("maxlength")&&field.hasOwnProperty("maxLength")&&(field.maxlength=field.maxLength,delete field.maxLength);return field},priv.validateTableField=function(field){return field&&"object"==typeof field?"array"!==uiUtil.typeOf(field.cols)?null:field:null},priv.addFields=function(settings){var buttonGroup,button;settings.count=settings.count+1,settings.elems[settings.count]={index:settings.count,lines:[]},settings.isTable?settings.fields.forEach(function(row){var tr=document.createElement("tr");row.className&&(tr.className=col.className),row.cols&&row.cols.forEach(function(col){var td=document.createElement("td");col.className&&(td.className=col.className),col.fields&&col.fields.forEach(function(field){td.innerHTML+=priv.createTableInputHTML(settings,field)}),tr.appendChild(td)}),settings.container.tBodies[0].appendChild(tr)}):(settings.fields.forEach(function(field){var line=document.createElement("div");line.className="linePn "+field.labelSize,line.innerHTML='<div class="labelPn"><div class="labelWrap"><label for="'+field.baseId+"_"+settings.count+'">'+field.label+"</label></div>"+(field.isRequired?'<div class="required">*</div>':"")+'</div><div class="dataPn">'+function(){var html="";switch(field.type){case"date":html=priv.createDateInputHTML(settings,field);break;default:html=priv.createInputHTML(settings,field)}return html}()+"</div>",settings.container.appendChild(line),settings.elems[settings.count].lines.push(line)}),(buttonGroup=document.createElement("div")).className="buttonGroup",buttonGroup.style.cssText="margin-top: 4px; margin-bottom: 10px;",(button=document.createElement("button")).setAttribute("type","button"),button.className="button",button.setAttribute(ATTRIBUTES_storeId,settings.id),button.setAttribute(ATTRIBUTES_index,settings.count),button.setAttribute("tabIndex","1"),button.innerHTML="Remove",uiUtil.attachEvent(button,"click",events.onRemoveClick),buttonGroup.appendChild(button),settings.container.appendChild(buttonGroup)),settings.elems[settings.count].lines.push(buttonGroup)},priv.createInputHTML=function(settings,field){var html="";return html+='<input type="text" id="'+field.baseId+"_"+settings.count+'" name="'+field.baseId+"_"+settings.count+'" value="'+(field.value?field.value:"")+'" size="'+field.size+'"'+(field.hasOwnProperty("maxlength")?' maxlength="'+field.maxlength+'"':"")+' tabindex="1">'},priv.createTableInputHTML=function(settings,field){var html="";if(html+='<label for="'+field.baseId+"_"+settings.count+'" class="hideOffScreen">'+field.label+"</label>","text"===field.type)html+=priv.createInputHTML(settings,field);else if("checkbox"===field.type)html+=priv.createCheckboxHTML(settings,field);else{if("button"!==field.type)return"";html+=priv.createTableButtonHTML(settings,field)}return html},priv.createTableButtonHTML=function(settings,field){var html="";return html+='<button type="button"'+(field.className?' class="'+field.className+'"':"")+">"+field.label+"</button>",field.onClick,html},priv.createDateInputHTML=function(settings,field){var html=priv.createInputHTML(settings,field);return html+='<a href="#" id="cal_'+field.baseId+"_"+settings.count+'" class="calendar" tabindex="1"></a>'},priv.createCheckboxHTML=function(settings,field){var html="";return html+='<input type="checkbox" id="'+field.baseId+"_"+settings.count+'" name="'+field.baseId+"_"+settings.count+'" value="'+(field.value?field.value:"")+'"'+(field.checked?' checked="checked"':"")+' tabindex="1">'},events.onAddClick=function(evt){var settingsId=uiUtil.getHTMLObjFromEvent(evt).getAttribute(ATTRIBUTES_storeId),settings=store[settingsId];priv.addFields(settings)},events.onRemoveClick=function(evt){var target=uiUtil.getHTMLObjFromEvent(evt),settingsId=target.getAttribute(ATTRIBUTES_storeId),index=target.getAttribute(ATTRIBUTES_index),settings=store[settingsId];settings.elems.lines;settings.elems[index].lines.forEach(function(line){line.parentNode.removeChild(line)})},{setup:function(){uiGlobal.repeatFields.forEach(function(options){var settings=priv.validateSettings(options);if(!settings)return!1;settings.addButton.setAttribute(ATTRIBUTES_storeId,settings.id),uiUtil.attachEvent(settings.addButton,"click",events.onAddClick),store[settings.id]=settings})},teardown:function(){var i;for(i in store)store.hasOwnProperty(i)&&(uiUtil.detachEvent(store[i].addButton,"click",events.onAddClick),store[i]=null)}}}(),PLUGIN.namespace("repeatfields"),PLUGIN.repeatfields=function(){var DEFAULT_SETTINGS={id:"",fields:[],elems:{}},DEFAULT_FIELD={type:"text",size:20,label:"",baseId:"",labelSize:"labelM"},ATTRIBUTES_storeId="data-repeat-fields-id",ATTRIBUTES_index="data-repeat-fields-index",NEEDS_TABLE_STRIPE_HELP=!uiUtil.browser.checkNthChildSupport(),store={},priv={},events={};return priv.validateSettings=function(options){var settings,i;if(!options||"object"!=typeof options)return null;if((settings=uiUtil.extend(!0,{},DEFAULT_SETTINGS,options)).container=document.getElementById(settings.id),!settings.container)return null;if("TABLE"===settings.container.nodeName&&(settings.isTable=!0),settings.isTable?settings.addButton=uiUtil.queryOne(".button",settings.container.parentNode.parentNode.parentNode):settings.addButton=uiUtil.queryOne(".button",settings.container),!settings.addButton)return null;if(settings.isTable||(settings.insertPoint=settings.addButton.parentNode),settings.isTable&&1!==settings.fields.length)return null;for(i=0;i<settings.fields.length;i++)priv.validateField(settings.fields[i])?settings.fields[i]=priv.validateField(settings.fields[i]):settings.fields.splice(i,0);return settings.count||(settings.count=0),settings},priv.validateField=function(field){if(!field||"object"!=typeof field)return null;if("table-row"===field.type){if(!(field=priv.validateTableField(field)))return null}else!(field=uiUtil.extend(!0,{},DEFAULT_FIELD,field)).hasOwnProperty("maxlength")&&field.hasOwnProperty("maxLength")&&(field.maxlength=field.maxLength,delete field.maxLength);return field},priv.validateTableField=function(field){return field&&"object"==typeof field?"array"!==uiUtil.typeOf(field.cols)?null:field:null},priv.addFields=function(settings){var outerWrapper,buttonLine,button;settings.count=settings.count+1,settings.elems[settings.count]={index:settings.count,lines:[]},(outerWrapper=document.createElement("fieldset")).className="repeatfields-wrapper hidden",outerWrapper.setAttribute(ATTRIBUTES_index,settings.count),settings.isTable?(settings.fields.forEach(function(row){var tr=document.createElement("tr");row.className&&(tr.className=col.className),row.cols&&row.cols.forEach(function(col){var td=document.createElement("td");col.className&&(td.className=col.className),col.fields&&col.fields.forEach(function(field){td.innerHTML+=priv.createTableInputHTML(settings,field)}),tr.appendChild(td)}),(button=document.createElement("button")).setAttribute("type","button"),button.className="icon-button icon-delete",button.setAttribute(ATTRIBUTES_storeId,settings.id),button.setAttribute(ATTRIBUTES_index,settings.count),button.setAttribute("tabIndex","1"),button.innerHTML="Remove",uiUtil.attachEvent(button,"click",events.onRemoveClick);var td=document.createElement("td");td.appendChild(button),tr.appendChild(td),settings.container.tBodies[0].appendChild(tr),settings.elems[settings.count].lines.push(tr)}),NEEDS_TABLE_STRIPE_HELP&&uiMethods.table.stripes.setStripes(settings.container)):(settings.fields.forEach(function(field){var line=document.createElement("div");line.className="linePn "+field.labelSize,line.innerHTML='<div class="labelPn"><div class="labelWrap"><label for="'+field.baseId+"_"+settings.count+'">'+field.label+"</label></div>"+(field.isRequired?'<div class="required">*</div>':"")+'</div><div class="dataPn">'+function(){var html="";switch(field.type){case"date":html=priv.createDateInputHTML(settings,field);break;default:html=priv.createInputHTML(settings,field)}return html}()+"</div>",outerWrapper.appendChild(line),settings.elems[settings.count].lines.push(line)}),(buttonLine=document.createElement("div")).className="linePn repeatfields-remove-wrapper "+settings.fields[settings.fields.length-1].labelSize,buttonLine.innerHTML='<div class="labelPn"><div class="labelWrap"></div></div><div class="dataPn"></div>',(button=document.createElement("button")).setAttribute("type","button"),button.className="button repeatfields-remove-button",button.setAttribute(ATTRIBUTES_storeId,settings.id),button.setAttribute(ATTRIBUTES_index,settings.count),button.setAttribute("tabIndex","1"),button.innerHTML="Remove",uiUtil.attachEvent(button,"click",events.onRemoveClick),uiUtil.queryOne(".dataPn",buttonLine).appendChild(button),outerWrapper.appendChild(buttonLine),settings.elems[settings.count].lines.push(buttonLine),settings.elems[settings.count].outerWrapper=outerWrapper,settings.insertPoint.parentNode.insertBefore(outerWrapper,settings.insertPoint),uiAnimate.height.expand(outerWrapper)),settings.elems[settings.count].lines.forEach(function(line){uiUtil.query(".calendar",line).forEach(function(calIcon){PLUGIN.calendar.customize({datePickers:[{inputId:calIcon.id.replace(/^cal_/,""),calLink:calIcon}]})})})},priv.addPrepopulatedFields=function(settings){var outerWrapper,buttonLine,button;if(settings.isTable)return!1;settings.prepopulate.forEach(function(prepopulatedField){settings.count=settings.count+1,settings.elems[settings.count]={index:settings.count,lines:[]},(outerWrapper=document.createElement("fieldset")).className="repeatfields-wrapper hidden",outerWrapper.setAttribute(ATTRIBUTES_index,settings.count),prepopulatedField.fields.forEach(function(field,f){var line=document.createElement("div");field=uiUtil.extend(!0,{},settings.fields[f],field),line.className="linePn "+field.labelSize,line.innerHTML='<div class="labelPn"><div class="labelWrap"><label for="'+field.baseId+"_"+settings.count+'">'+field.label+"</label></div>"+(field.isRequired?'<div class="required">*</div>':"")+'</div><div class="dataPn">'+function(){var html="";switch(field.type){case"date":html=priv.createDateInputHTML(settings,field);break;default:html=priv.createInputHTML(settings,field)}return html}()+"</div>",outerWrapper.appendChild(line),settings.elems[settings.count].lines.push(line)}),(buttonLine=document.createElement("div")).className="linePn repeatfields-remove-wrapper "+settings.fields[settings.fields.length-1].labelSize,buttonLine.innerHTML='<div class="labelPn"><div class="labelWrap"></div></div><div class="dataPn"></div>',(button=document.createElement("button")).setAttribute("type","button"),button.className="button repeatfields-remove-button",button.setAttribute(ATTRIBUTES_storeId,settings.id),button.setAttribute(ATTRIBUTES_index,settings.count),button.setAttribute("tabIndex","1"),button.innerHTML="Remove",uiUtil.attachEvent(button,"click",events.onRemoveClick),uiUtil.queryOne(".dataPn",buttonLine).appendChild(button),outerWrapper.appendChild(buttonLine),settings.elems[settings.count].lines.push(buttonLine),settings.elems[settings.count].outerWrapper=outerWrapper,settings.insertPoint.parentNode.insertBefore(outerWrapper,settings.insertPoint),uiAnimate.height.expand(outerWrapper),settings.elems[settings.count].lines.forEach(function(line){uiUtil.query(".calendar",line).forEach(function(calIcon){PLUGIN.calendar.customize({datePickers:[{inputId:calIcon.id.replace(/^cal_/,""),calLink:calIcon}]})})})})},priv.removeFields=function(settings,elemIndex){var elems=settings.elems[elemIndex];elems.outerWrapper?uiAnimate.height.collapse(elems.outerWrapper,{callback:function(elem){elem.parentNode&&elem.parentNode.removeChild(elem)}}):(elems.lines.forEach(function(line){line.parentNode.removeChild(line)}),settings.isTable&&NEEDS_TABLE_STRIPE_HELP&&uiMethods.table.stripes.setStripes(settings.container),delete settings.elems[elemIndex])},priv.createInputHTML=function(settings,field){var html="";return html+='<input type="text" id="'+field.baseId+"_"+settings.count+'" name="'+field.baseId+"_"+settings.count+'" value="'+(field.value?field.value:"")+'" size="'+field.size+'"'+(field.hasOwnProperty("maxlength")?' maxlength="'+field.maxlength+'"':"")+' tabindex="1">'},priv.createTableInputHTML=function(settings,field){var html="";if(html+='<label for="'+field.baseId+"_"+settings.count+'" class="hideOffScreen">'+field.label+"</label>","text"===field.type)html+=priv.createInputHTML(settings,field);else if("checkbox"===field.type)html+=priv.createCheckboxHTML(settings,field);else{if("button"!==field.type)return"";html+=priv.createTableButtonHTML(settings,field)}return html},priv.createTableButtonHTML=function(settings,field){var html="";return html+='<button type="button"'+(field.className?' class="'+field.className+'"':"")+">"+field.label+"</button>"},priv.createDateInputHTML=function(settings,field){var html=priv.createInputHTML(settings,uiUtil.extend(!0,{},field,{size:10,maxlength:10}));return html+=" ",html+='<a href="#" id="cal_'+field.baseId+"_"+settings.count+'" class="calendar" tabindex="1"></a>'},priv.createCheckboxHTML=function(settings,field){var html="";return html+='<input type="checkbox" id="'+field.baseId+"_"+settings.count+'" name="'+field.baseId+"_"+settings.count+'" value="'+(field.value?field.value:"")+'"'+(field.checked?' checked="checked"':"")+' tabindex="1">'},events.onAddClick=function(evt){var settingsId=uiUtil.getHTMLObjFromEvent(evt).getAttribute(ATTRIBUTES_storeId),settings=store[settingsId];priv.addFields(settings)},events.onRemoveClick=function(evt){var target=uiUtil.getHTMLObjFromEvent(evt),settingsId=target.getAttribute(ATTRIBUTES_storeId),settings=store[settingsId];priv.removeFields(settings,target.getAttribute(ATTRIBUTES_index))},{setup:function(){uiGlobal.repeatFields.forEach(function(options){var settings=priv.validateSettings(options);if(!settings)return!1;settings.addButton.setAttribute(ATTRIBUTES_storeId,settings.id),uiUtil.attachEvent(settings.addButton,"click",events.onAddClick),settings.prepopulate&&priv.addPrepopulatedFields(settings),store[settings.id]=settings})},teardown:function(){var i;for(i in store)store.hasOwnProperty(i)&&(uiUtil.detachEvent(store[i].addButton,"click",events.onAddClick),store[i]=null)}}}(),uiResponsive.table.action=function(){var NAMESPACE="actiontable",DEFAULT_PANEL_LIST={panels:[],modes:{actions:!1,select:!1,remove:!1}},DEFAULT_PANEL={id:"",title:"",primary:[],secondary:[],action:{actions:null,remove:null,select:null}},CLASSES={hidden:"hidden",floatRight:"float-right",floatLeft:"float-left",outerWrapper:NAMESPACE,selectMode:NAMESPACE+"-select-mode",editMode:NAMESPACE+"-edit-mode",menuMode:NAMESPACE+"-menu-mode",hasSelected:NAMESPACE+"-has-selected",hasSelect:NAMESPACE+"-has-select",hasNav:NAMESPACE+"-has-nav",hasActions:NAMESPACE+"-has-actions",hasRemove:NAMESPACE+"-has-remove",headerWrapper:NAMESPACE+"-header-wrapper",header:NAMESPACE+"-header",tableTitle:NAMESPACE+"-header-title",menuToggle:NAMESPACE+"-menubar-toggle",headerFloating:NAMESPACE+"-header-floating",instToggle:"table-inst-toggle",instTooltip:"table-inst-tooltip tt-action-table",menubarWrapper:NAMESPACE+"-menubar",menuLeft:NAMESPACE+"-menu-left",menuRight:NAMESPACE+"-menu-right",menuSelect:NAMESPACE+"-menu-control-selection",menuSelectAll:NAMESPACE+"-menu-select-all",menuRemove:NAMESPACE+"-menu-control-removal",menuSelectButton:NAMESPACE+"-menu-select",menuClearButton:NAMESPACE+"-menu-clear",menuDoneButton:NAMESPACE+"-menu-done",menuRemoveButton:NAMESPACE+"-menu-remove",menuEditButton:NAMESPACE+"-menu-edit",panelList:NAMESPACE+"-panel-list",panel:NAMESPACE+"-panel",panelWrapper:NAMESPACE+"-panel-wrapper",panelHasSelect:NAMESPACE+"-panel-has-select",panelHasNav:NAMESPACE+"-panel-has-nav",panelHasActions:NAMESPACE+"-panel-has-actions",panelHasRemove:NAMESPACE+"-panel-has-remove",selected:NAMESPACE+"-panel-selected",contentWrapper:NAMESPACE+"-panel-content",contentPrimary:NAMESPACE+"-panel-content-primary",contentSecondary:NAMESPACE+"-panel-content-secondary",contentSecondaryLabel:NAMESPACE+"-panel-content-secondary-label",contentSecondaryData:NAMESPACE+"-panel-content-secondary-data",controlsWrapper:NAMESPACE+"-panel-controls",controlsWrapperLeft:NAMESPACE+"-panel-controls-left",controlsWrapperRight:NAMESPACE+"-panel-controls-right",control:NAMESPACE+"-panel-control",controlView:NAMESPACE+"-panel-control-view",controlNav:NAMESPACE+"-panel-control-nav",controlSelect:NAMESPACE+"-panel-control-select",controlSelectBox:NAMESPACE+"-panel-control-selectbox",controlRemoveButton:NAMESPACE+"-panel-control-remove",totalWrapper:NAMESPACE+"-total",totalLabel:NAMESPACE+"-total-label",totalData:NAMESPACE+"-total-data",sourceTable:NAMESPACE+"-source",primary:"table-primary",secondary:"table-secondary",sourceTableTitle:"rset_title"},SELECTORS_sourceRset=".rset.action-table",ATTR_NAMES={panelNav:"data-actiontable-nav",panelSelect:"data-actiontable-select",panelRemove:"data-actiontable-remove",tableId:"data-actiontable-table-id",panelIndex:"data-actiontable-panel-index",tooltip:"data-table-tooltip-id"},ID_SUFFIXES_fauxInput="_"+NAMESPACE,TEXT_controlNav="Open",TEXT_selectBox="Select this item",TEXT_panelRemoveButton="Remove",TEXT_menuToggle="Remove...",TEXT_menu={add:"Add",select:"Select",clear:"Clear",remove:"Remove",toggler:"Remove...",done:"Cancel"},ONCLICK_REGEX=/\s+(onclick\=\"[^\"]+\")/gi,du={query:uiUtil.query,queryOne:uiUtil.queryOne,toggleClass:uiUtil.css.toggleClass,getParentElem:uiUtil.getParentElem,extend:uiUtil.extend,typeOf:uiUtil.typeOf,trim:uiUtil.trim,getElementPosition:uiUtil.getElementPosition,preload:uiMethods.preloader.addAsset,browser:uiUtil.browser,imagesPath:uiGlobal.sIFLOWImagesPath,logError:uiUtil.errorHandling.jsLog.addEntry,event:{trigger:uiEvents.trigger,stop:uiUtil.stopEvent}},lists={},priv={},events={};return priv.hasPreloaded=!1,priv.preload=function(){du.preload('<object type="image/svg+xml" data="'+du.imagesPath+'checkbox-checked.svg"></object>'),du.preload('<object type="image/svg+xml" data="'+du.imagesPath+'checkbox.svg"></object>'),du.preload('<object type="image/svg+xml" data="'+du.imagesPath+'trash-can.svg"></object>'),priv.hasPreloaded=!0},priv.setupAllTables=function(){var success=!1;return du.query(SELECTORS_sourceRset).forEach(function(rset){du.queryOne("table",rset)&&(priv.setupTable(rset),success=!0)}),success&&events.setup(),success},priv.setupTable=function(rset){var pl;pl=uiResponsive.table.create(rset),pl=du.extend(!0,{},DEFAULT_PANEL_LIST,pl),(pl=priv.collectPanels(pl)).targetElem=priv.renderPanels(pl),lists[pl.id]=pl},priv.collectPanels=function(pl){var tbody=pl.sourceElem.tBodies[0];return du.query("tr",tbody).forEach(function(tr,i){var elem,panel=du.extend(!0,{},DEFAULT_PANEL),cells=du.query("td",tr),lastCell=cells[cells.length-1];panel.id=pl.id+"_panel_"+i,pl.primary.indices.forEach(function(index){var elem,td=cells[index];panel.primary.push(td),(elem=du.queryOne("a",td))||(elem=du.queryOne('input[value="Select"], input[value*="View"]',lastCell)),elem&&(panel.action.nav=elem,pl.modes.nav=!0)}),pl.secondary.indices.forEach(function(index){panel.secondary.push(cells[index])}),cells.forEach(function(td){var cbox=du.queryOne('input[type="checkbox"]',td);cbox?(panel.action.select||(panel.action.select=cbox,pl.modes.select=!0),cbox.addEventListener("change",priv.onRealCheckBoxChange,!1)):td.classList.contains("is-dropmenu-container")&&uiGlobal.dropmenus&&(panel.action.actions=uiGlobal.dropmenus[uiGlobal.dropmenus.map(function(dm){return dm.container}).indexOf(td.id)])}),(elem=du.queryOne('.icon-delete, input[value="Remove"], [value="Delete"], [title="Delete"]',tr))&&(panel.action.remove=elem,pl.modes.remove=!0),pl.panels.push(panel)}),pl},priv.renderPanels=function(pl){var insertElement,settings,outerWrapper=document.createElement("div"),panelList=document.createElement("ol"),headerWrapper=document.createElement("div"),dropmenus=[];return outerWrapper.className=CLASSES.outerWrapper,outerWrapper.setAttribute(ATTR_NAMES.tableId,pl.id),pl.modes.nav&&outerWrapper.classList.add(CLASSES.hasNav),pl.modes.actions&&outerWrapper.classList.add(CLASSES.hasActions),pl.modes.select&&outerWrapper.classList.add(CLASSES.hasSelect),pl.modes.remove&&outerWrapper.classList.add(CLASSES.hasRemove),headerWrapper.classList.add(CLASSES.headerWrapper),(pl.title||pl.instructions.length)&&headerWrapper.appendChild(priv.createTableHeader(pl)),pl.modes.select&&headerWrapper.appendChild(priv.renderMenuBar(pl)),outerWrapper.appendChild(headerWrapper),pl.panels.forEach(function(panel,i){var panelElem,panelWrapper,contentWrapper,contentPrimary,contentSecondary,controlsWrapper,controlView,controlNav,controlSelect,controlSelectBox;(panelElem=document.createElement("li")).classList.add(CLASSES.panel),(panelWrapper=document.createElement("div")).className=CLASSES.panelWrapper,panelWrapper.setAttribute("role","link"),panelWrapper.setAttribute(ATTR_NAMES.tableId,pl.id),panelWrapper.setAttribute(ATTR_NAMES.panelIndex,i),(controlsWrapper=document.createElement("div")).classList.add(CLASSES.controlsWrapper),controlsWrapper.classList.add(CLASSES.controlsWrapperLeft),pl.modes.select&&(panelElem.classList.add(CLASSES.panelHasSelect),(controlSelect=document.createElement("div")).classList.add(CLASSES.controlSelect),controlSelect.classList.add(CLASSES.control),(controlSelectBox=document.createElement("div")).setAttribute("role","checkbox"),controlSelectBox.classList.add(CLASSES.controlSelectBox),panel.action.select.checked?(controlSelectBox.setAttribute("checked","checked"),controlSelectBox.setAttribute("aria-checked","true"),panelWrapper.classList.add(CLASSES.selected)):controlSelectBox.setAttribute("aria-checked","false"),controlSelectBox.innerHTML=TEXT_selectBox,controlSelect.appendChild(controlSelectBox),controlsWrapper.appendChild(controlSelect)),panelWrapper.appendChild(controlsWrapper),(contentWrapper=document.createElement("div")).classList.add(CLASSES.contentWrapper),(contentPrimary=document.createElement("div")).classList.add(CLASSES.contentPrimary),panel.primary.forEach(function(tdElem,i){var html=du.trim(tdElem.innerHTML," ");0!==i&&(contentPrimary.innerHTML+=" "),ONCLICK_REGEX.test(html)&&(html=html.replace(ONCLICK_REGEX,"")),contentPrimary.innerHTML+=html}),contentWrapper.appendChild(contentPrimary),pl.secondary.label&&panel.secondary.length&&(1===panel.secondary.length&&panel.secondary[0].classList.contains("rt")?((contentSecondary=document.createElement("div")).classList.add(CLASSES.contentSecondaryLabel),contentSecondary.innerHTML=pl.secondary.label+":",contentWrapper.appendChild(contentSecondary),(contentSecondary=document.createElement("div")).classList.add(CLASSES.contentSecondaryData)):((contentSecondary=document.createElement("div")).classList.add(CLASSES.contentSecondary),contentSecondary.innerHTML=pl.secondary.label+": "),panel.secondary.forEach(function(elem,i){0!==i&&(contentSecondary.innerHTML+=" "),contentSecondary.innerHTML+=du.trim(elem.innerHTML," "),elem.classList.toString().split(" ").forEach(function(className){className&&"noWrap"!==className&&contentSecondary.classList.add(className)})}),contentWrapper.appendChild(contentSecondary)),panelWrapper.appendChild(contentWrapper),(controlsWrapper=document.createElement("div")).classList.add(CLASSES.controlsWrapper),controlsWrapper.classList.add(CLASSES.controlsWrapperRight),(pl.modes.actions||pl.modes.nav||pl.modes.remove)&&((controlView=document.createElement("div")).classList.add(CLASSES.controlView),controlView.classList.add(CLASSES.control),pl.modes.actions&&(panelElem.classList.add(CLASSES.panelHasActions),(controlNav=document.createElement("div")).classList.add(CLASSES.controlNav),controlNav.setAttribute("role","button"),controlNav.innerHTML=TEXT_controlNav,controlView.appendChild(controlNav)),pl.modes.remove&&panel.action.remove&&(panelElem.classList.add(CLASSES.panelHasRemove),(controlSelectBox=document.createElement("div")).classList.add(CLASSES.controlRemoveButton),controlSelectBox.setAttribute("role","button"),controlSelectBox.innerHTML=TEXT_panelRemoveButton,controlView.appendChild(controlSelectBox)),controlsWrapper.appendChild(controlView)),panelWrapper.appendChild(controlsWrapper),panelElem.appendChild(panelWrapper),panelList.appendChild(panelElem),panel.action.actions&&(panel.action.actions.container=uiUtil.establishElementId(controlsWrapper),delete panel.action.actions.containerElem,delete panel.action.actions.title,dropmenus.push(panel.action.actions))}),outerWrapper.appendChild(panelList),(pl.footer.label||pl.footer.data)&&outerWrapper.appendChild(priv.createTotalDisplay(pl)),(insertElement=pl.sourceRset)||(insertElement=pl.sourceElem.parentNode),outerWrapper=insertElement.parentNode.insertBefore(outerWrapper,insertElement.nextSibling),pl.instructions.toggleElem&&PLUGIN.tooltip&&((settings=PLUGIN.tooltip.getSettingsTemplate()).selector="."+CLASSES.instToggle,settings.containerClass=CLASSES.instTooltip,settings.contentIdSourceAttr=ATTR_NAMES.tooltip,PLUGIN.tooltip.registerConfig(NAMESPACE,settings)),du.browser.supports.sticky||priv.insertFloatingHeader(headerWrapper),dropmenus.forEach(function(DM){PLUGIN.dropmenu.setup(DM)}),outerWrapper},priv.createTotalDisplay=function(pl){var totalWrapper=document.createElement("div"),totalLabel=document.createElement("div"),totalData=document.createElement("div");return totalWrapper.classList.add(CLASSES.totalWrapper),totalLabel.classList.add(CLASSES.totalLabel),totalLabel.innerHTML=pl.footer.label,totalData.classList.add(CLASSES.totalData),totalData.innerHTML=pl.footer.data,totalWrapper.appendChild(totalLabel),totalWrapper.appendChild(totalData),totalWrapper},priv.createTableHeader=function(pl){var header=document.createElement("div"),title=document.createElement("div"),heading=document.createElement("h5"),linkElem=(document.createElement("div"),document.createElement("a"));return header.classList.add(CLASSES.header),pl.title&&(title.classList.add(CLASSES.tableTitle),heading.innerHTML=pl.title,title.appendChild(heading),pl.modes.select&&title.classList.add(CLASSES.floatLeft),pl.instructions.toggleElem&&title.appendChild(pl.instructions.toggleElem)),header.appendChild(title),pl.modes.select?(linkElem.classList.add(CLASSES.menuToggle),linkElem.classList.add(CLASSES.floatRight),linkElem.setAttribute("role","button"),linkElem.innerHTML=TEXT_menuToggle,header.appendChild(linkElem),title.classList.add(CLASSES.floatLeft)):pl.modes.remove&&(linkElem.classList.add(CLASSES.menuEditButton),linkElem.classList.add(CLASSES.floatRight),linkElem.setAttribute("role","button"),linkElem.innerHTML=TEXT_menu.toggler,header.appendChild(linkElem),(linkElem=document.createElement("a")).classList.add(CLASSES.menuDoneButton),linkElem.classList.add(CLASSES.floatRight),linkElem.setAttribute("role","button"),linkElem.innerHTML=TEXT_menu.done,header.appendChild(linkElem),title.classList.add(CLASSES.floatLeft)),header},priv.renderMenuBar=function(pl){var menuSelectAll,menubarWrapper=document.createElement("div"),menuLeft=document.createElement("div"),menuRight=document.createElement("div"),menuSelectButton=(document.createElement("div"),document.createElement("h5"),document.createElement("button")),menuClearButton=document.createElement("button"),menuRemoveButton=document.createElement("button");return menubarWrapper.classList.add(CLASSES.menubarWrapper),menuLeft.classList.add(CLASSES.menuLeft),menuRight.classList.add(CLASSES.menuRight),(menuSelectAll=document.createElement("div")).classList.add(CLASSES.menuSelectAll),menuSelectAll.setAttribute("role","checkbox"),menuSelectAll.setAttribute("aria-checked","false"),menuSelectAll.setAttribute(ATTR_NAMES.tableId,pl.id),menuSelectAll.innerHTML=TEXT_selectBox,menuLeft.appendChild(menuSelectAll),menuSelectButton.classList.add(CLASSES.menuSelectButton),menuSelectButton.setAttribute("type","button"),menuSelectButton.innerHTML=TEXT_menu.select,menuRemoveButton.classList.add(CLASSES.menuRemoveButton),menuRemoveButton.classList.add(CLASSES.floatRight),menuRemoveButton.setAttribute("type","button"),menuRemoveButton.innerHTML=TEXT_menu.remove,menuRight.appendChild(menuRemoveButton),menuClearButton.classList.add(CLASSES.menuClearButton),menuClearButton.classList.add(CLASSES.floatRight),menuClearButton.setAttribute("type","button"),menuClearButton.innerHTML=TEXT_menu.clear,menuRight.appendChild(menuClearButton),menubarWrapper.appendChild(menuLeft),menubarWrapper.appendChild(menuRight),menubarWrapper},priv.insertFloatingHeader=function(headerWrapper){var floatingHeader=headerWrapper.cloneNode(!0);floatingHeader.classList.add(CLASSES.headerFloating),du.query("."+CLASSES.headerFloating,headerWrapper.parentNode).forEach(function(floater){floater.parentNode.removeChild(floater)}),headerWrapper.parentNode.insertBefore(floatingHeader,headerWrapper.nextSibling),floatingHeader.style.visibility="visible",floatingHeader.style.width="100%",priv.positionFloatingHeaders()},priv.positionFloatingHeaders=function(evt){du.query("."+CLASSES.headerFloating).forEach(function(floatingHeader){var headerElem,headerHeight,outerWrapper=du.getParentElem(floatingHeader,"."+CLASSES.outerWrapper),scrollTop=window.scrollY,offsetTop=du.getElementPosition(outerWrapper)[1],bottomOfPanelList=offsetTop+parseInt(getComputedStyle(outerWrapper,null).height,10)+1,positionTop="0px";offsetTop<scrollTop&&scrollTop<bottomOfPanelList?(headerElem=du.queryOne("."+CLASSES.headerWrapper,outerWrapper),headerHeight=parseInt(getComputedStyle(headerElem,null).height,10),floatingHeader.style.width=parseInt(headerElem.clientWidth,10)+"px",floatingHeader.style.visibility="visible",bottomOfPanelList-scrollTop<headerHeight&&(positionTop="-"+(headerHeight-(bottomOfPanelList-scrollTop))+"px"),floatingHeader.style.top=positionTop):floatingHeader.style.visibility="hidden"})},priv.clearSelectionBoxes=function(outerWrapper){du.query("."+CLASSES.panelWrapper+"."+CLASSES.selected,outerWrapper).forEach(function(panelElem){var tableId=panelElem.getAttribute(ATTR_NAMES.tableId),panelIndex=parseInt(panelElem.getAttribute(ATTR_NAMES.panelIndex),10),panel=lists[tableId].panels[panelIndex],selectionBox=du.queryOne("."+CLASSES.controlSelectBox,panelElem);panelElem.classList.remove(CLASSES.selected),selectionBox.setAttribute("aria-checked","false"),panel.action.select.checked=!1,du.event.trigger(panel.action.select,"change")}),outerWrapper.classList.remove(CLASSES.hasSelected),du.query("."+CLASSES.menubarWrapper,outerWrapper).forEach(function(elem){elem.classList.remove(CLASSES.selected)}),du.query("."+CLASSES.menuSelectAll,outerWrapper).forEach(function(elem){elem.setAttribute("aria-checked","false")})},priv.openMenubar=function(outerWrapper){var menubarWrapper=du.queryOne("."+CLASSES.menubarWrapper,outerWrapper),classes=outerWrapper.classList;priv.setMenubarAttributes(menubarWrapper,outerWrapper,!0),outerWrapper.className=classes+" "+CLASSES.selectMode+" "+CLASSES.menuMode},priv.closeMenubar=function(outerWrapper){var menubarWrapper=du.queryOne("."+CLASSES.menubarWrapper,outerWrapper),classes=" "+outerWrapper.classList+" ";outerWrapper.classList.contains(CLASSES.hasSelect)&&priv.clearSelectionBoxes(outerWrapper),priv.setMenubarAttributes(menubarWrapper,outerWrapper,!1),classes=classes.replace(" "+CLASSES.menuMode+" "," ").replace(" "+CLASSES.selectMode+" "," ").replace(" "+CLASSES.hasSelected+" "," "),outerWrapper.className=du.trim(classes," ")},priv.toggleMenubar=function(outerWrapper){outerWrapper.classList.contains(CLASSES.menuMode)?priv.closeMenubar(outerWrapper):priv.openMenubar(outerWrapper)},priv.setMenubarAttributes=function(menubarWrapper,outerWrapper,willOpen){var menuToggle=du.queryOne("."+CLASSES.menuToggle,outerWrapper),expanded=(!!willOpen).toString(),hidden=(!willOpen).toString();menubarWrapper.setAttribute("aria-hidden",hidden),menuToggle.setAttribute("aria-hidden",hidden),menubarWrapper.setAttribute("aria-expanded",expanded),menuToggle.setAttribute("aria-expanded",expanded)},events.setup=function(){du.query("."+CLASSES.panelWrapper).forEach(function(panel){panel.addEventListener("click",events.onPanelClick,!1)}),du.query("."+CLASSES.menuSelectButton).forEach(function(button){button.addEventListener("click",events.onSelectButtonClick,!1)}),du.query("."+CLASSES.menuEditButton).forEach(function(button){button.addEventListener("click",events.onEditButtonClick,!1)}),du.query("."+CLASSES.menuClearButton).forEach(function(button){button.addEventListener("click",events.onCancelSelection,!1)}),du.query("."+CLASSES.menuDoneButton).forEach(function(button){button.addEventListener("click",events.onCancelEdit,!1)}),du.query("."+CLASSES.menuRemoveButton).forEach(function(button){button.addEventListener("click",events.onRemoveAllButtonClick,!1)}),du.query("."+CLASSES.menuSelectAll).forEach(function(button){button.addEventListener("click",events.onSelectAllClick,!1)}),du.query("."+CLASSES.menuToggle).forEach(function(button){button.addEventListener("click",events.onMenuToggle,!1)}),du.browser.supports.sticky||(window.addEventListener("scroll",priv.positionFloatingHeaders,!1),priv.positionFloatingHeaders())},events.teardown=function(){du.query("."+CLASSES.panelWrapper).forEach(function(panel){panel.removeEventListener("click",events.onPanelClick,!1)}),du.query("."+CLASSES.menuSelectButton).forEach(function(button){button.removeEventListener("click",events.onSelectButtonClick,!1)}),du.query("."+CLASSES.menuEditButton).forEach(function(button){button.removeEventListener("click",events.onEditButtonClick,!1)}),du.query("."+CLASSES.menuClearButton).forEach(function(button){button.removeEventListener("click",events.onCancelSelection,!1)}),du.query("."+CLASSES.menuDoneButton).forEach(function(button){button.removeEventListener("click",events.onCancelEdit,!1)}),du.query("."+CLASSES.menuRemoveButton).forEach(function(button){button.removeEventListener("click",events.onRemoveAllButtonClick,!1)}),du.query("."+CLASSES.menuSelectAll).forEach(function(button){button.removeEventListener("click",events.onSelectAllClick,!1)}),du.query("."+CLASSES.menuToggle).forEach(function(button){button.removeEventListener("click",events.onMenuToggle,!1)}),du.browser.supports.sticky||window.removeEventListener("scroll",priv.positionFloatingHeaders,!1)},events.onPanelClick=function(evt){var selectionBox,target=evt.target,panelElem=du.getParentElem(target,"."+CLASSES.panelWrapper),outerWrapper=du.getParentElem(panelElem,"."+CLASSES.outerWrapper),tableId=panelElem.getAttribute(ATTR_NAMES.tableId),panelIndex=parseInt(panelElem.getAttribute(ATTR_NAMES.panelIndex),10),panel=lists[tableId].panels[panelIndex];outerWrapper.classList.contains(CLASSES.selectMode)||outerWrapper.classList.contains(CLASSES.editMode)?panel.action.select?(du.event.stop(evt),selectionBox=du.queryOne("."+CLASSES.controlSelectBox,panelElem),panelElem.classList.contains(CLASSES.selected)?(panelElem.classList.remove(CLASSES.selected),selectionBox.setAttribute("aria-checked","false"),panel.action.select.checked=!1):(panelElem.classList.add(CLASSES.selected),selectionBox.setAttribute("aria-checked","true"),panel.action.select.checked=!0),du.event.trigger(panel.action.select,"change"),du.queryOne("."+CLASSES.controlSelectBox+'[aria-checked="true"]',outerWrapper)?outerWrapper.classList.add(CLASSES.hasSelected):outerWrapper.classList.remove(CLASSES.hasSelected)):panel.action.remove&&du.getParentElem(target,"."+CLASSES.controlsWrapper)&&(du.event.stop(evt),du.event.trigger(panel.action.remove,"click")):panel.action.actions?setTimeout(function(){PLUGIN.dropmenu.toggle(panel.action.actions.containerElem.id)},1):panel.action.nav&&(du.event.stop(evt),du.event.trigger(panel.action.nav,"click"))},events.onSelectAllClick=function(evt){var target=evt.target,selectAllBox=du.getParentElem(target,"."+CLASSES.menuSelectAll),menubarWrapper=du.getParentElem(selectAllBox,"."+CLASSES.menubarWrapper),outerWrapper=du.getParentElem(menubarWrapper,"."+CLASSES.outerWrapper),tableId=selectAllBox.getAttribute(ATTR_NAMES.tableId),pl=lists[tableId],doSelect=!1;outerWrapper.classList.contains(CLASSES.selectMode)&&pl.modes.select&&(du.event.stop(evt),menubarWrapper.classList.contains(CLASSES.selected)?(menubarWrapper.classList.remove(CLASSES.selected),outerWrapper.classList.contains(CLASSES.hasSelect)&&priv.clearSelectionBoxes(outerWrapper)):(menubarWrapper.classList.add(CLASSES.selected),du.query("."+CLASSES.panelWrapper,outerWrapper).forEach(function(panelElem){var panelIndex=parseInt(panelElem.getAttribute(ATTR_NAMES.panelIndex),10),panel=pl.panels[panelIndex],selectionBox=du.queryOne("."+CLASSES.controlSelectBox,panelElem);panelElem.classList.add(CLASSES.selected),selectionBox.setAttribute("aria-checked","true"),panel.action.select.checked=!0,du.event.trigger(panel.action.select,"change")}),selectAllBox.setAttribute("aria-checked","true"),doSelect=!0),doSelect?outerWrapper.classList.add(CLASSES.hasSelected):outerWrapper.classList.remove(CLASSES.hasSelected),du.query("."+CLASSES.headerWrapper,outerWrapper).forEach(function(headerWrapper){var menubarWrapper=du.queryOne("."+CLASSES.menubarWrapper,headerWrapper),selectAllBox=du.queryOne("."+CLASSES.menuSelectAll,menubarWrapper),classMethod=doSelect?"add":"remove";selectAllBox.setAttribute("aria-checked",doSelect.toString()),menubarWrapper.classList[classMethod](CLASSES.selected)}))},events.onMenuToggle=function(evt){var target=evt.target,outerWrapper=du.getParentElem(target,"."+CLASSES.outerWrapper);priv.toggleMenubar(outerWrapper)},events.onRealInputChange=function(evt){var fauxId,fauxInput,realInput=evt.target;realInput&&(fauxId=realInput.id+ID_SUFFIXES_fauxInput,(fauxInput=document.getElementById(fauxId))&&(fauxInput.value=realInput.value,priv.updatePanelStatus(fauxInput)))},events.onSelectButtonClick=function(evt){var button=evt.target,outerWrapper=du.getParentElem(button,"."+CLASSES.outerWrapper);du.toggleClass(outerWrapper,CLASSES.selectMode)},events.onCancelSelection=function(evt){var target=evt.target,outerWrapper=du.getParentElem(target,"."+CLASSES.outerWrapper);priv.closeMenubar(outerWrapper)},events.onEditButtonClick=function(evt){evt.target;du.getParentElem(evt.target,"."+CLASSES.outerWrapper).classList.add(CLASSES.editMode)},events.onCancelEdit=function(evt){evt.target;du.getParentElem(evt.target,"."+CLASSES.outerWrapper).classList.remove(CLASSES.editMode)},events.onRemoveAllButtonClick=function(evt){var button=evt.target,outerWrapper=du.getParentElem(button,"."+CLASSES.outerWrapper),tableId=outerWrapper.getAttribute(ATTR_NAMES.tableId),pl=lists[tableId];if(pl.removeButton){try{du.event.trigger(pl.removeButton,"click")}catch(e){pl.removeButton.click()}outerWrapper.classList.contains(CLASSES.hasSelect)&&priv.clearSelectionBoxes(outerWrapper)}},{setup:function(tables){return!(void 0===tables&&du.query("."+CLASSES.outerWrapper).length||(priv.hasPreloaded||(du.imagesPath=uiGlobal.sIFLOWImagesPath,priv.preload()),void 0===tables?priv.setupAllTables():("array"!==du.typeOf(tables)&&(tables=[tables]),tables.forEach(function(table){"element"===du.typeOf(table)&&priv.setupTable(table)})),0))},teardown:function(){return events.teardown(),du.query("."+CLASSES.outerWrapper).forEach(function(pl){pl.parentNode.removeChild(pl)}),!0}}}(),uiResponsive.table.form=function(){var NAMESPACE="formtable",DEFAULT_FORM_TABLE={rows:[],isForm:!1,hasInput:!1,targetElem:null,hasCalendar:!1,maskToggleInputs:[],hasSecondaryHeader:!1,expansionControls:[],total:{label:"",data:""}},DEFAULT_ROW={cells:[],title:"",index:-1,subTitle:{label:"",data:{text:"",classes:[]}},actionButtons:[],subHeading:null,legend:null,numInputs:0,numEmptyInputs:0,maskToggleInputs:[]},DEFAULT_CELL={label:null,data:null,hasInput:!1,isFieldset:!1,classNames:[]},DEFAULT_ACTION_BUTTON={label:"",classes:[],sourceId:""},CLASSES={formTable:"form-table",hidden:"hidden",row:"row-r",rightAlign:"rt",noWrap:"noWrap",button:"button",ignoreFooter:"rwd-ignore-footer",gridNoCollapse:"grid-no-collapse",colFullWidth:"col-1",colHalf:"col-1-2",colThird:"col-1-3",colTwoThirds:"col-2-3",colMedHalf:"col-med-1-2",colMedThird:"col-med-1-3",colMedTwoThirds:"col-med-2-3",textCenter:"text-center",textRight:"text-right",floatRight:"float-right",floatLeft:"float-left",moneyField:"moneyField",iconHelp:"icon-help",required:"required",expandableAlternateRow:"ignoreRow",maskToggle:"masktoggle",outerWrapper:NAMESPACE,tableHeaderWrapper:"formtable-header",tableTitle:"formtable-title",instructionWrapper:"formtable-inst-wrapper",container:"formtable-panel-list",panel:"formtable-panel",panelHeader:"formtable-panel-header",panelControls:"formtable-panel-controls",panelSelection:"formtable-panel-selection",panelHeadingsWrapper:"formtable-panel-headings",panelHeaderFloating:"formtable-panel-header-floating",panelSubHeading:"formtable-panel-subheading",contentExpanded:"formtable-panel-expanded",contentWrapper:"formtable-content",labelWrap:"formtable-label",dataWrap:"formtable-data",footer:"formtable-footer",fauxRemoveButton:"formtable-remove-item",expViewIcon:"formtable-exp-view-icon",colViewIcon:"formtable-col-view-icon",instToggle:"table-inst-toggle",instTooltip:"table-inst-tooltip tt-form-table",itemHasInput:"formtable-has-input",itemNoInput:"formtable-no-input",itemNoLabel:"formtable-no-label",hasActionButtons:"formtable-has-action-buttons",hasRemoveAll:"formtable-has-remove-all",hasSecondaryHeader:"formtable-has-secondary",hasSelection:"formtable-has-selection",hasSelectionRadio:"formtable-has-selection-radio",hasSelectionCheckbox:"formtable-has-selection-checkbox"},SELECTORS_rsetsToSetup=".rset.form-table, .rset.form-table-expanded,.rset.form-table-condensed,.rset.form-table-expandable",SELECTORS_textOrSelectField='select, input:not(.button):not(.icon-button):not([type="checkbox"]):not([type="radio"]):not([type="hidden"])',SELECTORS_checkableInput='input[type="checkbox"], input[type="radio"]',SELECTORS_nonCheckableInput='select, input:not(.button):not(.icon-button):not([type="radio"]):not([type="checkbox"]):not([type="hidden"]), button:not(.button):not(.icon-button):not([type="button"])',SELECTORS_iconButtonsToConvertToText=".copyValue",SELECTORS_actionButtons="button, .button, .copyValue, input.copydata",SELECTORS_maskToggleWrapper=".masktoggle-toggle-wrapper",ATTR_NAMES={removeCboxId:"data-formtable-remove-cbox-id",tableId:"data-formtable-id",rowTitle:"data-row-title",tooltip:"data-table-tooltip-id",headerInputId:"data-formtable-header-id",fauxControlSourceId:"data-formtable-action-button-source-id"},ID_SUFFIXES={fauxInput:"_formtable",targetElem:"_target"},TEXT_emptyRowTitle="(New)",TEXT_clearedRowTitle="(Empty)",TEXT_navLinkButton="More Details",TEXT_removeButton="Remove",du={query:uiUtil.query,queryOne:uiUtil.queryOne,browser:uiUtil.browser,getParentElem:uiUtil.getParentElem,expand:uiAnimate.height.expand,collapse:uiAnimate.height.collapse,extend:uiUtil.extend,typeOf:uiUtil.typeOf,trim:uiUtil.trim,val:uiUtil.val,toTitleCase:uiUtil.toTitleCase,matchesSelector:uiUtil.matchesSelector,getValueAsText:uiUtil.getValueAsText,getTextNodes:uiUtil.getTextNodes,establishElementId:uiUtil.establishElementId,isCheckableInput:uiMethods.checkBoxes.isCheckableInput,getElementPosition:uiUtil.getElementPosition,getCellAtIndex:uiMethods.table.getCellAtIndex,logError:uiUtil.errorHandling.jsLog.addEntry,event:{trigger:uiEvents.trigger}},needToInitCalendars=!1,needToInitTooltips=!1,useFloatingHeaders=!du.browser.supports.sticky,formTables={},panelCache=[],priv={},events={};return priv.setupAllTables=function(){var success=!1;return du.query(SELECTORS_rsetsToSetup).forEach(function(rset){var tableElem=du.queryOne("table",rset);tableElem&&priv.setupTable(tableElem,rset)&&(success=!0)}),success&&events.setup()},priv.setupTable=function(tableElem,rset){var table,settings;return(table=uiResponsive.table.create(rset))?((table=du.extend(!0,{},DEFAULT_FORM_TABLE,table)).rows=priv.getTableRows(table),table.rows.length?(table.hasSecondaryHeader&&table.footer.label&&table.footer.data&&(table=priv.getTableTotals(table)),(table.isExpandable||table.isExpandedView||table.isCondensedView)&&(table=priv.getExpansionControls(table)),table.targetElem=priv.createPanels(table),table.instructions.toggleElem&&PLUGIN.tooltip&&((settings=PLUGIN.tooltip.getSettingsTemplate()).selector="."+CLASSES.instToggle,settings.containerClass=CLASSES.instTooltip,settings.contentIdSourceAttr=ATTR_NAMES.tooltip,settings.width=window.innerWidth,settings.offsets={position:{x:10,y:0},variablePointer:{x:-15,y:0}},PLUGIN.tooltip.registerConfig(NAMESPACE,settings)),table.maskToggleInputs.length&&PLUGIN.masktoggle.setup(table.maskToggleInputs),formTables[table.id]=table):null):null},priv.getTableRows=function(table){var rows=[],primaries=table.primary.indices,primariesAreDefined=!1,secondaries=[];return primaries.length?(secondaries=table.secondary.indices,primariesAreDefined=!0):primaries.push(0),du.query("tr",table.sourceElem.tBodies[0]).forEach(function(tr,i){var subTitleParts,row=du.extend(!0,{},DEFAULT_ROW),titleParts=[],titlePartsText=[],hasLink=!1;row.index=i,row.subHeading=du.queryOne("td[colspan] > h5",tr),row.legend=du.queryOne(".labelWrap legend",tr),row.subHeading?(row.title=du.trim(row.subHeading.innerHTML),rows[i]=priv.collectCellsByRow(table,row,{trElem:tr,rowIndex:i}),row.maskToggleInputs.length&&(table.maskToggleInputs=row.maskToggleInputs)):(table.isCondensedView||table.isExpandable)&&tr.classList.contains(CLASSES.expandableAlternateRow)?rows[i-1].cells=rows[i-1].cells.concat(priv.collectCellsFromExpandedRow(table,row,{trElem:tr,rowIndex:i})):(primaries.forEach(function(index){var td=tr.cells[index],inputs=du.query(SELECTORS_textOrSelectField,td);0<inputs.length?inputs.forEach(function(input,j){var id=du.establishElementId(input)+"_pri-"+NAMESPACE+"-"+index+"-"+j,val=du.getValueAsText(input);input.setAttribute(ATTR_NAMES.headerInputId,id),titlePartsText.push(val),titleParts.push('<span id="'+id+'">'+val+"</span>")}):(du.queryOne(SELECTORS_checkableInput,td)?td=tr.cells[index+1]:du.queryOne("a",td)&&(hasLink=!0),titleParts.push(priv.htmlToText(td.innerHTML)))}),hasLink||titlePartsText.join("").length||(titleParts[0]=titleParts[0].replace("><",">"+TEXT_emptyRowTitle+"<")),row.title=titleParts.join(" "),primariesAreDefined&&secondaries.length&&(row.subTitle.label=priv.htmlToText(table.headers[secondaries[0]].text),row.subTitle.label.length&&(table.hasSecondaryHeader=!0,subTitleParts=[],secondaries.forEach(function(index){var td=tr.cells[index],inputs=du.query(SELECTORS_textOrSelectField,td);0<inputs.length?inputs.forEach(function(input,j){var html,id=du.establishElementId(input)+"_sec-"+NAMESPACE+"-"+index+"-"+j;input.setAttribute(ATTR_NAMES.headerInputId,id),html='<span id="'+id+'"',td.classList.contains(CLASSES.rightAlign)&&(html+=' class="'+CLASSES.rightAlign+'"'),html+=">"+du.getValueAsText(input)+"</span>",subTitleParts.push(html)}):du.queryOne(SELECTORS_checkableInput,td)||subTitleParts.push(priv.htmlToText(td.innerHTML)),td.classList.contains(CLASSES.rightAlign)&&-1===row.subTitle.data.classes.indexOf(CLASSES.rightAlign)&&row.subTitle.data.classes.push(CLASSES.rightAlign)}),subTitleParts.length&&(row.subTitle.data.text=subTitleParts.join(" ")))),rows[i]=priv.collectCellsByRow(table,row,{trElem:tr,rowIndex:i}),rows[i].hasInput&&(table.hasInput=!0),row.maskToggleInputs.length&&(table.maskToggleInputs=row.maskToggleInputs))}),rows},priv.collectCellsByRow=function(table,row,settings){var acceptableIndices;return table.isCondensedView&&(acceptableIndices=table.primary.indices.concat(table.secondary.indices)),du.query("td",settings.trElem).forEach(function(td,j){var cell,elem,val,navLink,actionButton,hasInput=!1,labelEndChar=":",isChecked=null,actionButtons=[],isCellUsedForRowSelection=table.selection&&table.selection.index===j,skipCell=!1;return!isCellUsedForRowSelection&&0===j&&table.removeButton&&(elem=du.queryOne(SELECTORS_checkableInput,td))?(row.removeCboxId=du.establishElementId(elem),(actionButton=du.extend(!0,{},DEFAULT_ACTION_BUTTON)).label=TEXT_removeButton,actionButton.sourceId=du.establishElementId(elem),row.actionButtons.push(actionButton),!1):(!table.isCondensedView||-1!==acceptableIndices.indexOf(j))&&(-1!==table.primary.indices.indexOf(j)&&(navLink=du.queryOne("a",td))&&((actionButton=du.extend(!0,{},DEFAULT_ACTION_BUTTON)).label=TEXT_navLinkButton,actionButton.sourceId=du.establishElementId(navLink),row.actionButtons.push(actionButton)),isCellUsedForRowSelection||du.query(SELECTORS_actionButtons,td).forEach(function(btn){(actionButton=du.extend(!0,{},DEFAULT_ACTION_BUTTON)).label=priv.getActionButtonLabel(btn),actionButton.sourceId=du.establishElementId(btn),actionButtons.push(actionButton)}),actionButtons.length?(row.actionButtons=row.actionButtons.concat(actionButtons),!1):(cell=du.extend(!0,{},DEFAULT_CELL),table.headers[j]&&table.headers[j].text&&(cell.label=document.createElement("label"),du.query("."+CLASSES.iconHelp,cell.label).forEach(function(icon){icon.parentNode.removeChild(icon)}),cell.label.innerHTML=table.headers[j].text.replace(/\s*\:\s*$/,""),-1!==cell.label.innerHTML.indexOf("?")&&(labelEndChar=""),(elem=du.queryOne("."+CLASSES.required,cell.label))?cell.label.innerHTML=du.trim(cell.label.innerHTML.replace(elem.outerHTML,""))+labelEndChar+' <span class="'+CLASSES.required+'">*</span>':cell.label.innerHTML+=labelEndChar,cell.label.innerHTML=du.trim(cell.label.innerHTML)),cell.data=document.createElement("div"),cell.data.innerHTML=du.trim(td.innerHTML),cell.label||(elem=du.queryOne("img",cell.data))&&/greencheck\.gif|notchecked\.png/.test(elem.src)&&(cell.data.removeChild(elem),0===cell.data.innerHTML.trim().length?skipCell=!0:cell.data.innerHTML=du.trim(td.innerHTML)),void(skipCell||(navLink&&(cell.data.innerHTML=cell.data.innerHTML.replace(navLink.outerHTML,du.trim(navLink.innerHTML))),cell.data.innerHTML=cell.data.innerHTML.replace(/(\d{9})(\d{2,})/,"$1&shy;$2"),td.classList.contains(CLASSES.rightAlign)&&(cell.data.classList.add(CLASSES.moneyField),cell.data.classList.add(CLASSES.rightAlign)),cell.data.innerHTML.length||(cell.data.innerHTML="&nbsp;"),priv.hasContent(td)&&(td.classList.contains(CLASSES.rightAlign)&&(cell.data=priv.fixMoneyFields(cell.data)),du.query(SELECTORS_nonCheckableInput,td).forEach(function(sourceInput){var valAsText=du.getValueAsText(sourceInput);row.numInputs++,hasInput=!0,sourceInput.value&&(val=sourceInput.value),sourceInput.addEventListener("change",events.onRealInputChange,!1),"SELECT"===sourceInput.nodeName&&/^Select\s/.test(valAsText)&&(valAsText=""),sourceInput.value&&valAsText.length||row.numEmptyInputs++}),du.query(SELECTORS_checkableInput,td).forEach(function(sourceInput){isChecked=!!sourceInput.checked}),du.queryOne(SELECTORS_iconButtonsToConvertToText,td)&&(hasInput=!0),du.query("input:not(.button), select",cell.data).forEach(function(fauxInput){var originalId=fauxInput.id,fauxId=originalId+ID_SUFFIXES.fauxInput;du.query('label[for="'+originalId+'"]',cell.data).forEach(function(fauxLabel){fauxLabel.setAttribute("for",fauxId)}),cell.label&&cell.label.setAttribute("for",fauxId),fauxInput.id=fauxId,fauxInput.getAttribute("name")?table.selection&&table.selection.index===j&&"radio"===table.selection.type?fauxInput.setAttribute("name",fauxInput.getAttribute("name")+ID_SUFFIXES.fauxInput):fauxInput.setAttribute("name",fauxInput.getAttribute("name")+"_"+row.index+ID_SUFFIXES.fauxInput):fauxInput.setAttribute("name",fauxId),fauxInput.addEventListener("change",events.onFauxInputChange,!1),fauxInput.addEventListener("keyup",events.onFauxInputChange,!1),val&&(fauxInput.value=val),"boolean"==typeof isChecked&&(fauxInput.checked=isChecked)})),(cell.hasInput=hasInput)&&(row.hasInput=!0),td.classList.contains(CLASSES.maskToggle)&&((elem=du.queryOne("input",cell.data))&&(row.maskToggleInputs.push(elem),cell.classNames.push(CLASSES.maskToggle)),du.query(SELECTORS_maskToggleWrapper,cell.data).forEach(function(elem){elem.parentNode.removeChild(elem)})),row.cells.push(cell)))))}),row},priv.fixMoneyFields=function(elem){var texts,text,t,span,trailingCentsSearch=/[\s\n]*\.00[\s\n]*/,noSpanSpaceSearch=/><span\s+class\=\"appended\-text/i;if(!du.queryOne('input[size="20"]',elem))return elem;if(du.queryOne(".appended-text",elem))return noSpanSpaceSearch.test(elem.innerHTML)&&(elem.innerHTML=elem.innerHTML.replace(noSpanSpaceSearch,'> <span class="appended-text')),elem;for(t=(texts=du.getTextNodes(elem,{recursive:!1})).length;t--;)if(text=texts[t],trailingCentsSearch.test(text.textContent)){text.textContent=" ",(span=document.createElement("span")).className="appended-text",span.innerHTML=".00",text.parentNode.insertBefore(span,text.nextSibling);break}return elem},priv.collectCellsFromExpandedRow=function(table,row,settings){return du.query(".linePn",settings.trElem).forEach(function(line){var labelElem,dataElem,cell,elem,val,hasInput=!1,labelEndChar=":",checkedStates=null;cell=du.extend(!0,{},DEFAULT_CELL),row.legend&&"FIELDSET"===line.parentNode.nodeName?(cell.isFieldset=!0,labelElem=row.legend,/<span\s+class\=\"legendWrap\">/.test(labelElem.innerHTML)&&(labelElem.innerHTML=labelElem.innerHTML.replace(/<span\s+class\=\"legendWrap\">/,"").replace(/<\/span>/,"")),cell.label=document.createElement("legend")):((labelElem=du.queryOne(".labelWrap label",line))||(labelElem=du.queryOne(".labelWrap",line)),cell.label=document.createElement("label")),cell.label.innerHTML=priv.htmlToText(labelElem.innerHTML).replace(/\s*\:\s*$/,""),elem=du.queryOne(".labelPn ."+CLASSES.required,line),-1!==cell.label.innerHTML.indexOf("?")&&(labelEndChar=""),elem?cell.label.innerHTML=cell.label.innerHTML.replace(elem.outerHTML,"")+labelEndChar+' <span class="'+CLASSES.required+'">*</span>':cell.label.innerHTML+=labelEndChar,cell.label.innerHTML=du.trim(cell.label.innerHTML),dataElem=du.queryOne(".dataPn",line),cell.data=document.createElement("div"),cell.data.innerHTML=dataElem.innerHTML,du.trim(cell.data.innerHTML).length?(elem=du.queryOne(".moneyField",cell.data))&&(elem.classList.add(CLASSES.rightAlign),cell.data=priv.fixMoneyFields(cell.data)):cell.data.innerHTML="&nbsp;",priv.hasContent(dataElem)&&(du.query(SELECTORS_nonCheckableInput,dataElem).forEach(function(sourceInput){var valAsText=du.getValueAsText(sourceInput);row.numInputs++,hasInput=!0,sourceInput.value&&(val=sourceInput.value),du.isCheckableInput(sourceInput)&&((checkedStates=checkedStates||{})[sourceInput.id]=!!sourceInput.checked),sourceInput.addEventListener("change",events.onRealInputChange,!1),"SELECT"===sourceInput.nodeName&&/^Select\s/.test(valAsText)&&(valAsText=""),sourceInput.value&&valAsText.length||row.numEmptyInputs++}),du.query("input, select, button",cell.data).forEach(function(fauxInput){var originalId=fauxInput.id,fauxId=originalId+ID_SUFFIXES.fauxInput;du.query('label[for="'+originalId+'"]',cell.data).forEach(function(fauxLabel){fauxLabel.setAttribute("for",fauxId)}),!row.legend&&cell.label&&cell.label.setAttribute("for",fauxId),fauxInput.id=fauxId,fauxInput.getAttribute("name")?fauxInput.setAttribute("name",fauxInput.getAttribute("name")+"_"+row.index+ID_SUFFIXES.fauxInput):fauxInput.setAttribute("name",fauxId),fauxInput.addEventListener("change",events.onFauxInputChange,!1),fauxInput.addEventListener("keyup",events.onFauxInputChange,!1),val&&(fauxInput.value=val),checkedStates&&checkedStates.hasOwnProperty(originalId)&&(fauxInput.checked=checkedStates[originalId])})),(cell.hasInput=hasInput)&&(row.hasInput=!0),row.cells.push(cell)}),row.cells},priv.getTableTotals=function(table){var tFootElem=table.sourceElem.tFoot;return tFootElem&&tFootElem.rows&&tFootElem.rows.length&&tFootElem.rows[0].cells&&tFootElem.rows[0].cells.length&&1===table.secondary.indices.length&&(table.total.label="Total:",table.total.data=priv.htmlToText(du.getCellAtIndex(table.secondary.indices[0],tFootElem.rows[0]).innerHTML)),table},priv.getExpansionControls=function(table){var icon,fauxControl;return table.isCondensedView?(icon=document.getElementById(table.id+"_expViewIcon"))&&((fauxControl=document.createElement("div")).classList.add(CLASSES.expViewIcon),fauxControl.setAttribute("role","button"),fauxControl.setAttribute(ATTR_NAMES.fauxControlSourceId,du.establishElementId(icon)),fauxControl.addEventListener("click",events.onFauxControlClick,!1),fauxControl.innerHTML="Switch to expanded view",table.expansionControls.push(fauxControl)):table.isExpandedView&&(icon=document.getElementById(table.id.replace(/_expView$/,"")+"_colViewIcon"))&&((fauxControl=document.createElement("div")).classList.add(CLASSES.colViewIcon),fauxControl.setAttribute("role","button"),fauxControl.setAttribute(ATTR_NAMES.fauxControlSourceId,du.establishElementId(icon)),fauxControl.addEventListener("click",events.onFauxControlClick,!1),fauxControl.innerHTML="Switch to condensed view",table.expansionControls.push(fauxControl)),table},priv.createPanels=function(table){var outerWrapper=document.createElement("div"),panelList=document.createElement("ol"),customClasses={label:CLASSES.labelWrap,data:CLASSES.dataWrap,notYetDetermined:!0},insertElement=null;return outerWrapper.id=table.id+ID_SUFFIXES.targetElem,outerWrapper.className=CLASSES.outerWrapper,table.hasSecondaryHeader&&outerWrapper.classList.add(CLASSES.hasSecondaryHeader),(table.title||table.instructions.toggleElem)&&outerWrapper.appendChild(priv.createTableHeader(table,insertElement)),table.selection&&(outerWrapper.classList.add(CLASSES.hasSelection),"radio"===table.selection.type?outerWrapper.classList.add(CLASSES.hasSelectionRadio):outerWrapper.classList.add(CLASSES.hasSelectionCheckbox)),table.rows.forEach(function(row){var panelHeader,panelControls,panelSelection,panelHeadingsWrapper,headerRow,headerElem,selectionInput,selectionLabel,panel=document.createElement("li"),contentWrapper=document.createElement("div"),isCollapsed=row.numEmptyInputs<1||row.numEmptyInputs!==row.numInputs;if(panel.className=CLASSES.panel,row.subHeading)return(panelHeader=document.createElement("div")).className=CLASSES.panelHeader+" "+CLASSES.panelSubHeading,(headerRow=document.createElement("div")).className=CLASSES.row+" "+CLASSES.gridNoCollapse,(headerElem=document.createElement("h5")).className=CLASSES.colFullWidth,headerElem.innerHTML=row.title||"&nbsp;",headerRow.appendChild(headerElem),panelHeader.appendChild(headerRow),panel.appendChild(panelHeader),panel.appendChild(contentWrapper),panelList.appendChild(panel),!0;row.title&&row.title!==TEXT_emptyRowTitle||0!==row.numInputs?((panelHeader=document.createElement("div")).className=CLASSES.panelHeader,table.selection&&((panelControls=document.createElement("div")).className=CLASSES.panelControls,selectionInput=row.cells[table.selection.index].data.getElementsByTagName("input")[0],selectionLabel=row.cells[table.selection.index].data.getElementsByTagName("label")[0],panelControls.appendChild(selectionInput),panelControls.appendChild(selectionLabel),(panelSelection=document.createElement("div")).className=CLASSES.panelSelection,panelSelection.setAttribute("aria-checked",""+!!selectionInput.checked),panelSelection.setAttribute("role",table.selection.type),panelSelection.setAttribute(ATTR_NAMES.tableId,table.id),panelSelection.setAttribute(ATTR_NAMES.fauxControlSourceId,selectionInput.id),panelSelection.innerHTML=table.selection.label,panelControls.appendChild(panelSelection),panelHeader.appendChild(panelControls)),(panelHeadingsWrapper=document.createElement("div")).className=CLASSES.panelHeadingsWrapper,(headerRow=document.createElement("div")).className=CLASSES.row+" "+CLASSES.gridNoCollapse,(headerElem=document.createElement("h5")).className=CLASSES.colFullWidth,headerElem.innerHTML=row.title||"&nbsp;",headerRow.appendChild(headerElem),panelHeadingsWrapper.appendChild(headerRow),table.hasSecondaryHeader&&((headerRow=document.createElement("div")).className=CLASSES.row+" "+CLASSES.gridNoCollapse,(headerElem=document.createElement("div")).innerHTML=row.subTitle.label+":",headerElem.className=CLASSES.colHalf+" "+CLASSES.colMedHalf,headerRow.appendChild(headerElem),(headerElem=document.createElement("div")).innerHTML=row.subTitle.data.text,headerElem.className=CLASSES.colHalf+" "+CLASSES.colMedHalf,row.subTitle.data.classes.length&&(headerElem.className+=" "+row.subTitle.data.classes.join(" ")),headerRow.appendChild(headerElem),panelHeadingsWrapper.appendChild(headerRow)),panelHeader.appendChild(panelHeadingsWrapper),panel.appendChild(panelHeader),useFloatingHeaders&&priv.createFloatingHeader(panelHeader)):isCollapsed=!1,contentWrapper.className=CLASSES.contentWrapper,isCollapsed?contentWrapper.classList.add(CLASSES.hidden):panel.classList.add(CLASSES.contentExpanded),customClasses.notYetDetermined&&!row.subHeading&&((customClasses=priv.getDualColumnClassNames(row)).notYetDetermined=!1),row.cells.forEach(function(cell,c){var rowWrapper,labelWrapper,dataWrap;if(table.selection&&table.selection.index===c)return!1;(rowWrapper=cell.isFieldset?document.createElement("fieldset"):document.createElement("div")).className=CLASSES.row,cell.classNames.forEach(function(name){rowWrapper.classList.add(name)}),cell.hasInput?rowWrapper.classList.add(CLASSES.itemHasInput):rowWrapper.classList.add(CLASSES.itemNoInput),cell.label?((labelWrapper=document.createElement("div")).className=customClasses.label,labelWrapper.appendChild(cell.label),rowWrapper.appendChild(labelWrapper)):rowWrapper.classList.add(CLASSES.itemNoLabel),cell.data&&((dataWrap=document.createElement("div")).className=customClasses.data,dataWrap.appendChild(cell.data),rowWrapper.appendChild(dataWrap),du.query(".calendar",dataWrap).forEach(function(cal){cal.id+=ID_SUFFIXES.fauxInput,PLUGIN.calendar.customize({datePickers:[{inputId:cal.id.replace(/^cal_/,"")}]}),needToInitCalendars=!0}),du.query('.icon-button.icon-delete, img[src*="delete.png"]',dataWrap).forEach(function(btn){btn.classList.add(CLASSES.hidden),btn.innerHTML=btn.innerHTML.replace("Delete",TEXT_removeButton),btn}),du.query(SELECTORS_iconButtonsToConvertToText,dataWrap).forEach(function(btn){btn.classList.add(CLASSES.button),btn.innerHTML||(btn.innerHTML=btn.getAttribute("title")||btn.getAttribute("alt")||btn.classList),du.matchesSelector(btn,uiMethods.fieldValues.copySelector)&&(btn.id+=ID_SUFFIXES.fauxInput,btn.addEventListener("click",function(evt){du.event.trigger(document.getElementById(btn.id.replace(ID_SUFFIXES.fauxInput,"")),"click"),evt.preventDefault()}))}),contentWrapper.appendChild(rowWrapper))}),row.actionButtons&&contentWrapper.appendChild(priv.createActionButtons(table,row)),panel.appendChild(contentWrapper),panelList.appendChild(panel)}),outerWrapper.appendChild(panelList),table.total.label&&outerWrapper.appendChild(priv.createTotalDisplay(table,customClasses)),table.removeButton&&table.removeAllCboxId&&(outerWrapper.appendChild(priv.createRemoveAllButton(table)),outerWrapper.classList.add(CLASSES.hasRemoveAll)),insertElement||(insertElement=du.getParentElem(table.sourceElem,".rset"))||(insertElement=table.sourceElem.parentNode),outerWrapper=insertElement.parentNode.insertBefore(outerWrapper,insertElement.nextSibling),du.queryOne("."+CLASSES.iconHelp,outerWrapper)&&(needToInitTooltips=!0),outerWrapper},priv.createRemoveButton=function(table,row,btn){var button,rowElem=document.createElement("div");return rowElem.classList.add(CLASSES.row),rowElem.classList.add(CLASSES.textCenter),rowElem.classList.add(CLASSES.hasActionButtons),"element"===du.typeOf(btn)?"IMG"===btn.nodeName?((button=document.createElement("button")).innerHTML=TEXT_removeButton,btn.onclick&&(button.onclick=btn.onclick)):((button=btn.cloneNode(!0)).classList.remove(CLASSES.hidden),button.classList.remove("icon-button"),button.classList.remove("icon-delete")):((button=document.createElement("button")).classList.add(CLASSES.fauxRemoveButton),button.setAttribute(ATTR_NAMES.removeCboxId,row.removeCboxId),button.setAttribute(ATTR_NAMES.tableId,table.id),button.innerHTML=TEXT_removeButton),button.setAttribute("type","button"),button.classList.add("button"),rowElem.appendChild(button),rowElem},priv.createActionButtons=function(table,row){var rowElem=document.createElement("div");return rowElem.classList.add(CLASSES.row),rowElem.classList.add(CLASSES.textCenter),rowElem.classList.add(CLASSES.hasActionButtons),row.actionButtons.sort(priv.actionButtonSort),row.actionButtons.forEach(function(btn){var button=document.createElement("button");button.setAttribute("type","button"),button.classList.add("button"),button.innerHTML=btn.label,button.setAttribute(ATTR_NAMES.tableId,table.id),btn.sourceId&&(button.setAttribute(ATTR_NAMES.fauxControlSourceId,btn.sourceId),button.addEventListener("click",events.onFauxControlClick,!1)),btn.classes.length&&button.classList.add(btn.classes.join(" ")),row.removeCboxId&&button.setAttribute(ATTR_NAMES.removeCboxId,row.removeCboxId),rowElem.appendChild(button)}),rowElem},priv.actionButtonSort=function(a,b){return a.label===TEXT_navLinkButton?-1:b.label===TEXT_navLinkButton?1:a.label===TEXT_removeButton?1:b.label===TEXT_removeButton?-1:0},priv.getActionButtonLabel=function(elem){var labelElem,label="";return elem.classList.contains("copydata")?(labelElem=du.queryOne('label[for="'+du.establishElementId(elem)+'"]'))&&(label=du.trim(labelElem.innerHTML).replace(" the "," ")):du.trim(elem.innerHTML)?label=du.trim(elem.innerHTML):du.trim(elem.value)?label=du.trim(elem.value):du.trim(elem.getAttribute("alt"))&&(label=du.trim(elem.getAttribute("alt"))),label=du.toTitleCase(label)},priv.createTotalDisplay=function(table){var wrapper=document.createElement("div"),rowElem=document.createElement("div"),labelElem=document.createElement("div"),dataElem=document.createElement("div");return wrapper.className=CLASSES.footer,rowElem.className=CLASSES.row+" "+CLASSES.gridNoCollapse,(labelElem=document.createElement("div")).className=CLASSES.colHalf+" "+CLASSES.colMedHalf,labelElem.innerHTML=table.total.label,rowElem.appendChild(labelElem),(dataElem=document.createElement("div")).className=CLASSES.colHalf+" "+CLASSES.colMedHalf+" "+CLASSES.rightAlign,dataElem.innerHTML=table.total.data,rowElem.appendChild(dataElem),wrapper.appendChild(rowElem),wrapper},priv.createRemoveAllButton=function(table){var buttonContainer=document.createElement("div"),button=document.createElement("button");return buttonContainer.className=CLASSES.textCenter,button.className="button",button.setAttribute("type","button"),button.setAttribute(ATTR_NAMES.removeCboxId,table.removeAllCboxId),button.setAttribute(ATTR_NAMES.tableId,table.id),button.innerHTML="Remove All",buttonContainer.appendChild(button),button.addEventListener("click",events.onRemoveClick,!1),buttonContainer},priv.createTableHeader=function(table){var wrapper=document.createElement("div"),title=document.createElement("div"),heading=document.createElement("h5");return wrapper.className=CLASSES.tableHeaderWrapper,table.title&&(title.className=CLASSES.tableTitle,heading.innerHTML=table.title,title.appendChild(heading)),table.instructions.toggleElem&&(table.title&&table.instructions.toggleElem.classList.add(CLASSES.floatRight),title.appendChild(table.instructions.toggleElem)),table.expansionControls.length&&table.expansionControls.forEach(function(control){control.classList.add(CLASSES.floatRight),title.appendChild(control)}),(table.instructions.toggleElem||table.expansionControls.length)&&heading.classList.add(CLASSES.floatLeft),table.title&&wrapper.appendChild(title),wrapper},priv.getDualColumnClassNames=function(row){var classes,left=[],right=[];return row.cells.forEach(function(cell){var plainText;cell.label&&(plainText=du.trim(cell.label.innerHTML),du.query("."+CLASSES.iconHelp,cell.label).forEach(function(elem){plainText=plainText.replace(elem.outerHTML,"")}),left.push(du.trim(plainText.replace(/\s+|\n/gm," ")," ")),plainText=du.trim(cell.data.innerHTML),du.query("input:not(.button):not(.icon-button), select, button:not(.button):not(.icon-button)",cell.data).forEach(function(input){var value=du.getValueAsText(input),size=input.getAttribute("size");du.isCheckableInput(input)?value="":size&&(value=Array(parseInt(size,10)+1).join("o")),plainText=plainText.replace(input.outerHTML,value)}),du.query(".hidden, .hideOffScreen, .icon-button, .calendar",cell.data).forEach(function(elem){plainText=plainText.replace(elem.outerHTML,"")}),du.query("a:not(.icon-button):not(.calendar)",cell.data).forEach(function(elem){"STRONG"===elem.parentNode.nodeName?elem=elem.parentNode:du.queryOne("strong",elem)&&(elem=du.queryOne("strong",elem)),plainText=plainText.replace(elem.outerHTML,elem.innerText)}),right.push(du.trim(plainText.replace(/\s+|\n/gm," ")," ")))}),classes=function(left,right){var leftLength=left.join("").length,rightLength=right.join("").replace(/<\/?em>/gi,"").replace(/\n/g," ").length,numItems=left.length,avgLeft=leftLength/numItems,avgRight=rightLength/numItems,avgRow=avgLeft+avgRight,leftClass=CLASSES.colMedHalf,rightClass=CLASSES.colMedHalf;return.9<=avgLeft/avgRow?(leftClass=CLASSES.colMedTwoThirds,rightClass=CLASSES.colMedThird):.75<=avgRight/avgRow&&(leftClass=CLASSES.colMedThird,rightClass=CLASSES.colMedTwoThirds),[leftClass,rightClass]}(left,right),{label:CLASSES.colFullWidth+" "+classes[0]+" "+CLASSES.labelWrap,data:CLASSES.colFullWidth+" "+classes[1]+" "+CLASSES.dataWrap}},priv.createFloatingHeader=function(panelHeader){var floatingHeader=panelHeader.cloneNode(!0);return floatingHeader.classList.add(CLASSES.panelHeaderFloating),panelHeader.parentNode.insertBefore(floatingHeader,panelHeader.nextSibling),floatingHeader.style.visibility="hidden",floatingHeader.style.width="100%",floatingHeader.addEventListener("click",events.onToggleContent,!1),floatingHeader},priv.updatePanelCache=function(){var notFirstRun=!!panelCache.length,floater=null;return notFirstRun&&(panelCache=[],useFloatingHeaders&&du.query("."+CLASSES.panelHeaderFloating).forEach(function(floatingHeader){floatingHeader.parentNode.removeChild(floatingHeader)})),du.query("."+CLASSES.panel).forEach(function(panel){var header=du.queryOne("."+CLASSES.panelHeader,panel);useFloatingHeaders&&(floater=notFirstRun?priv.createFloatingHeader(header):du.queryOne("."+CLASSES.panelHeaderFloating,panel)),panelCache.push({elem:panel,header:header,floater:floater})}),notFirstRun&&useFloatingHeaders&&priv.positionFloatingHeaders(),panelCache},priv.positionFloatingHeaders=function(){panelCache.forEach(function(panel){var offsetTop,headerHeight,bottomOfPanel,positionTop,scrollTop;panel.floater&&(panel.elem.classList.contains(CLASSES.contentExpanded)?(bottomOfPanel=(offsetTop=du.getElementPosition(panel.elem)[1])+parseInt(getComputedStyle(panel.elem,null).height,10)+1,positionTop="0px",offsetTop<(scrollTop=window.scrollY)&&scrollTop<bottomOfPanel?(headerHeight=parseInt(getComputedStyle(panel.header,null).height,10),panel.floater.style.width=parseInt(panel.header.clientWidth,10)+"px",panel.floater.style.visibility="visible",bottomOfPanel-scrollTop<headerHeight&&(positionTop="-"+(headerHeight-(bottomOfPanel-scrollTop))+"px"),panel.floater.style.top=positionTop):panel.floater.style.visibility="hidden"):panel.floater.style.visibility="hidden")})},priv.updatePanelHeaderFromInput=function(input){var headerElem,val,spans,areAllEmpty,headerElemId=input.getAttribute(ATTR_NAMES.headerInputId);headerElemId&&(headerElem=document.getElementById(headerElemId))&&(val=du.getValueAsText(input),(headerElem.innerHTML=val).length||-1===headerElemId.indexOf("_pri-")||(spans=du.query("span",headerElem.parentNode),areAllEmpty=!0,spans.some(function(span){if(du.trim(span.textContent).length)return areAllEmpty=!1}),areAllEmpty&&(headerElem.innerHTML=TEXT_clearedRowTitle)),priv.updatePanelCache())},priv.hasContent=function(elem){return 0<du.trim(elem.innerHTML.replace(/\s|\n|<\/\s*?br\s*\/?>|&nbsp;/gm,"")).length},priv.htmlToText=function(str){var elem;return(elem=document.createElement("div")).innerHTML=str,elem.innerHTML=elem.innerHTML.replace(/\s*\:\s*$/,""),du.query("."+CLASSES.iconHelp+", ."+CLASSES.required+", ."+CLASSES.hidden+", br",elem).forEach(function(el){el.parentNode.removeChild(el)}),du.query("a",elem).forEach(function(el){el.parentNode.innerHTML=el.parentNode.innerHTML.replace(el.outerHTML,du.trim(el.innerHTML))}),du.trim(elem.innerHTML," ")},events.setup=function(){return du.query("."+CLASSES.panelHeader).forEach(function(panelHeader){panelHeader.addEventListener("click",events.onToggleContent,!1)}),du.query("."+CLASSES.fauxRemoveButton).forEach(function(removeButton){removeButton.addEventListener("click",events.onRemoveClick,!1)}),useFloatingHeaders&&(priv.updatePanelCache(),window.addEventListener("scroll",priv.positionFloatingHeaders,!1),priv.positionFloatingHeaders()),!0},events.teardown=function(){du.query("."+CLASSES.panelHeader).forEach(function(panelHeader){panelHeader.removeEventListener("click",events.onToggleContent,!1)}),du.query("."+CLASSES.fauxRemoveButton).forEach(function(removeButton){removeButton.removeEventListener("click",events.onRemoveClick,!1)}),useFloatingHeaders&&(panelCache=[],window.removeEventListener("scroll",priv.positionFloatingHeaders,!1))},events.onToggleContent=function(evt){var panel,content,target=evt.target;du.getParentElem(target,"."+CLASSES.panelControls)?events.onSelectionControlClick(evt):(panel=du.getParentElem(target,"."+CLASSES.panel),(content=du.queryOne("."+CLASSES.contentWrapper,panel)).classList.contains(CLASSES.hidden)?(panel.classList.add(CLASSES.contentExpanded),du.expand(content)):(panel.classList.remove(CLASSES.contentExpanded),du.collapse(content),useFloatingHeaders&&(du.queryOne("."+CLASSES.panelHeaderFloating,panel).style.visibility="hidden",priv.positionFloatingHeaders())))},events.onFauxInputChange=function(evt){var realId,realInput,fauxInput=evt.target;fauxInput&&(realId=fauxInput.id.replace(ID_SUFFIXES.fauxInput,""),(realInput=document.getElementById(realId))&&(realInput.value=fauxInput.value,du.isCheckableInput(fauxInput)&&(realInput.checked=fauxInput.checked),du.event.trigger(realInput,"change")),priv.updatePanelHeaderFromInput(realInput))},events.onRealInputChange=function(evt){var fauxId,fauxInput,realInput=evt.target;realInput&&(fauxId=realInput.id+ID_SUFFIXES.fauxInput,(fauxInput=document.getElementById(fauxId))&&(fauxInput.value=realInput.value,du.isCheckableInput(fauxInput)&&(fauxInput.checked=realInput.checked)),priv.updatePanelHeaderFromInput(realInput))},events.onFauxControlClick=function(evt){var target=evt.target,sourceElem=document.getElementById(target.getAttribute(ATTR_NAMES.fauxControlSourceId));sourceElem&&(target.innerHTML===TEXT_removeButton?events.onRemoveClick(evt):(du.event.trigger(sourceElem,"click"),(du.matchesSelector(sourceElem,SELECTORS_textOrSelectField)||du.matchesSelector(sourceElem,SELECTORS_checkableInput))&&du.event.trigger(sourceElem,"change")))},events.onRemoveClick=function(evt){var button=evt.target,table=formTables[button.getAttribute(ATTR_NAMES.tableId)],cboxId=button.getAttribute(ATTR_NAMES.removeCboxId),cbox=document.getElementById(cboxId);cbox.checked=!0,du.event.trigger(cbox,"change"),du.event.trigger(table.removeButton,"click")},events.onSelectionControlClick=function(evt){var fauxControl,cboxId,cbox,wasAlreadyChecked,panelHeader=du.getParentElem(evt.target,"."+CLASSES.panelHeader);panelHeader.classList.contains(CLASSES.panelHeaderFloating)&&(panelHeader=du.queryOne("."+CLASSES.panelHeader+":not(."+CLASSES.panelHeaderFloating+")",panelHeader.parentNode)),fauxControl=du.queryOne("."+CLASSES.panelSelection,du.queryOne("."+CLASSES.panelControls,panelHeader)),cboxId=fauxControl.getAttribute(ATTR_NAMES.fauxControlSourceId),cbox=document.getElementById(cboxId),wasAlreadyChecked="true"===fauxControl.getAttribute("aria-checked"),"checkbox"===cbox.type?wasAlreadyChecked?(cbox.checked=!1,cbox.removeAttribute("checked"),fauxControl.setAttribute("aria-checked","false")):(cbox.checked=!0,cbox.setAttribute("checked","checked"),fauxControl.setAttribute("aria-checked","true")):(cbox.checked=!0,wasAlreadyChecked||(fauxControl.setAttribute("aria-checked","true"),du.query("["+ATTR_NAMES.fauxControlSourceId+"]",du.getParentElem(cbox,"."+CLASSES.outerWrapper)).forEach(function(fauxRadio){fauxRadio.getAttribute(ATTR_NAMES.fauxControlSourceId)!==cboxId&&fauxRadio.setAttribute("aria-checked","false")}))),priv.updatePanelCache(),du.event.trigger(cbox,"change")},{setup:function(tables){return!(void 0===tables&&du.query("."+CLASSES.outerWrapper).length||(void 0===tables?priv.setupAllTables():("array"!==du.typeOf(tables)&&(tables=[tables]),tables.forEach(function(table){"element"===du.typeOf(table)&&priv.setupTable(table)})),needToInitCalendars&&PLUGIN.calendar&&(PLUGIN.calendar.init(),needToInitCalendars=!1),needToInitTooltips&&PLUGIN.tooltip&&(du.query("."+CLASSES.outerWrapper+" .has-tooltip").forEach(function(icon){icon.classList.remove("has-tooltip"),icon.classList.remove("has-tooltip-events")}),PLUGIN.tooltip.addLinks("."+CLASSES.outerWrapper,{forceSetup:!0})),0))},teardown:function(){var f,table,tableElem;for(f in events.teardown(),formTables)formTables.hasOwnProperty(f)&&((tableElem=(table=formTables[f]).targetElem)&&tableElem.parentNode&&tableElem.parentNode.removeChild(tableElem),table.maskToggleInputs.length&&PLUGIN.masktoggle.teardown(table.maskToggleInputs));return!0}}}(),uiResponsive.table.nav=function(){var NAMESPACE="navtable",DEFAULT_PANEL_LIST={panels:[],modes:{nav:!1,select:!1,remove:!1}},DEFAULT_PANEL={id:"",title:"",primary:[],secondary:[],action:{nav:null,remove:null,select:null}},CLASSES={hidden:"hidden",floatRight:"float-right",floatLeft:"float-left",outerWrapper:NAMESPACE,selectMode:"navtable-select-mode",editMode:"navtable-edit-mode",menuMode:"navtable-menu-mode",hasSelected:"navtable-has-selected",hasSelect:"navtable-has-select",hasNav:"navtable-has-nav",hasRemove:"navtable-has-remove",headerWrapper:"navtable-header-wrapper",header:"navtable-header",tableTitle:"navtable-header-title",menuToggle:"navtable-menubar-toggle",headerFloating:"navtable-header-floating",instToggle:"table-inst-toggle",instTooltip:"table-inst-tooltip tt-nav-table",menubarWrapper:"navtable-menubar",menuLeft:"navtable-menu-left",menuRight:"navtable-menu-right",menuSelect:"navtable-menu-control-selection",menuSelectAll:"navtable-menu-select-all",menuRemove:"navtable-menu-control-removal",menuSelectButton:"navtable-menu-select",menuClearButton:"navtable-menu-clear",menuDoneButton:"navtable-menu-done",menuRemoveButton:"navtable-menu-remove",menuEditButton:"navtable-menu-edit",panelList:"navtable-panel-list",panel:"navtable-panel",panelHasSelect:"navtable-panel-has-select",panelHasNav:"navtable-panel-has-nav",panelHasRemove:"navtable-panel-has-remove",selected:"navtable-panel-selected",contentWrapper:"navtable-panel-content",contentPrimary:"navtable-panel-content-primary",contentSecondary:"navtable-panel-content-secondary",contentSecondaryLabel:"navtable-panel-content-secondary-label",contentSecondaryData:"navtable-panel-content-secondary-data",controlsWrapper:"navtable-panel-controls",controlsWrapperLeft:"navtable-panel-controls-left",controlsWrapperRight:"navtable-panel-controls-right",control:"navtable-panel-control",controlView:"navtable-panel-control-view",controlNav:"navtable-panel-control-nav",controlSelect:"navtable-panel-control-select",controlSelectBox:"navtable-panel-control-selectbox",controlRemoveButton:"navtable-panel-control-remove",totalWrapper:"navtable-total",totalLabel:"navtable-total-label",totalData:"navtable-total-data",sourceTable:"navtable-source",primary:"table-primary",secondary:"table-secondary",sourceTableTitle:"rset_title"},SELECTORS_sourceRset=".rset.nav-table",ATTR_NAMES={panelNav:"data-navtable-nav",panelSelect:"data-navtable-select",panelRemove:"data-navtable-remove",tableId:"data-navtable-table-id",panelIndex:"data-navtable-panel-index",tooltip:"data-table-tooltip-id"},ID_SUFFIXES_fauxInput="_navtable",TEXT_controlNav="Open",TEXT_selectBox="Select this item",TEXT_panelRemoveButton="Remove",TEXT_menuToggle="Remove...",TEXT_menu={add:"Add",select:"Select",clear:"Clear",remove:"Remove",toggler:"Remove...",done:"Cancel"},ONCLICK_REGEX=/\s+(onclick\=\"[^\"]+\")/gi,du={query:uiUtil.query,queryOne:uiUtil.queryOne,toggleClass:uiUtil.css.toggleClass,getParentElem:uiUtil.getParentElem,extend:uiUtil.extend,typeOf:uiUtil.typeOf,trim:uiUtil.trim,getElementPosition:uiUtil.getElementPosition,preload:uiMethods.preloader.addAsset,browser:uiUtil.browser,imagesPath:uiGlobal.sIFLOWImagesPath,logError:uiUtil.errorHandling.jsLog.addEntry,event:{trigger:uiEvents.trigger,stop:uiUtil.stopEvent}},lists={},priv={},events={};return priv.hasPreloaded=!1,priv.preload=function(){du.preload('<object type="image/svg+xml" data="'+du.imagesPath+'checkbox-checked.svg"></object>'),du.preload('<object type="image/svg+xml" data="'+du.imagesPath+'checkbox.svg"></object>'),du.preload('<object type="image/svg+xml" data="'+du.imagesPath+'trash-can.svg"></object>'),priv.hasPreloaded=!0},priv.setupAllTables=function(){var success=!1;return du.query(SELECTORS_sourceRset).forEach(function(rset){du.queryOne("table",rset)&&(priv.setupTable(rset),success=!0)}),success&&events.setup(),success},priv.setupTable=function(rset){var pl;pl=uiResponsive.table.create(rset),pl=du.extend(!0,{},DEFAULT_PANEL_LIST,pl),(pl=priv.collectPanels(pl)).targetElem=priv.renderPanels(pl),lists[pl.id]=pl},priv.collectPanels=function(pl){var tbody=pl.sourceElem.tBodies[0];return du.query("tr",tbody).forEach(function(tr,i){var elem,panel=du.extend(!0,{},DEFAULT_PANEL),cells=du.query("td",tr),lastCell=cells[cells.length-1];panel.id=pl.id+"_panel_"+i,pl.primary.indices.forEach(function(index){var elem,td=cells[index];panel.primary.push(td),(elem=du.queryOne("a",td))||(elem=du.queryOne('input[value="Select"], input[value*="View"]',lastCell)),elem&&(panel.action.nav=elem,pl.modes.nav=!0)}),pl.secondary.indices.forEach(function(index){panel.secondary.push(cells[index])}),cells.forEach(function(td){var cbox=du.queryOne('input[type="checkbox"]',td);cbox&&(panel.action.select||(panel.action.select=cbox,pl.modes.select=!0),cbox.addEventListener("change",priv.onRealCheckBoxChange,!1))}),(elem=du.queryOne('.icon-delete, input[value="Remove"], [value="Delete"], [title="Delete"]',tr))&&(panel.action.remove=elem,pl.modes.remove=!0),pl.panels.push(panel)}),pl},priv.renderPanels=function(pl){var insertElement,settings,outerWrapper=document.createElement("div"),panelList=document.createElement("ol"),headerWrapper=document.createElement("div");return outerWrapper.className=CLASSES.outerWrapper,outerWrapper.setAttribute(ATTR_NAMES.tableId,pl.id),pl.modes.nav&&outerWrapper.classList.add(CLASSES.hasNav),pl.modes.select&&outerWrapper.classList.add(CLASSES.hasSelect),pl.modes.remove&&outerWrapper.classList.add(CLASSES.hasRemove),headerWrapper.classList.add(CLASSES.headerWrapper),(pl.title||pl.instructions.length)&&headerWrapper.appendChild(priv.createTableHeader(pl)),pl.modes.select&&headerWrapper.appendChild(priv.renderMenuBar(pl)),outerWrapper.appendChild(headerWrapper),pl.panels.forEach(function(panel,i){var panelElem,panelWrapper,contentWrapper,contentPrimary,contentSecondary,controlsWrapper,controlView,controlNav,controlSelect,controlSelectBox;(panelElem=document.createElement("li")).classList.add(CLASSES.panel),(panelWrapper=document.createElement("div")).setAttribute("role","link"),panelWrapper.setAttribute(ATTR_NAMES.tableId,pl.id),panelWrapper.setAttribute(ATTR_NAMES.panelIndex,i),(controlsWrapper=document.createElement("div")).classList.add(CLASSES.controlsWrapper),controlsWrapper.classList.add(CLASSES.controlsWrapperLeft),pl.modes.select&&(panelElem.classList.add(CLASSES.panelHasSelect),(controlSelect=document.createElement("div")).classList.add(CLASSES.controlSelect),controlSelect.classList.add(CLASSES.control),(controlSelectBox=document.createElement("div")).setAttribute("role","checkbox"),controlSelectBox.classList.add(CLASSES.controlSelectBox),panel.action.select.checked?(controlSelectBox.setAttribute("checked","checked"),controlSelectBox.setAttribute("aria-checked","true"),panelWrapper.classList.add(CLASSES.selected)):controlSelectBox.setAttribute("aria-checked","false"),controlSelectBox.innerHTML=TEXT_selectBox,controlSelect.appendChild(controlSelectBox),controlsWrapper.appendChild(controlSelect)),panelWrapper.appendChild(controlsWrapper),(contentWrapper=document.createElement("div")).classList.add(CLASSES.contentWrapper),(contentPrimary=document.createElement("div")).classList.add(CLASSES.contentPrimary),panel.primary.forEach(function(tdElem,i){var html=du.trim(tdElem.innerHTML," ");0!==i&&(contentPrimary.innerHTML+=" "),ONCLICK_REGEX.test(html)&&(html=html.replace(ONCLICK_REGEX,"")),contentPrimary.innerHTML+=html}),contentWrapper.appendChild(contentPrimary),pl.secondary.label&&panel.secondary.length&&(1===panel.secondary.length&&panel.secondary[0].classList.contains("rt")?((contentSecondary=document.createElement("div")).classList.add(CLASSES.contentSecondaryLabel),contentSecondary.innerHTML=pl.secondary.label+":",contentWrapper.appendChild(contentSecondary),(contentSecondary=document.createElement("div")).classList.add(CLASSES.contentSecondaryData)):((contentSecondary=document.createElement("div")).classList.add(CLASSES.contentSecondary),contentSecondary.innerHTML=pl.secondary.label+": "),panel.secondary.forEach(function(elem,i){0!==i&&(contentSecondary.innerHTML+=" "),contentSecondary.innerHTML+=du.trim(elem.innerHTML," "),elem.classList.toString().split(" ").forEach(function(className){className&&"noWrap"!==className&&contentSecondary.classList.add(className)})}),contentWrapper.appendChild(contentSecondary)),panelWrapper.appendChild(contentWrapper),(controlsWrapper=document.createElement("div")).classList.add(CLASSES.controlsWrapper),controlsWrapper.classList.add(CLASSES.controlsWrapperRight),(pl.modes.nav||pl.modes.remove)&&((controlView=document.createElement("div")).classList.add(CLASSES.controlView),controlView.classList.add(CLASSES.control),pl.modes.nav&&(panelElem.classList.add(CLASSES.panelHasNav),(controlNav=document.createElement("div")).classList.add(CLASSES.controlNav),controlNav.setAttribute("role","button"),controlNav.innerHTML=TEXT_controlNav,controlView.appendChild(controlNav)),pl.modes.remove&&panel.action.remove&&(panelElem.classList.add(CLASSES.panelHasRemove),(controlSelectBox=document.createElement("div")).classList.add(CLASSES.controlRemoveButton),controlSelectBox.setAttribute("role","button"),controlSelectBox.innerHTML=TEXT_panelRemoveButton,controlView.appendChild(controlSelectBox)),controlsWrapper.appendChild(controlView)),panelWrapper.appendChild(controlsWrapper),panelElem.appendChild(panelWrapper),panelList.appendChild(panelElem)}),outerWrapper.appendChild(panelList),(pl.footer.label||pl.footer.data)&&outerWrapper.appendChild(priv.createTotalDisplay(pl)),(insertElement=pl.sourceRset)||(insertElement=pl.sourceElem.parentNode),outerWrapper=insertElement.parentNode.insertBefore(outerWrapper,insertElement.nextSibling),pl.instructions.toggleElem&&PLUGIN.tooltip&&((settings=PLUGIN.tooltip.getSettingsTemplate()).selector="."+CLASSES.instToggle,settings.containerClass=CLASSES.instTooltip,settings.contentIdSourceAttr=ATTR_NAMES.tooltip,PLUGIN.tooltip.registerConfig(NAMESPACE,settings)),du.browser.supports.sticky||priv.insertFloatingHeader(headerWrapper),outerWrapper},priv.createTotalDisplay=function(pl){var totalWrapper=document.createElement("div"),totalLabel=document.createElement("div"),totalData=document.createElement("div");return totalWrapper.classList.add(CLASSES.totalWrapper),totalLabel.classList.add(CLASSES.totalLabel),totalLabel.innerHTML=pl.footer.label,totalData.classList.add(CLASSES.totalData),totalData.innerHTML=pl.footer.data,totalWrapper.appendChild(totalLabel),totalWrapper.appendChild(totalData),totalWrapper},priv.createTableHeader=function(pl){var header=document.createElement("div"),title=document.createElement("div"),heading=document.createElement("h5"),linkElem=(document.createElement("div"),document.createElement("a"));return header.classList.add(CLASSES.header),pl.title&&(title.classList.add(CLASSES.tableTitle),heading.innerHTML=pl.title,title.appendChild(heading),pl.modes.select&&title.classList.add(CLASSES.floatLeft),pl.instructions.toggleElem&&title.appendChild(pl.instructions.toggleElem)),header.appendChild(title),pl.modes.select?(linkElem.classList.add(CLASSES.menuToggle),linkElem.classList.add(CLASSES.floatRight),linkElem.setAttribute("role","button"),linkElem.innerHTML=TEXT_menuToggle,header.appendChild(linkElem),title.classList.add(CLASSES.floatLeft)):pl.modes.remove&&(linkElem.classList.add(CLASSES.menuEditButton),linkElem.classList.add(CLASSES.floatRight),linkElem.setAttribute("role","button"),linkElem.innerHTML=TEXT_menu.toggler,header.appendChild(linkElem),(linkElem=document.createElement("a")).classList.add(CLASSES.menuDoneButton),linkElem.classList.add(CLASSES.floatRight),linkElem.setAttribute("role","button"),linkElem.innerHTML=TEXT_menu.done,header.appendChild(linkElem),title.classList.add(CLASSES.floatLeft)),header},priv.renderMenuBar=function(pl){var menuSelectAll,menubarWrapper=document.createElement("div"),menuLeft=document.createElement("div"),menuRight=document.createElement("div"),menuSelectButton=(document.createElement("div"),document.createElement("h5"),document.createElement("button")),menuClearButton=document.createElement("button"),menuRemoveButton=document.createElement("button");return menubarWrapper.classList.add(CLASSES.menubarWrapper),menuLeft.classList.add(CLASSES.menuLeft),menuRight.classList.add(CLASSES.menuRight),(menuSelectAll=document.createElement("div")).classList.add(CLASSES.menuSelectAll),menuSelectAll.setAttribute("role","checkbox"),menuSelectAll.setAttribute("aria-checked","false"),menuSelectAll.setAttribute(ATTR_NAMES.tableId,pl.id),menuSelectAll.innerHTML=TEXT_selectBox,menuLeft.appendChild(menuSelectAll),menuSelectButton.classList.add(CLASSES.menuSelectButton),menuSelectButton.setAttribute("type","button"),menuSelectButton.innerHTML=TEXT_menu.select,menuRemoveButton.classList.add(CLASSES.menuRemoveButton),menuRemoveButton.classList.add(CLASSES.floatRight),menuRemoveButton.setAttribute("type","button"),menuRemoveButton.innerHTML=TEXT_menu.remove,menuRight.appendChild(menuRemoveButton),menuClearButton.classList.add(CLASSES.menuClearButton),menuClearButton.classList.add(CLASSES.floatRight),menuClearButton.setAttribute("type","button"),menuClearButton.innerHTML=TEXT_menu.clear,menuRight.appendChild(menuClearButton),menubarWrapper.appendChild(menuLeft),menubarWrapper.appendChild(menuRight),menubarWrapper},priv.insertFloatingHeader=function(headerWrapper){var floatingHeader=headerWrapper.cloneNode(!0);floatingHeader.classList.add(CLASSES.headerFloating),du.query("."+CLASSES.headerFloating,headerWrapper.parentNode).forEach(function(floater){floater.parentNode.removeChild(floater)}),headerWrapper.parentNode.insertBefore(floatingHeader,headerWrapper.nextSibling),floatingHeader.style.visibility="visible",floatingHeader.style.width="100%",priv.positionFloatingHeaders()},priv.positionFloatingHeaders=function(evt){du.query("."+CLASSES.headerFloating).forEach(function(floatingHeader){var headerElem,offsetTop,headerHeight,bottomOfPanelList,positionTop,outerWrapper=du.getParentElem(floatingHeader,"."+CLASSES.outerWrapper),scrollTop=window.scrollY;bottomOfPanelList=(offsetTop=du.getElementPosition(outerWrapper)[1])+parseInt(getComputedStyle(outerWrapper,null).height,10)+1,positionTop="0px",offsetTop<scrollTop&&scrollTop<bottomOfPanelList?(headerElem=du.queryOne("."+CLASSES.headerWrapper,outerWrapper),headerHeight=parseInt(getComputedStyle(headerElem,null).height,10),floatingHeader.style.width=parseInt(headerElem.clientWidth,10)+"px",floatingHeader.style.visibility="visible",bottomOfPanelList-scrollTop<headerHeight&&(positionTop="-"+(headerHeight-(bottomOfPanelList-scrollTop))+"px"),floatingHeader.style.top=positionTop):floatingHeader.style.visibility="hidden"})},priv.clearSelectionBoxes=function(outerWrapper){du.query('[role="link"].'+CLASSES.selected,outerWrapper).forEach(function(panelElem){var tableId=panelElem.getAttribute(ATTR_NAMES.tableId),panelIndex=parseInt(panelElem.getAttribute(ATTR_NAMES.panelIndex),10),panel=lists[tableId].panels[panelIndex],selectionBox=du.queryOne("."+CLASSES.controlSelectBox,panelElem);panelElem.classList.remove(CLASSES.selected),selectionBox.setAttribute("aria-checked","false"),panel.action.select.checked=!1,du.event.trigger(panel.action.select,"change")}),outerWrapper.classList.remove(CLASSES.hasSelected),du.query("."+CLASSES.menubarWrapper,outerWrapper).forEach(function(elem){elem.classList.remove(CLASSES.selected)}),du.query("."+CLASSES.menuSelectAll,outerWrapper).forEach(function(elem){elem.setAttribute("aria-checked","false")})},priv.openMenubar=function(outerWrapper){var menubarWrapper=du.queryOne("."+CLASSES.menubarWrapper,outerWrapper),classes=outerWrapper.classList;priv.setMenubarAttributes(menubarWrapper,outerWrapper,!0),outerWrapper.className=classes+" "+CLASSES.selectMode+" "+CLASSES.menuMode},priv.closeMenubar=function(outerWrapper){var menubarWrapper=du.queryOne("."+CLASSES.menubarWrapper,outerWrapper),classes=" "+outerWrapper.classList+" ";outerWrapper.classList.contains(CLASSES.hasSelect)&&priv.clearSelectionBoxes(outerWrapper),priv.setMenubarAttributes(menubarWrapper,outerWrapper,!1),classes=classes.replace(" "+CLASSES.menuMode+" "," ").replace(" "+CLASSES.selectMode+" "," ").replace(" "+CLASSES.hasSelected+" "," "),outerWrapper.className=du.trim(classes," ")},priv.toggleMenubar=function(outerWrapper){outerWrapper.classList.contains(CLASSES.menuMode)?priv.closeMenubar(outerWrapper):priv.openMenubar(outerWrapper)},priv.setMenubarAttributes=function(menubarWrapper,outerWrapper,willOpen){var menuToggle=du.queryOne("."+CLASSES.menuToggle,outerWrapper),expanded=(!!willOpen).toString(),hidden=(!willOpen).toString();menubarWrapper.setAttribute("aria-hidden",hidden),menuToggle.setAttribute("aria-hidden",hidden),menubarWrapper.setAttribute("aria-expanded",expanded),menuToggle.setAttribute("aria-expanded",expanded)},events.setup=function(){du.query('[role="link"]').forEach(function(panel){panel.addEventListener("click",events.onPanelClick,!1)}),du.query("."+CLASSES.menuSelectButton).forEach(function(button){button.addEventListener("click",events.onSelectButtonClick,!1)}),du.query("."+CLASSES.menuEditButton).forEach(function(button){button.addEventListener("click",events.onEditButtonClick,!1)}),du.query("."+CLASSES.menuClearButton).forEach(function(button){button.addEventListener("click",events.onCancelSelection,!1)}),du.query("."+CLASSES.menuDoneButton).forEach(function(button){button.addEventListener("click",events.onCancelEdit,!1)}),du.query("."+CLASSES.menuRemoveButton).forEach(function(button){button.addEventListener("click",events.onRemoveAllButtonClick,!1)}),du.query("."+CLASSES.menuSelectAll).forEach(function(button){button.addEventListener("click",events.onSelectAllClick,!1)}),du.query("."+CLASSES.menuToggle).forEach(function(button){button.addEventListener("click",events.onMenuToggle,!1)}),du.browser.supports.sticky||(window.addEventListener("scroll",priv.positionFloatingHeaders,!1),priv.positionFloatingHeaders())},events.teardown=function(){du.query('[role="link"]').forEach(function(panel){panel.removeEventListener("click",events.onPanelClick,!1)}),du.query("."+CLASSES.menuSelectButton).forEach(function(button){button.removeEventListener("click",events.onSelectButtonClick,!1)}),du.query("."+CLASSES.menuEditButton).forEach(function(button){button.removeEventListener("click",events.onEditButtonClick,!1)}),du.query("."+CLASSES.menuClearButton).forEach(function(button){button.removeEventListener("click",events.onCancelSelection,!1)}),du.query("."+CLASSES.menuDoneButton).forEach(function(button){button.removeEventListener("click",events.onCancelEdit,!1)}),du.query("."+CLASSES.menuRemoveButton).forEach(function(button){button.removeEventListener("click",events.onRemoveAllButtonClick,!1)}),du.query("."+CLASSES.menuSelectAll).forEach(function(button){button.removeEventListener("click",events.onSelectAllClick,!1)}),du.query("."+CLASSES.menuToggle).forEach(function(button){button.removeEventListener("click",events.onMenuToggle,!1)}),du.browser.supports.sticky||window.removeEventListener("scroll",priv.positionFloatingHeaders,!1)},events.onPanelClick=function(evt){var selectionBox,target=evt.target,panelElem=du.getParentElem(target,'[role="link"]'),outerWrapper=du.getParentElem(panelElem,"."+CLASSES.outerWrapper),tableId=panelElem.getAttribute(ATTR_NAMES.tableId),panelIndex=parseInt(panelElem.getAttribute(ATTR_NAMES.panelIndex),10),panel=lists[tableId].panels[panelIndex];outerWrapper.classList.contains(CLASSES.selectMode)||outerWrapper.classList.contains(CLASSES.editMode)?panel.action.select?(du.event.stop(evt),selectionBox=du.queryOne("."+CLASSES.controlSelectBox,panelElem),panelElem.classList.contains(CLASSES.selected)?(panelElem.classList.remove(CLASSES.selected),selectionBox.setAttribute("aria-checked","false"),panel.action.select.checked=!1):(panelElem.classList.add(CLASSES.selected),selectionBox.setAttribute("aria-checked","true"),panel.action.select.checked=!0),du.event.trigger(panel.action.select,"change"),du.queryOne("."+CLASSES.controlSelectBox+'[aria-checked="true"]',outerWrapper)?outerWrapper.classList.add(CLASSES.hasSelected):outerWrapper.classList.remove(CLASSES.hasSelected)):panel.action.remove&&du.getParentElem(target,"."+CLASSES.controlsWrapper)&&(du.event.stop(evt),du.event.trigger(panel.action.remove,"click")):panel.action.nav&&(du.event.stop(evt),du.event.trigger(panel.action.nav,"click"))},events.onSelectAllClick=function(evt){var target=evt.target,selectAllBox=du.getParentElem(target,"."+CLASSES.menuSelectAll),menubarWrapper=du.getParentElem(selectAllBox,"."+CLASSES.menubarWrapper),outerWrapper=du.getParentElem(menubarWrapper,"."+CLASSES.outerWrapper),tableId=selectAllBox.getAttribute(ATTR_NAMES.tableId),pl=lists[tableId],doSelect=!1;outerWrapper.classList.contains(CLASSES.selectMode)&&pl.modes.select&&(du.event.stop(evt),menubarWrapper.classList.contains(CLASSES.selected)?(menubarWrapper.classList.remove(CLASSES.selected),outerWrapper.classList.contains(CLASSES.hasSelect)&&priv.clearSelectionBoxes(outerWrapper)):(menubarWrapper.classList.add(CLASSES.selected),du.query('[role="link"]',outerWrapper).forEach(function(panelElem){var panelIndex=parseInt(panelElem.getAttribute(ATTR_NAMES.panelIndex),10),panel=pl.panels[panelIndex],selectionBox=du.queryOne("."+CLASSES.controlSelectBox,panelElem);panelElem.classList.add(CLASSES.selected),selectionBox.setAttribute("aria-checked","true"),panel.action.select.checked=!0,du.event.trigger(panel.action.select,"change")}),selectAllBox.setAttribute("aria-checked","true"),doSelect=!0),doSelect?outerWrapper.classList.add(CLASSES.hasSelected):outerWrapper.classList.remove(CLASSES.hasSelected),du.query("."+CLASSES.headerWrapper,outerWrapper).forEach(function(headerWrapper){var menubarWrapper=du.queryOne("."+CLASSES.menubarWrapper,headerWrapper),selectAllBox=du.queryOne("."+CLASSES.menuSelectAll,menubarWrapper),classMethod=doSelect?"add":"remove";selectAllBox.setAttribute("aria-checked",doSelect.toString()),menubarWrapper.classList[classMethod](CLASSES.selected)}))},events.onMenuToggle=function(evt){var target=evt.target,outerWrapper=du.getParentElem(target,"."+CLASSES.outerWrapper);priv.toggleMenubar(outerWrapper)},events.onRealInputChange=function(evt){var fauxId,fauxInput,realInput=evt.target;realInput&&(fauxId=realInput.id+ID_SUFFIXES_fauxInput,(fauxInput=document.getElementById(fauxId))&&(fauxInput.value=realInput.value,priv.updatePanelStatus(fauxInput)))},events.onSelectButtonClick=function(evt){var button=evt.target,outerWrapper=du.getParentElem(button,"."+CLASSES.outerWrapper);du.toggleClass(outerWrapper,CLASSES.selectMode)},events.onCancelSelection=function(evt){var target=evt.target,outerWrapper=du.getParentElem(target,"."+CLASSES.outerWrapper);priv.closeMenubar(outerWrapper)},events.onEditButtonClick=function(evt){evt.target;du.getParentElem(evt.target,"."+CLASSES.outerWrapper).classList.add(CLASSES.editMode)},events.onCancelEdit=function(evt){evt.target;du.getParentElem(evt.target,"."+CLASSES.outerWrapper).classList.remove(CLASSES.editMode)},events.onRemoveAllButtonClick=function(evt){var button=evt.target,outerWrapper=du.getParentElem(button,"."+CLASSES.outerWrapper),tableId=outerWrapper.getAttribute(ATTR_NAMES.tableId),pl=lists[tableId];if(pl.removeButton){try{du.event.trigger(pl.removeButton,"click")}catch(e){pl.removeButton.click()}outerWrapper.classList.contains(CLASSES.hasSelect)&&priv.clearSelectionBoxes(outerWrapper)}},{setup:function(tables){return!(void 0===tables&&du.query("."+CLASSES.outerWrapper).length||(priv.hasPreloaded||(du.imagesPath=uiGlobal.sIFLOWImagesPath,priv.preload()),void 0===tables?priv.setupAllTables():("array"!==du.typeOf(tables)&&(tables=[tables]),tables.forEach(function(table){"element"===du.typeOf(table)&&priv.setupTable(table)})),0))},teardown:function(){return events.teardown(),du.query("."+CLASSES.outerWrapper).forEach(function(pl){pl.parentNode.removeChild(pl)}),!0}}}(),uiResponsive.table.radio=function(){var NAMESPACE="radiotable",DEFAULT_PANEL_LIST={panels:[],modes:{expand:!1,select:!1,remove:!1}},DEFAULT_PANEL={id:"",title:"",primary:[],secondary:[],expanded:[],action:{expand:null,remove:null,select:null}},CLASSES={hidden:"hidden",outerWrapper:NAMESPACE,hasSelected:"radiotable-has-selected",hasSelect:"radiotable-has-select",hasRemove:"radiotable-has-remove",headerWrapper:"radiotable-header-wrapper",header:"radiotable-header",tableTitle:"radiotable-header-title",headerFloating:"radiotable-header-floating",instToggle:"table-inst-toggle",instTooltip:"table-inst-tooltip",panelList:"radiotable-panel-list",panel:"radiotable-panel",panelIsExpanded:"radiotable-panel-is-expanded",selected:"radiotable-panel-selected",contentWrapper:"radiotable-panel-content",contentPrimary:"radiotable-panel-content-primary",contentSecondary:"radiotable-panel-content-secondary",contentSecondaryLabel:"radiotable-panel-content-secondary-label",contentSecondaryData:"radiotable-panel-content-secondary-data",contentExpanded:"radiotable-panel-content-expanded",contentExpandedRow:"radiotable-panel-content-expanded-row",contentExpandedLabel:"radiotable-panel-content-expanded-label",contentExpandedData:"radiotable-panel-content-expanded-data",controlsWrapper:"radiotable-panel-controls",controlsWrapperLeft:"radiotable-panel-controls-left",controlsWrapperRight:"radiotable-panel-controls-right",control:"radiotable-panel-control",controlExpand:"radiotable-panel-control-expand",controlSelect:"radiotable-panel-control-select",controlSelectBox:"radiotable-panel-control-selectbox",controlRemoveButton:"radiotable-panel-control-remove",totalWrapper:"radiotable-total",totalLabel:"radiotable-total-label",totalData:"radiotable-total-data",sourceTable:"radiotable-source",primary:"table-primary",secondary:"table-secondary",sourceTableTitle:"rset_title"},SELECTORS_sourceRset=".rset.radio-table",ATTR_NAMES={panelExpand:"data-radiotable-expand",tableId:"data-radiotable-table-id",panelIndex:"data-radiotable-panel-index",tooltip:"data-table-tooltip-id"},ID_SUFFIXES_fauxInput="_radiotable",TEXT_controlExpand="Open",TEXT_selectBox="Select this item",du={query:uiUtil.query,queryOne:uiUtil.queryOne,getParentElem:uiUtil.getParentElem,extend:uiUtil.extend,typeOf:uiUtil.typeOf,trim:uiUtil.trim,getElementPosition:uiUtil.getElementPosition,preload:uiMethods.preloader.addAsset,browser:uiUtil.browser,animateHeightToggle:uiAnimate.height.toggle,imagesPath:uiGlobal.sIFLOWImagesPath,event:{trigger:uiEvents.trigger,stop:uiUtil.stopEvent}},lists={},priv={},events={};return priv.hasPreloaded=!1,priv.preload=function(){du.preload('<object type="image/svg+xml" data="'+du.imagesPath+'radio-button-checked.svg"></object>'),priv.hasPreloaded=!0},priv.setupAllTables=function(){var success=!1;return du.query(SELECTORS_sourceRset).forEach(function(rset){du.queryOne("table",rset)&&(priv.setupTable(rset),success=!0)}),success&&events.setup(),success},priv.setupTable=function(rset){var PL;PL=uiResponsive.table.create(rset),PL=du.extend(!0,{},DEFAULT_PANEL_LIST,PL),(PL=priv.collectPanels(PL)).targetElem=priv.renderPanels(PL),lists[PL.id]=PL},priv.collectPanels=function(PL){var tbody=PL.sourceElem.tBodies[0],rows=du.query("tr",tbody);PL.primary.indices.concat(PL.secondary.indices);return rows.forEach(function(tr,i){var panel=du.extend(!0,{},DEFAULT_PANEL),cells=du.query("td",tr);cells[cells.length-1];panel.id=PL.id+"_panel_"+i,PL.primary.indices.forEach(function(index){panel.primary.push(cells[index])}),PL.secondary.indices.forEach(function(index){panel.secondary.push(cells[index])}),cells.forEach(function(td,index){var radio=du.queryOne('input[type="radio"]',td);radio?(panel.action.select||(panel.action.select=radio,PL.modes.select=!0),radio.addEventListener("change",priv.onRealCheckBoxChange,!1)):PL.expanded.indices.indexOf(index)&&panel.expanded.push(td)}),panel.action.remove=du.queryOne('.icon-delete, input[value="Remove"], [value="Delete"], [title="Delete"]',tr),panel.action.remove&&(PL.modes.remove=!0),PL.panels.push(panel)}),PL.modes.expand=0<PL.expanded.indices.length,PL},priv.renderPanels=function(PL){var insertElement,settings,outerWrapper=document.createElement("div"),panelList=document.createElement("ol"),headerWrapper=document.createElement("div");return outerWrapper.className=CLASSES.outerWrapper,outerWrapper.setAttribute(ATTR_NAMES.tableId,PL.id),PL.modes.remove&&outerWrapper.classList.add(CLASSES.hasRemove),headerWrapper.classList.add(CLASSES.headerWrapper),(PL.title||PL.instructions.length)&&headerWrapper.appendChild(priv.createTableHeader(PL)),outerWrapper.appendChild(headerWrapper),PL.panels.forEach(function(panel,i){var panelElem,panelWrapper,contentWrapper,contentPrimary,contentSecondary,controlsWrapper,controlView,controlExpand,controlSelect,controlSelectBox,contentExpanded;(panelElem=document.createElement("li")).classList.add(CLASSES.panel),(panelWrapper=document.createElement("div")).setAttribute("role","link"),panelWrapper.setAttribute(ATTR_NAMES.tableId,PL.id),panelWrapper.setAttribute(ATTR_NAMES.panelIndex,i),(controlsWrapper=document.createElement("div")).classList.add(CLASSES.controlsWrapper),controlsWrapper.classList.add(CLASSES.controlsWrapperLeft),(controlSelect=document.createElement("div")).classList.add(CLASSES.controlSelect),controlSelect.classList.add(CLASSES.control),panel.action.select&&((controlSelectBox=document.createElement("div")).setAttribute("role","radio"),controlSelectBox.classList.add(CLASSES.controlSelectBox),controlSelectBox.innerHTML=TEXT_selectBox,panel.action.select.checked?(controlSelectBox.setAttribute("checked","checked"),controlSelectBox.setAttribute("aria-checked","true"),panelWrapper.classList.add(CLASSES.selected)):controlSelectBox.setAttribute("aria-checked","false"),controlSelect.appendChild(controlSelectBox)),controlsWrapper.appendChild(controlSelect),panelWrapper.appendChild(controlsWrapper),(contentWrapper=document.createElement("div")).classList.add(CLASSES.contentWrapper),(contentPrimary=document.createElement("div")).classList.add(CLASSES.contentPrimary),panel.primary.forEach(function(elem,i){0!==i&&(contentPrimary.innerHTML+=" "),contentPrimary.innerHTML+=du.trim(elem.innerHTML," ")}),contentWrapper.appendChild(contentPrimary),PL.secondary.label&&panel.secondary.length&&(1===panel.secondary.length&&panel.secondary[0].classList.contains("rt")?((contentSecondary=document.createElement("div")).classList.add(CLASSES.contentSecondaryLabel),contentSecondary.innerHTML=PL.secondary.label+":",contentWrapper.appendChild(contentSecondary),(contentSecondary=document.createElement("div")).classList.add(CLASSES.contentSecondaryData),panel.secondary.forEach(function(elem,i){0!==i&&(contentSecondary.innerHTML+=" "),contentSecondary.innerHTML+=du.trim(elem.innerHTML," "),elem.classList.toString().split(" ").forEach(function(className){className&&"noWrap"!==className&&contentSecondary.classList.add(className)})})):((contentSecondary=document.createElement("div")).classList.add(CLASSES.contentSecondary),contentSecondary.innerHTML=PL.secondary.label+": ",panel.secondary.forEach(function(elem,i){0!==i&&(contentSecondary.innerHTML+=" "),contentSecondary.innerHTML+=du.trim(elem.innerHTML," "),[].slice.call(elem.classList).forEach(function(className){"noWrap"!==className&&contentSecondary.classList.add(className)})})),contentWrapper.appendChild(contentSecondary)),panelWrapper.appendChild(contentWrapper),PL.modes.expand&&((controlsWrapper=document.createElement("div")).classList.add(CLASSES.controlsWrapper),controlsWrapper.classList.add(CLASSES.controlsWrapperRight),(controlView=document.createElement("div")).classList.add(CLASSES.control),(controlExpand=document.createElement("div")).classList.add(CLASSES.controlExpand),controlExpand.setAttribute("role","button"),controlExpand.innerHTML=TEXT_controlExpand,controlView.appendChild(controlExpand),controlsWrapper.appendChild(controlView),panelWrapper.appendChild(controlsWrapper),(contentExpanded=document.createElement("div")).classList.add(CLASSES.contentExpanded),contentExpanded.classList.add(CLASSES.hidden),PL.expanded.indices.forEach(function(i){var wrapper,label,data,elem=panel.expanded[i];if(!elem)return!1;(wrapper=document.createElement("div")).classList.add(CLASSES.contentExpandedRow),(label=document.createElement("div")).classList.add(CLASSES.contentExpandedLabel),label.innerHTML=PL.expanded.labels[i]+":",(data=document.createElement("div")).classList.add(CLASSES.contentExpandedData),data.innerHTML=du.trim(elem.innerHTML," "),[].slice.call(elem.classList).forEach(function(className){"noWrap"!==className&&data.classList.add(className)}),wrapper.appendChild(label),wrapper.appendChild(data),contentExpanded.appendChild(wrapper)}),contentWrapper.appendChild(contentExpanded)),panelElem.appendChild(panelWrapper),panelList.appendChild(panelElem)}),outerWrapper.appendChild(panelList),(PL.footer.label||PL.footer.data)&&outerWrapper.appendChild(priv.createTotalDisplay(PL)),(insertElement=PL.sourceRset)||(insertElement=PL.sourceElem.parentNode),outerWrapper=insertElement.parentNode.insertBefore(outerWrapper,insertElement.nextSibling),PL.instructions.toggleElem&&PLUGIN.tooltip&&((settings=PLUGIN.tooltip.getSettingsTemplate()).selector="."+CLASSES.instToggle,settings.containerClass=CLASSES.instTooltip,settings.contentIdSourceAttr=ATTR_NAMES.tooltip,PLUGIN.tooltip.registerConfig(NAMESPACE,settings)),du.browser.supports.sticky||priv.insertFloatingHeader(headerWrapper),outerWrapper},priv.createTotalDisplay=function(PL){var totalWrapper=document.createElement("div"),totalLabel=document.createElement("div"),totalData=document.createElement("div");return totalWrapper.classList.add(CLASSES.totalWrapper),totalLabel.classList.add(CLASSES.totalLabel),totalLabel.innerHTML=PL.footer.label,totalData.classList.add(CLASSES.totalData),totalData.innerHTML=PL.footer.data,totalWrapper.appendChild(totalLabel),totalWrapper.appendChild(totalData),totalWrapper},priv.createTableHeader=function(PL){var header=document.createElement("div"),title=document.createElement("div"),heading=document.createElement("h5");document.createElement("div"),document.createElement("a");return header.classList.add(CLASSES.header),PL.title&&(title.classList.add(CLASSES.tableTitle),heading.innerHTML=PL.title,title.appendChild(heading),PL.instructions.toggleElem&&title.appendChild(PL.instructions.toggleElem)),header.appendChild(title),header},priv.insertFloatingHeader=function(headerWrapper){var floatingHeader=headerWrapper.cloneNode(!0);floatingHeader.classList.add(CLASSES.headerFloating),du.query("."+CLASSES.headerFloating,headerWrapper.parentNode).forEach(function(floater){floater.parentNode.removeChild(floater)}),headerWrapper.parentNode.insertBefore(floatingHeader,headerWrapper.nextSibling),floatingHeader.style.visibility="visible",floatingHeader.style.width="100%",priv.positionFloatingHeaders()},priv.positionFloatingHeaders=function(evt){du.query("."+CLASSES.headerFloating).forEach(function(floatingHeader){var headerElem,offsetTop,headerHeight,bottomOfPanelList,positionTop,outerWrapper=du.getParentElem(floatingHeader,"."+CLASSES.outerWrapper),scrollTop=window.scrollY;bottomOfPanelList=(offsetTop=du.getElementPosition(outerWrapper)[1])+parseInt(getComputedStyle(outerWrapper,null).height,10)+1,positionTop="0px",offsetTop<scrollTop&&scrollTop<bottomOfPanelList?(headerElem=du.queryOne("."+CLASSES.headerWrapper,outerWrapper),headerHeight=parseInt(getComputedStyle(headerElem,null).height,10),floatingHeader.style.width=parseInt(headerElem.clientWidth,10)+"px",floatingHeader.style.visibility="visible",bottomOfPanelList-scrollTop<headerHeight&&(positionTop="-"+(headerHeight-(bottomOfPanelList-scrollTop))+"px"),floatingHeader.style.top=positionTop):floatingHeader.style.visibility="hidden"})},priv.clearRadioButtons=function(outerWrapper){du.query("."+CLASSES.controlSelectBox+'[aria-checked="true"]',outerWrapper).forEach(function(elem){var panelElem=du.getParentElem(elem,'[role="link"]'),tableId=panelElem.getAttribute(ATTR_NAMES.tableId),panelIndex=parseInt(panelElem.getAttribute(ATTR_NAMES.panelIndex),10),panel=lists[tableId].panels[panelIndex];panelElem.classList.remove(CLASSES.selected),elem.setAttribute("aria-checked","false"),panel.action.select&&(panel.action.select.checked=!1),du.event.trigger(panel.action.select,"change")})},events.setup=function(){du.query('[role="link"]').forEach(function(panel){panel.addEventListener("click",events.onPanelClick,!1)}),du.browser.supports.sticky||(window.addEventListener("scroll",priv.positionFloatingHeaders,!1),priv.positionFloatingHeaders())},events.teardown=function(){du.query('[role="link"]').forEach(function(panel){panel.removeEventListener("click",events.onPanelClick,!1)}),du.browser.supports.sticky||window.removeEventListener("scroll",priv.positionFloatingHeaders,!1)},events.onPanelClick=function(evt){var panel,controlSelectBox,target=evt.target,panelElem=du.getParentElem(target,'[role="link"]'),outerWrapper=du.getParentElem(panelElem,"."+CLASSES.outerWrapper),tableId=panelElem.getAttribute(ATTR_NAMES.tableId),panelIndex=parseInt(panelElem.getAttribute(ATTR_NAMES.panelIndex),10),doSetRadio=!1,doToggleExpanded=!1,contentExpanded=du.queryOne("."+CLASSES.contentExpanded,du.getParentElem(panelElem,"."+CLASSES.panel));!contentExpanded||du.getParentElem(target,"."+CLASSES.controlsWrapperLeft)?doSetRadio=!0:contentExpanded?doToggleExpanded=!0:du.getParentElem(target,"."+CLASSES.controlsWrapperRight)?doToggleExpanded=!0:doSetRadio=!0,doSetRadio?(panelElem.classList.add(CLASSES.selected),outerWrapper&&(outerWrapper.classList.add(CLASSES.hasSelected),priv.clearRadioButtons(outerWrapper)),panelElem.classList.add(CLASSES.selected),(controlSelectBox=du.queryOne("."+CLASSES.controlSelectBox,panelElem))&&controlSelectBox.setAttribute("aria-checked","true"),lists[tableId]&&((panel=lists[tableId].panels[panelIndex]).action.select&&(panel.action.select.checked=!0),du.event.trigger(panel.action.select,"change"))):doToggleExpanded&&(contentExpanded.classList.contains(CLASSES.hidden)?panelElem.classList.add(CLASSES.panelIsExpanded):panelElem.classList.remove(CLASSES.panelIsExpanded),du.animateHeightToggle(contentExpanded))},events.onRealInputChange=function(evt){var fauxId,fauxInput,realInput=evt.target;realInput&&(fauxId=realInput.id+ID_SUFFIXES_fauxInput,(fauxInput=document.getElementById(fauxId))&&(fauxInput.value=realInput.value,priv.updatePanelStatus(fauxInput)))},{setup:function(tables){return!(void 0===tables&&du.query("."+CLASSES.outerWrapper).length||(priv.hasPreloaded||(du.imagesPath=uiGlobal.sIFLOWImagesPath,priv.preload()),void 0===tables?priv.setupAllTables():("array"!==du.typeOf(tables)&&(tables=[tables]),tables.forEach(function(table){"element"===du.typeOf(table)&&priv.setupTable(table)})),0))},teardown:function(){return events.teardown(),du.query("."+CLASSES.outerWrapper).forEach(function(pl){pl.parentNode.removeChild(pl)}),!0}}}(),PLUGIN.namespace("tooltip"),PLUGIN.tooltip=function(){var _init,_defaultTooltipObj,_defaultConfigObj,_defaultSettingsObj,MESSAGE_TYPES=["error","warning","info","success"],_priv={},_public={},_client={},_events={},_tooltipList=new List,_configs=new List,_imgPath="",_offsets={},_linkSelectors="",_du={};return _client.hasBeenSet=!1,_client.focusedElem=null,_client.usePointerImg=!1,_client.isIE7=!1,_events.setup={},_defaultConfigObj={selector:".has-tooltip",clearOtherTooltips:!(_events.setup.pageHasBeenSetup=!1),containerClass:"",pointerPosition:"topright",pointerImgPath:"",closeButtonText:"Close",closeButtonPosition:"below",closeOnBlur:!0,contentIdSourceAttr:"href",offsets:{},width:400,cacheTooltips:!0,legacyIflow:!(_defaultTooltipObj={configId:"default",tooltipElem:null,invokerElem:null,targetElem:null,linkTitle:{show:"Show more information",hide:"Hide the tooltip"},offsets:{parent:{x:0,y:0}},width:400,isWidthDetermined:!1,isWidthDeterminedIE7:!1}),dynamicContent:null},_configs.set("default",_defaultConfigObj),_defaultSettingsObj={body:{html:""},messages:[],target:{id:""}},_offsets={position:{x:16,y:9},tagTH:{x:0,y:0},tagTD:{x:0,y:2},tagH4:{x:0,y:0},expandedTable:{x:-1,y:5},pointer:{x:-19,y:-19,borderWidth:1},variablePointer:{x:-3,y:-20,borderWidth:1},noPointer:{x:0,y:13}},_linkSelectors=".has-tooltip",_du={query:uiUtil.query,queryOne:uiUtil.queryOne,browser:uiUtil.browser,typeOf:uiUtil.typeOf,trim:uiUtil.trim,extend:uiUtil.extend,event:{add:uiUtil.attachEvent,remove:uiUtil.detachEvent,trigger:uiEvents.trigger,stop:uiUtil.stopEvent,getTarget:uiUtil.getHTMLObjFromEvent},css:{addClass:uiUtil.css.addClass,hasClass:uiUtil.css.hasClass,addRule:uiUtil.css.addRule},getParentElem:uiUtil.getParentElem,establishElementId:uiUtil.establishElementId,getElementPosition:uiUtil.getElementPosition,getViewPort:uiUtil.getViewPort,getScrollTop:uiUtil.getScrollTop,logError:uiUtil.errorHandling.jsLog.addEntry},_init=function(){try{_client.setup(),_events.setup.page(),_priv.config.createPointerImg("default",_configs.get("default"))}catch(e){_priv.logError(e,arguments)}},_client.setup=function(){try{if(_client.hasBeenSet)return!1;/internet\sexplorer/i.test(_du.browser.sName)?_du.browser.iVersion<8?(_client.isIE7=!0,_client.usePointerImg=!0,_offsets.position.y=9,_offsets.pointer.x=10,_offsets.pointer.y=-17,_offsets.variablePointer.x=21,_offsets.variablePointer.y=-17,_offsets.tagTH.x=6,_offsets.tagTH.y=0,_offsets.tagTD.x=-1,_offsets.tagTD.y=0,_offsets.tagH4.x=-4,_offsets.tagH4.y=1,_offsets.expandedTable.y=1):8===_du.browser.iVersion&&(_offsets.expandedTable.y=8):/firefox/i.test(_du.browser.sName)?(_offsets.position.y=10,_offsets.pointer.y=-20):/chrome/i.test(_du.browser.sName)&&(_offsets.tagTH.x=1),_client.hasBeenSet=!0}catch(e){_priv.logError(e,arguments)}},_priv.config={},_priv.pointerImgs=new List,_priv.config.register=function(configId,configObject){try{return configId&&"string"==typeof configId?(configObject=_priv.config.normalize(configObject),_configs.isSet(configId)&&(configObject=_du.extend(!0,{},_configs.get(configId),configObject)),_configs.set(configId,configObject),_priv.config.updateSelectors(configObject.selector),_client.setup(),_priv.config.createPointerImg(configId,configObject),_init(),configObject):null}catch(e){_priv.logError(e,arguments)}},_priv.config.createPointerImg=function(configId,config){try{var img=null;return!(!configId||!config)&&(!(!(_client.usePointerImg&&0<config.pointerImgPath.length)||_priv.pointerImgs.isSet(configId))&&((img=document.createElement("img")).className="tooltipPointer "+config.containerClass,img.setAttribute("src",_imgPath+config.pointerImgPath),document.body.appendChild(img),_priv.pointerImgs.set(configId,img),!0))}catch(e){return _priv.logError(e,arguments),!1}},_priv.config.normalize=function(config){try{var defaults=_configs.get("default"),prop="";if("object"!==_du.typeOf(config))return defaults;if(!config.selector||"string"!=typeof config.selector||"string"==typeof config.selector&&0===_du.trim(config.selector).length)return null;for(prop in defaults)defaults.hasOwnProperty(prop)&&null!==defaults[prop]&&(void 0!==config[prop]&&_du.typeOf(config[prop])===_du.typeOf(defaults[prop])||(config[prop]=defaults[prop]));return config}catch(e){_priv.logError(e,arguments)}},_priv.config.updateSelectors=function(selectorsToAdd){try{var currentSelectors=_du.trim(_linkSelectors,","),selectors=[];return selectorsToAdd=_du.trim(selectorsToAdd,","),0<currentSelectors.length&&(selectors=currentSelectors.split(",")),0<selectorsToAdd.length&&(selectors=selectors.concat(selectorsToAdd.split(","))),_linkSelectors=selectors.join(",")}catch(e){_priv.logError(e,arguments)}},_events.setup.page=function(){try{if(_events.setup.links(),_events.setup.pageHasBeenSetup)return!1;_du.event.add(window,"resize",_events.onWindowResize),_du.event.add(document.body,"spinwheelstart",_events.onSpinwheelAction,!0),_du.event.add(document.body,"spinwheelstop",_events.onSpinwheelAction,!0),_events.setup.pageHasBeenSetup=!0}catch(e){_priv.logError(e,arguments)}},_events.setup.links=function(sContainerSelector,options){try{var aContainers=[],settings=_du.extend(!0,{},{forceSetup:!1},options),setupCount=0;return sContainerSelector&&"string"==typeof sContainerSelector&&(aContainers=_du.query(sContainerSelector)),aContainers.length||(aContainers=[document]),aContainers.forEach(function(oContainer){_configs.forEach(function(config,configId){_du.query(config.selector,oContainer).forEach(function(invokerElem){try{if(!settings.forceSetup&&_du.css.hasClass(invokerElem,"has-tooltip-events"))return!1;_du.css.addClass(invokerElem,"has-tooltip-events"),_du.establishElementId(invokerElem,{useLabel:!0}),!0===config.legacyIflow&&_priv.cleanLegacyOnclick(invokerElem),invokerElem.setAttribute(_priv.getDataAttrPrefix()+"config",configId),_du.event.add(invokerElem,"click",_events.onLinkClick),_du.event.add(invokerElem,"keydown",_events.onLinkKeydown),setupCount++}catch(e){_priv.logError(e,arguments)}})})}),setupCount}catch(e){_priv.logError(e,arguments)}},_events.setup.tooltip=function(tooltipElem,aLinks){try{if("element"!==_du.typeOf(tooltipElem))return!1;var elem=null,fIsTabbable=null;_client.isIE7&&(elem=_du.queryOne("div.tooltipBody",tooltipElem),_du.event.add(elem,"focus",_events.onFocus),_du.event.add(elem,"keydown",_events.onTooltipKeydown)),_du.event.add(tooltipElem,"focus",_events.onFocus),_du.event.add(tooltipElem,"keydown",_events.onTooltipKeydown),_du.event.add(tooltipElem,"click",_events.onTooltipClick),aLinks&&/array|nodelist/.test(_du.typeOf(aLinks))||(fIsTabbable=function(el){return el.tabIndex||!!el.getAttribute("tabindex")},aLinks=_du.query("a, input, .tooltipClose",tooltipElem).filter(fIsTabbable)),aLinks.forEach(function(lnk){_du.event.add(lnk,"focus",_events.onFocus)})}catch(e){_priv.logError(e,arguments)}},_events.onWindowResize=function(){try{_priv.repositionAll()}catch(e){_priv.logError(e,arguments)}},_events.onBodyClick=function(evt){try{var elem=_du.event.getTarget(evt);_du.getParentElem(elem,".tooltip")||_priv.hideAll()}catch(e){_priv.logError(e,arguments)}},_events.onSpinwheelAction=function(){try{_priv.repositionAll()}catch(e){_priv.logError(e,arguments)}},_events.onTooltipClick=function(evt){try{var id,elem=_du.event.getTarget(evt);_du.getParentElem(elem,".tooltipClose")&&(id=_du.getParentElem(elem,".tooltip").id,_priv.hide(evt,id))}catch(e){_priv.logError(e,arguments)}},_events.onTooltipKeydown=function(evt){try{var tooltipId,TT,oSender=_du.event.getTarget(evt);27!==evt.keyCode&&9!==evt.keyCode||(tooltipId=_du.establishElementId(_du.getParentElem(oSender,".tooltip")),TT=_tooltipList.get(tooltipId)),evt.shiftKey&&9===evt.keyCode?(_du.css.hasClass(_client.focusedElem,"tooltip")||_du.css.hasClass(_client.focusedElem,"tooltipBody"))&&(!0===_configs.get(TT.configId).closeOnBlur?_priv.hide(evt,tooltipId):TT.invokerElem.focus(),_du.event.stop(evt)):27===evt.keyCode?_priv.hide(evt,tooltipId):_du.getParentElem(oSender,".tooltipClose")&&9===evt.keyCode&&!evt.shiftKey&&(!0===_configs.get(TT.configId).closeOnBlur?_priv.hide(evt,tooltipId):(TT.invokerElem.focus(),_du.event.stop(evt)))}catch(e){_priv.logError(e,arguments)}},_events.onLinkClick=function(evt){try{_priv.toggle(evt)}catch(e){_priv.logError(e,arguments)}},_events.onLinkKeydown=function(evt){try{13===evt.keyCode&&_priv.show(evt)}catch(e){_priv.logError(e,arguments)}},_events.onFocus=function(evt){try{var oSender=_du.event.getTarget(evt);_client.focusedElem=oSender}catch(e){_priv.logError(e,arguments)}},_priv.show=function(evt,invokerElem,settings){try{var tooltipId,TT=null,config=null;if("element"!==_du.typeOf(invokerElem)){if(!(invokerElem=_du.event.getTarget(evt)))return!0;invokerElem=_du.getParentElem(invokerElem,_linkSelectors.replace(/\,/g," "))}if(tooltipId=_du.establishElementId(invokerElem)+"_tooltip",(TT=_tooltipList.isSet(tooltipId)?_tooltipList.get(tooltipId):null)&&(_priv.settings.hasBodyHTML(settings)||_priv.settings.hasMessages(settings))&&(_priv.destroy(tooltipId),TT=null),null===TT)_priv.create(evt,invokerElem,settings);else{if((config=_configs.get(TT.configId)).cacheTooltips||TT.tooltipElem)return _priv.hideAll(),TT.tooltipElem.style.display="block",TT.tooltipElem.setAttribute("aria-hidden","false"),TT.invokerElem.setAttribute("title",TT.linkTitle.hide),TT=_priv.determineWidth(TT),_priv.position(TT),_client.isIE7&&"above"!==config.closeButtonPosition?_du.queryOne("div.tooltipBody",TT.tooltipElem).focus():TT.tooltipElem.focus(),_du.event.trigger(TT.invokerElem,"tooltipdisplay"),config.closeOnBlur&&setTimeout(function(){_du.event.add(document.body,"click",_events.onBodyClick)},10),_priv.scrollIntoView(TT.tooltipElem),evt&&_du.event.stop(evt),!1;_priv.create(evt,invokerElem,settings)}return!0}catch(e){_priv.logError(e,arguments)}},_priv.create=function(evt,invokerElem,settings){try{var tooltipId,tooltipElem=null,contentId="",contentElem=null,configId="",config=null,TT=null;if("element"!==_du.typeOf(invokerElem))return!1;if(configId=void 0!==invokerElem.getAttribute(_priv.getDataAttrPrefix()+"config")?invokerElem.getAttribute(_priv.getDataAttrPrefix()+"config"):"default",config=_configs.get(configId),!_priv.settings.hasBodyHTML(settings)&&!_priv.settings.hasMessages(settings)){if("object"===_du.typeOf(config.dynamicContent))return"function"==typeof config.dynamicContent.callback&&config.dynamicContent.callback(invokerElem,config.dynamicContent),!1;(contentId="href"===config.contentIdSourceAttr&&invokerElem.getAttribute("href")&&-1<invokerElem.getAttribute("href").indexOf("#")?invokerElem.hash.replace(/^#/,""):invokerElem.getAttribute(config.contentIdSourceAttr))&&(contentElem=document.getElementById(contentId)),contentElem?(settings=_priv.settings.normalize.all(settings),!0===config.legacyIflow?settings.body.html=contentElem.parentNode.innerHTML:settings.body.html=contentElem.innerHTML):function(invokerElem,contentId){var oError=new Error,sFieldId="[no ID]",oParent=_du.getParentElem(invokerElem,"div th td .line .linePn"),oField=_du.query("input, select, textarea, .data, .dataPn, div",oParent);throw sFieldId=0<oField.length?oField[0].id||(oField[0].innerHTML?oField[0].innerHTML.substr(0,40):"")||"[no ID]":(oParent.innerHTML?oParent.innerHTML.substr(0,40)+"...":"")||"[no content]",oError.name="Tooltip content not found",oError.message='An instruction block with the id "'+contentId,oError.message+='" does not exist for the field "'+sFieldId+'"',oError}(invokerElem,contentId)}if((tooltipElem=document.createElement("div")).className="tooltip "+config.containerClass,tooltipId=_du.establishElementId(invokerElem)+"_tooltip",tooltipElem.setAttribute("id",tooltipId),tooltipElem.tabIndex="1",tooltipElem.innerHTML=_priv.createTooltipInnerHTML(settings,config,invokerElem.id),document.body.appendChild(tooltipElem),_events.setup.tooltip(tooltipElem,_du.query("a, .tooltipClose",tooltipElem)),invokerElem.setAttribute("aria-haspopup","true"),invokerElem.setAttribute("aaa:controls",tooltipId),(TT=_du.extend(!0,{},_defaultTooltipObj)).tooltipElem=tooltipElem,TT.invokerElem=invokerElem,TT.targetElem=_priv.getTargetElem(invokerElem,settings),TT.configId=configId,TT.width=config.width,invokerElem.getAttribute("title")&&(TT.linkTitle.show=invokerElem.getAttribute("title")),config.legacyIflow&&_du.getParentElem(invokerElem,".lineTable"))TT.offsets.parent.x=_offsets.expandedTable.x,TT.offsets.parent.y=_offsets.expandedTable.y;else if(oElem=_du.getParentElem(invokerElem,"h4 td th"),oElem)switch(oElem.nodeName.toLowerCase()){case"th":TT.offsets.parent.x=config.offsets.tagTH?config.offsets.tagTH.x+_offsets.tagTH.x:_offsets.tagTH.x,TT.offsets.parent.y=config.offsets.tagTH?config.offsets.tagTH.y+_offsets.tagTH.y:_offsets.tagTH.y;break;case"td":TT.offsets.parent.x=config.offsets.tagTD?config.offsets.tagTD.x+_offsets.tagTD.x:_offsets.tagTD.x,TT.offsets.parent.y=config.offsets.tagTD?config.offsets.tagTD.y+_offsets.tagTD.y:_offsets.tagTD.y;break;case"h4":TT.offsets.parent.x=config.offsets.tagH4?config.offsets.tagH4.x+_offsets.tagH4.x:_offsets.tagH4.x,TT.offsets.parent.y=config.offsets.tagH4?config.offsets.tagH4.y+_offsets.tagH4.y:_offsets.tagH4.y}return _tooltipList.set(tooltipId,TT),_priv.show(evt,invokerElem),TT.tooltipElem}catch(e){_priv.logError(e,arguments)}},_priv.createTooltipInnerHTML=function(settings,config,id){try{var div=document.createElement("div"),divHTML="",closeButtonHTML='<div class="tooltipCloseContainer"><a href="#" tabindex="1" class="tooltipClose" title="Close" aria-flowto="'+id+'" aria-live="assertive" aaa:live="assertive">'+config.closeButtonText+"</a></div>";return"above"===config.closeButtonPosition&&(divHTML+=closeButtonHTML),divHTML+='<div class="tooltipBody"'+(_client.isIE7?' tabindex="1"':"")+">",0<settings.messages.length?settings.messages.forEach(function(msg){var typeName=msg.type.substr(0,1).toUpperCase()+msg.type.substr(1).toLowerCase();"Info"===typeName&&(typeName+="rmational"),divHTML+='<div class="msg'+typeName+'">',divHTML+='<div class="msgIcon msg'+typeName+'Icon">'+typeName+"</div>",divHTML+='<div class="msgContent">'+msg.description+"</div></div>"}):divHTML+=settings.body.html,divHTML+="</div>","above"!==config.closeButtonPosition&&(divHTML+=closeButtonHTML),div.innerHTML=divHTML,_du.query("a, .tooltipClose",div).forEach(function(elem){elem.tabIndex=1}),div.innerHTML}catch(e){_priv.logError(e,arguments)}},_priv.position=function(TT){try{var targetPosition,targetElem,config,tooltipElem=null,pointerImg=null,windowPaddingX=0,windowPaddingY=0,ttPosition=null;return"object"===_du.typeOf(TT)&&(!!TT.tooltipElem&&(tooltipElem=TT.tooltipElem,targetElem=TT.targetElem,targetPosition=_du.getElementPosition(targetElem),config=_configs.get(TT.configId),ttPosition={x:0,y:0,pointer:{x:0,y:0}},_client.usePointerImg&&_priv.pointerImgs.isSet(TT.configId)&&(pointerImg=_priv.pointerImgs.get(TT.configId)),"topright"===config.pointerPosition?(ttPosition.y=targetPosition[1]+_offsets.position.y+TT.offsets.parent.y+targetElem.offsetHeight,config.offsets.position&&("number"==typeof config.offsets.position.x&&(ttPosition.x+=config.offsets.position.x),"number"==typeof config.offsets.position.y&&(ttPosition.y+=config.offsets.position.y)),tooltipElem.style.top=ttPosition.y+"px",TT.width<=targetPosition[0]?(ttPosition.x+=targetPosition[0]+targetElem.offsetWidth/2+TT.offsets.parent.x+_offsets.position.x-5-TT.width,tooltipElem.style.left=ttPosition.x+"px",config.offsets.pointer&&(windowPaddingX=config.offsets.pointer.x,windowPaddingY=config.offsets.pointer.y),pointerImg?(ttPosition.pointer.x=targetPosition[0]+_offsets.pointer.x+windowPaddingX+_offsets.pointer.borderWidth,ttPosition.pointer.y=parseInt(tooltipElem.style.top,10)+9+windowPaddingY+_offsets.pointer.y-_offsets.pointer.borderWidth):(_du.css.hasClass(tooltipElem,"tt-form-table")&&(windowPaddingX-=11),_du.css.addRule("div#"+tooltipElem.id+".tooltip:before { left:"+(TT.width+_offsets.pointer.x+windowPaddingX)+"px;   top:"+(windowPaddingY+_offsets.pointer.y)+"px; }div#"+tooltipElem.id+".tooltip:after { left:"+(TT.width+_offsets.pointer.x+windowPaddingX-_offsets.pointer.borderWidth)+"px;   top:"+(_offsets.pointer.y+windowPaddingY+_offsets.pointer.borderWidth)+"px; }"))):(targetElem.offsetWidth/2<10&&(windowPaddingX=10-targetElem.offsetWidth/2),ttPosition.x=targetElem.offsetWidth/2,config.offsets.position&&(ttPosition.x+=config.offsets.position.x),pointerImg?(ttPosition.x-=8,config.offsets.variablePointer&&(windowPaddingX=config.offsets.variablePointer.x,windowPaddingY=config.offsets.variablePointer.y),ttPosition.pointer.x=targetPosition[0]+TT.offsets.parent.x+windowPaddingX+_offsets.variablePointer.x+_offsets.variablePointer.borderWidth,ttPosition.pointer.y=parseInt(tooltipElem.style.top,10)+9+windowPaddingY+_offsets.variablePointer.y-_offsets.variablePointer.borderWidth):(config.offsets.variablePointer&&(windowPaddingX+=config.offsets.variablePointer.x,windowPaddingY+=config.offsets.variablePointer.y),_du.css.addRule("div#"+tooltipElem.id+".tooltip:before { left:"+(targetPosition[0]+TT.offsets.parent.x+_offsets.variablePointer.x+windowPaddingX)+"px; top:"+(_offsets.variablePointer.y+windowPaddingY)+"px; } div#"+tooltipElem.id+".tooltip:after { left:"+(targetPosition[0]+TT.offsets.parent.x+_offsets.variablePointer.x-_offsets.variablePointer.borderWidth+windowPaddingX)+"px; top:"+(_offsets.variablePointer.y+_offsets.variablePointer.borderWidth+windowPaddingY)+"px; }")),tooltipElem.style.left=ttPosition.x+"px"),pointerImg&&(pointerImg.style.display="block",pointerImg.style.left=ttPosition.pointer.x+"px",pointerImg.style.top=ttPosition.pointer.y+"px")):(TT.width+targetPosition[0]<_du.getViewPort()[0]?(ttPosition.x=targetPosition[0]+TT.offsets.parent.x,config.offsets.position&&(ttPosition.x+=config.offsets.position.x),tooltipElem.style.left=ttPosition.x+"px"):(tooltipElem.style.left="auto",tooltipElem.style.right="10px"),ttPosition.y=targetPosition[1]+_offsets.position.y+TT.offsets.parent.y+targetElem.offsetHeight,ttPosition.y+=_offsets.pointer.y+_offsets.noPointer.y,config.offsets.position&&(ttPosition.y+=config.offsets.position.y),tooltipElem.style.top=ttPosition.y+"px",pointerImg?pointerImg.style.display="none":_du.css.addRule("div#"+tooltipElem.id+".tooltip:before { display: none; } div#"+tooltipElem.id+".tooltip:after { display: none; }")),!0))}catch(e){_priv.logError(e,arguments)}},_priv.repositionAll=function(){try{_tooltipList.forEach(function(TT){if(TT.tooltipElem&&"none"!==TT.tooltipElem.style.display)try{_priv.position(TT)}catch(ee){_priv.logError(ee,arguments)}})}catch(e){_priv.logError(e,arguments)}},_priv.determineWidth=function(TT){try{var allElemsAreLessThanMax,iWidest,iTooltipWidth,linkPosition,iNewWidth,tooltipElem=TT.tooltipElem,maxWidth=_configs.get(TT.configId).width;return _client.isIE7&&(TT.isWidthDeterminedIE7?tooltipElem.style.width=TT.width+"px":(allElemsAreLessThanMax=!0,iWidest=0,_du.query("*",tooltipElem).forEach(function(elem){var elemWidth,originalDisplayStyle;allElemsAreLessThanMax&&(originalDisplayStyle=elem.style.display||"",elem.style.display="inline-block",elemWidth=elem.offsetWidth,elem.style.display=originalDisplayStyle,maxWidth<=elemWidth?allElemsAreLessThanMax=!1:iWidest<elemWidth&&(iWidest=elemWidth)),iWidest<50&&(TT.width=iWidest=400)}),allElemsAreLessThanMax&&iWidest<400&&(iNewWidth=tooltipElem.offsetWidth-(tooltipElem.offsetWidth-iWidest),tooltipElem.style.width=iNewWidth+"px",TT.width=iNewWidth),TT.isWidthDeterminedIE7=!0)),TT.isWidthDetermined||(iTooltipWidth=TT.width,tooltipElem.offsetWidth<TT.width&&(TT.width=tooltipElem.offsetWidth-4,iTooltipWidth=TT.width),iNewWidth=0,linkPosition=_du.getElementPosition(TT.invokerElem),_du.query("img",tooltipElem).forEach(function(elem){elem.clientWidth>maxWidth-10&&(elem.clientWidth<Math.abs(iTooltipWidth-linkPosition[0])||elem.clientWidth>iTooltipWidth)&&(iNewWidth=elem.clientWidth+8,tooltipElem.style.width=iNewWidth+"px",tooltipElem.style.maxWidth=iNewWidth+"px",TT.width=iNewWidth)}),TT.isWidthDetermined=!0),TT}catch(e){_priv.logError(e,arguments)}},_priv.getTargetElem=function(invokerElem,settings){try{var target=invokerElem;return _priv.settings.validate.target(settings)&&(target=document.getElementById(settings.target.id)||invokerElem),target}catch(e){_priv.logError(e,arguments)}},_priv.scrollIntoView=function(tooltipElem){try{var iOutOfView=_du.getElementPosition(tooltipElem)[1]+tooltipElem.offsetHeight-(_du.getViewPort()[1]+_du.getScrollTop());0<iOutOfView&&window.scrollBy(0,iOutOfView)}catch(e){_priv.logError(e,arguments)}},_priv.hide=function(evt,tooltipId){try{var TT=_tooltipList.get(tooltipId);return TT.tooltipElem&&(TT.tooltipElem.style.display="none",TT.tooltipElem.setAttribute("aria-hidden","true")),TT.invokerElem.setAttribute("title",TT.linkTitle.show),_du.event.trigger(TT.invokerElem,"tooltiphide"),_client.usePointerImg&&_priv.pointerImgs.isSet(TT.configId)&&(_priv.pointerImgs.get(TT.configId).style.display="none"),_du.event.remove(document.body,"click",_events.onBodyClick),TT.invokerElem.focus(),_client.focusedElem=null,_priv.clearTooltipCache(TT),_du.event.stop(evt),!1}catch(e){_priv.logError(e,arguments)}},_priv.hideAll=function(){try{return!!_tooltipList.length&&(_tooltipList.forEach(function(TT){var wasDisplaying=!1;TT.tooltipElem&&(wasDisplaying="block"===TT.tooltipElem.style.display,TT.tooltipElem.style.display="none",TT.tooltipElem.setAttribute("aria-hidden","true")),_client.usePointerImg&&_priv.pointerImgs.isSet(TT.configId)&&(_priv.pointerImgs.get(TT.configId).style.display="none"),_du.event.trigger(TT.invokerElem,"tooltiphide"),wasDisplaying&&_priv.clearTooltipCache(TT)}),_client.focusedElem=null,_du.event.remove(document.body,"click",_events.onBodyClick),!0)}catch(e){_priv.logError(e,arguments)}},_priv.toggle=function(evt){try{var tooltipId,invokerElem=_du.event.getTarget(evt),bDoOpen=!0,TT=null;tooltipId=(invokerElem=_du.getParentElem(invokerElem,_linkSelectors.replace(/\,/g," "))).id+"_tooltip",_tooltipList.isSet(tooltipId)&&(TT=_tooltipList.get(tooltipId)).tooltipElem&&"none"!==TT.tooltipElem.style.display&&(bDoOpen=!1,_priv.hide(evt,tooltipId)),bDoOpen&&_priv.show(evt,invokerElem),_du.event.stop(evt)}catch(e){_priv.logError(e,arguments)}},_priv.clearTooltipCache=function(TT){try{return!!TT&&(!(!TT.tooltipElem||_configs.get(TT.configId).cacheTooltips)&&(TT.tooltipElem.parentNode.removeChild(TT.tooltipElem),!(TT.tooltipElem=null)))}catch(e){_priv.logError(e,arguments)}},_priv.destroy=function(tooltipId){try{var tooltipElem=document.getElementById(tooltipId);tooltipElem&&tooltipElem.parentNode.removeChild(tooltipElem),_tooltipList.remove(tooltipId)}catch(e){_priv.logError(e,arguments)}},_priv.settings={},_priv.settings.validate={},_priv.settings.validate.all=function(settings){try{var numTests=0,numPassed=0;return numTests++,"object"===_du.typeOf(settings)&&(numPassed++,numTests++,_priv.settings.validate.body(settings)&&numPassed++,numTests++,_priv.settings.validate.messages(settings)&&numPassed++,numTests++,_priv.settings.validate.target(settings)&&numPassed++),numTests===numPassed}catch(e){_priv.logError(e,arguments)}},_priv.settings.validate.body=function(settings){try{var numTests=0,numPassed=0;return numTests++,"object"===_du.typeOf(settings)&&(numPassed++,numTests++,"object"===_du.typeOf(settings.body)&&"string"==typeof settings.body.html&&numPassed++),numTests===numPassed}catch(e){_priv.logError(e,arguments)}},_priv.settings.validate.message=function(message){try{var numTests=0,numPassed=0;return numTests++,"object"===_du.typeOf(message)&&(numPassed++,numTests++,"string"==typeof msg.type&&"string"==typeof msg.description&&-1<MESSAGE_TYPES.indexOf(msg.type.toLowerCase())&&0<msg.description.length&&numPassed++),numTests===numPassed}catch(e){_priv.logError(e,arguments)}},_priv.settings.validate.messages=function(settings){try{var numTests=0,numPassed=0;return numTests++,"object"===_du.typeOf(settings)&&(numPassed++,numTests++,"array"===_du.typeOf(settings.messages)&&(numPassed++,settings.messages.forEach(function(msg,i,arr){numTests++,_priv.settings.validate.message(msg)?numPassed++:/undefined|null/.test(_du.typeOf(msg))&&(arr.splice(i,1),numPassed++)}))),numTests===numPassed}catch(e){_priv.logError(e,arguments)}},_priv.settings.validate.target=function(settings){try{var numTests=0,numPassed=0;return numTests++,"object"===_du.typeOf(settings)&&(numPassed++,numTests++,"object"===_du.typeOf(settings.target)&&"string"==typeof settings.target.id&&0<_du.trim(settings.target.id).length&&numPassed++),numTests===numPassed}catch(e){_priv.logError(e,arguments)}},_priv.settings.normalize={},_priv.settings.normalize.all=function(custom){try{var settings=_du.extend(!0,{},_defaultSettingsObj);return settings.body=_priv.settings.normalize.body(custom),settings.messages=_priv.settings.normalize.messages(custom),settings.target=_priv.settings.normalize.target(custom),settings}catch(e){_priv.logError(e,arguments)}},_priv.settings.normalize.body=function(custom){try{var body=_du.extend(!0,{},_defaultSettingsObj).body;return"object"===_du.typeOf(custom)&&_priv.settings.validate.body(custom)&&0<_du.trim(custom.body.html).length&&(body.html=custom.body.html),body}catch(e){_priv.logError(e,arguments)}},_priv.settings.normalize.messages=function(custom){try{var messages=_du.extend(!0,{},_defaultSettingsObj).messages;return"object"===_du.typeOf(custom)&&_priv.settings.validate.messages(custom)&&custom.messages.forEach(function(msg,i,arr){_priv.settings.validate.message(msg)?(msg.type=msg.type.toLowerCase(),messages.push(msg)):/undefined|null/.test(_du.typeOf(msg))&&arr.splice(i,1)}),messages}catch(e){_priv.logError(e,arguments)}},_priv.settings.normalize.target=function(custom){try{var target=_du.extend(!0,{},_defaultSettingsObj).target;return"object"===_du.typeOf(custom)&&_priv.settings.validate.target(custom)&&(target.id=custom.target.id),target}catch(e){_priv.logError(e,arguments)}},_priv.settings.hasBodyHTML=function(settings){var returnVal=!1;try{_priv.settings.validate.body(settings)&&0<_du.trim(settings.body.html).length&&(returnVal=!0)}catch(e){_priv.logError(e,arguments),returnVal=!1}finally{return returnVal}},_priv.settings.hasMessages=function(settings){var returnVal=!1;try{_priv.settings.validate.messages(settings)&&0<settings.messages.length&&(returnVal=!0)}catch(e){_priv.logError(e,arguments),returnVal=!1}finally{return returnVal}},_priv.cleanLegacyOnclick=function(elem){try{var sOnClick="";"string"==typeof elem.getAttribute("onclick")&&(sOnClick=elem.getAttribute("onclick").replace(/uiUtil\.helpIcons\.oReturnTo\=\'\w+\'/i,""),elem.setAttribute("onclick",sOnClick.replace(/^javascript\:\s*\;$/i,"")))}catch(e){_priv.logError(e,arguments)}},_priv.getDataAttrPrefix=function(){try{return"data-"+(0<"tt".length?"tt-":"")}catch(e){_priv.logError(e,arguments)}},_priv.setImagesPath=function(url){try{"string"==typeof url&&0<(url=_du.trim(url)).length&&(_imgPath=url)}catch(e){_priv.logError(e,arguments)}finally{return _imgPath}},_priv.logError=function(err,args){try{return _du.logError(err,args),!1}catch(e){}},_public.show=function(invokerIdentifier,settings){var returnVal=!1;try{if("string"==typeof settings)try{settings=JSON.parse(settings)}catch(e){settings=null}settings=_priv.settings.normalize.all(settings),_priv.settings.hasBodyHTML(settings)||_priv.settings.hasMessages(settings)?("string"===_du.typeOf(invokerIdentifier)&&(invokerIdentifier=document.getElementById(invokerIdentifier)),"element"===_du.typeOf(invokerIdentifier)&&(_priv.show(null,invokerIdentifier,settings),returnVal=!0)):returnVal=!1}catch(e){_priv.logError(e,arguments)}finally{return returnVal}},_public.hide=function(invokerIdentifier){var returnVal=!1;try{"element"===_du.typeOf(invokerIdentifier)&&(invokerIdentifier=_du.establishElementId(invokerIdentifier)),"string"===_du.typeOf(invokerIdentifier)&&(invokerIdentifier.indexOf("_tooltip")<0&&(invokerIdentifier+="_tooltip"),_priv.hide(null,invokerIdentifier),returnVal=!0)}catch(e){_priv.logError(e,arguments)}finally{return returnVal}},_public.getSettingsTemplate=function(){try{return _du.extend(!0,{},_defaultSettingsObj)}catch(e){_priv.logError(e,arguments)}},_public.getVersion=function(){try{return"1.1.7.20150112"}catch(e){_priv.logError(e,arguments)}},_public.addLinks=function(sContainerSelector,options){try{return _events.setup.links(sContainerSelector,options)}catch(e){_priv.logError(e,arguments)}},{show:_public.show,hide:_public.hide,hideAll:_priv.hideAll,setImagesPath:_priv.setImagesPath,registerConfig:_priv.config.register,getSettingsTemplate:_public.getSettingsTemplate,getVersion:_public.getVersion,addLinks:_public.addLinks}}(),PLUGIN.namespace("tracking"),PLUGIN.tracking=function(){var CATEGORIES={client:"Client",app:"App",responsive:"Responsive",bannerresponsive:"Banner (Responsive)",bannerdesktop:"Banner (Desktop)",footer:"Footer",masktoggle:"MaskToggle",collapsible:"Collapsible"},priv={},trackEvent=function(category,action,label,value,isNonInteraction){return"function"!=typeof ga?(uiGlobal.trackingQueue.push({category:category,action:action,label:label,value:value,isNonInteraction:isNonInteraction}),!1):(priv.processQueue(),"string"==typeof category&&"string"==typeof action&&(category=uiUtil.trim(category).toLowerCase(),action=uiUtil.trim(action),!!(category.length&&action.length&&CATEGORIES.hasOwnProperty(category))&&(category=CATEGORIES[category],void("string"!=typeof label||uiUtil.trim(label).length<1?isNonInteraction?ga("send","event",category,action,{nonInteraction:1}):ga("send","event",category,action):(label=uiUtil.trim(label),"number"!=typeof value||-1<value?isNonInteraction?ga("send","event",category,action,label,{nonInteraction:1}):ga("send","event",category,action,label):isNonInteraction?ga("send","event",category,action,label,value,{nonInteraction:1}):ga("send","event",category,action,label,value))))))};return priv.processQueue=function(){var ev;if("function"!=typeof ga||!uiGlobal.trackingQueue.length)return!1;for(ev=uiGlobal.trackingQueue.pop();ev;)trackEvent(ev.category,ev.action,ev.label,ev.value,ev.isNonInteraction),ev=uiGlobal.trackingQueue.pop();return!0},priv.setupEventTracking=function(){var trackProgressBar,elems,numElems,progressBar=document.getElementById("progress-bar");if(progressBar)for(trackProgressBar=function(evt){var target=uiUtil.getHTMLObjFromEvent(evt);trackEvent("ProgressBarDesktop","Link click",uiGlobal.appCode+"|"+target.innerHTML)},numElems=(elems=progressBar.getElementsByTagName("a")).length;numElems--;)uiUtil.attachEvent(elems[numElems],"click",trackProgressBar)},priv.insertGoogleTagManager=function(){void 0===window.dataLayer&&function(w,d,s,l,i){w[l]=w[l]||[],w[l].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var f=d.getElementsByTagName(s)[0],j=d.createElement(s);j.src=uiGlobal.assets.protocol+"//www.googletagmanager.com/gtm.js?id=GTM-T4FP6H",j.type="text/javascript",j.async=!0,f.parentNode.insertBefore(j,f)}(window,document,"script","dataLayer")},{pageSetup:function(){"function"==typeof ga&&(priv.insertGoogleTagManager(),priv.setupEventTracking(),priv.processQueue())},trackEvent:trackEvent}}();
;uiGlobal.sVersion = "4.2.55.REL20180514";